import{f as b,P as A,K as f,o as i,g as l,D as I,v as C,x as s,I as t,i as d,z as k,h as n,B as o,F as g,A as r,L,n as j,C as K,aa as P}from"./vendor-DwjfiTos.js";import{a as T,v as q}from"./index-lYYcvhZ6.js";import{d as G}from"./dragBox-cYxTLZvC.js";const H={class:"c-icon"},J=b({__name:"c-icon",props:{color:{default:"#606266"},size:{default:"16"}},setup(u){A(v=>({cd664da6:_.value,e1214892:m.value}));const p=u,m=f(()=>p.color),_=f(()=>parseInt(p.size)+"px");return(v,z)=>(i(),l("span",H,[I(v.$slots,"default")]))}}),O=t("svg",{t:"1693879787380",class:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M243.2 512m-83.2 0a1.3 1.3 0 1 0 166.4 0 1.3 1.3 0 1 0-166.4 0Z","p-id":"5208"}),t("path",{d:"M512 512m-83.2 0a1.3 1.3 0 1 0 166.4 0 1.3 1.3 0 1 0-166.4 0Z","p-id":"5209"}),t("path",{d:"M780.8 512m-83.2 0a1.3 1.3 0 1 0 166.4 0 1.3 1.3 0 1 0-166.4 0Z","p-id":"5210"})],-1),Q=b({__name:"icon-more",props:{color:{default:"#606266"},size:{default:"16"}},setup(u){return(p,m)=>(i(),C(J,{size:p.size,color:p.color},{default:s(()=>[O]),_:1},8,["size","color"]))}}),R={class:"plugin-item"},W={class:"plugin-item-header"},X={class:"plugin-item-category"},Y={class:"plugin-item-env"},x={key:0,class:"plugin-item-env-item env-enabled"},ee={key:1,class:"plugin-item-env-item env-disabled"},te={class:"plugin-item-env-item env-version"},ne={key:0,class:"plugin-item-env-item env-installed"},ie={key:0,class:"plugin-item-env-item env-version"},oe={class:"plugin-item-env-item env-version"},se=t("span",{class:"env-version-dot"},null,-1),le={key:2,class:"plugin-item-env-item env-version"},ae={class:"plugin-item-main"},de={class:"plugin-item-main__header"},pe={class:"plugin-item-logo"},ce=["src","alt"],re={class:"plugin-item-platform"},ue={class:"plugin-item-info"},me={class:"plugin-item-info-line plugin-item-title"},_e={class:"plugin-item-info-line"},ve=t("span",{class:"info-divider"},"|",-1),ge={class:"plugin-item-info-line"},fe={class:"plugin-item-main__content"},he={class:"plugin-item-desc"},ye={class:"plugin-item-footer"},we={class:"plugin-item-tags"},ze=b({__name:"plugin-item",props:{detail:{default:()=>({})},editable:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1}},emits:["action"],setup(u,{emit:p}){const m=u,_=T(),v=p,z=f(()=>{const e={};return _.dicts.find(a=>a.code==="plugin_type").values.forEach(a=>{e[a.value+""]=a.label}),e}),B=f(()=>_.payment_types.reduce((e,a)=>(e[a.value]=a.label,e),{}));function h(e){v("action",{type:e,data:m.detail})}return(e,a)=>{const D=d("UploadFilled"),c=d("el-icon"),S=d("el-tooltip"),F=d("User"),N=d("Download"),V=d("Edit"),y=d("el-dropdown-item"),$=d("SwitchButton"),E=d("Delete"),M=d("el-dropdown-menu"),U=d("el-dropdown");return i(),l("div",R,[e.draggable?(i(),C(G,{key:0})):k("",!0),t("div",W,[t("div",X,[n(c,{size:18},{default:s(()=>[n(D)]),_:1}),t("span",null,o(z.value[e.detail.category]),1)]),t("div",Y,[e.editable?(i(),l(g,{key:0},[e.detail.status?(i(),l("div",x,"已启用")):(i(),l("div",ee,"已禁用")),t("div",te,o(e.detail.version),1)],64)):(i(),l(g,{key:1},[e.detail.user_plugin.id?(i(),l("div",ne,"已安装")):k("",!0),e.detail.user_plugin.id?(i(),l(g,{key:1},[e.detail.user_plugin.version===e.detail.version?(i(),l("div",ie,o(e.detail.version),1)):(i(),C(S,{key:1,effect:"dark",content:"有新版本，最新版本: "+e.detail.version,placement:"right"},{default:s(()=>[t("div",oe,[se,r(" "+o(e.detail.user_plugin.version),1)])]),_:1},8,["content"]))],64)):(i(),l("div",le,o(e.detail.version),1))],64))])]),t("div",ae,[t("div",de,[t("div",pe,[t("img",{src:e.detail.logo,alt:e.detail.title},null,8,ce),t("div",re,o(e.detail.platform),1)]),t("div",ue,[t("div",me,[t("p",null,o(e.detail.title),1)]),t("div",_e,[t("span",null,[n(c,null,{default:s(()=>[n(F)]),_:1}),r(" "+o(e.detail.author),1)]),ve,t("span",null,[n(c,null,{default:s(()=>[n(N)]),_:1}),r(o(e.detail.downloadCounts),1)])]),t("div",ge,[t("span",null,"更新于 "+o(L(q)(e.detail.updatedAt)),1)])]),t("div",{class:j({"plugin-item-payment":!0,free:e.detail.payment_type==="free","limited-free":e.detail.payment_type==="limited_free",paid:e.detail.payment_type==="paid"})},o(B.value[e.detail.payment_type]),3)]),t("div",fe,[t("div",he,o(e.detail.description),1)])]),t("div",ye,[t("div",we,[(i(!0),l(g,null,K(e.detail.tags,(w,Z)=>(i(),l("span",{class:"plugin-item-tag",key:"tag-"+Z},o(w),1))),128))]),e.editable?(i(),l("div",{key:0,class:"plugin-item-action",onClick:a[1]||(a[1]=P(()=>{},["stop"]))},[n(U,{trigger:"hover",placement:"bottom-end",onCommand:a[0]||(a[0]=w=>w())},{dropdown:s(()=>[n(M,null,{default:s(()=>[n(y,{command:()=>h("edit")},{default:s(()=>[n(c,null,{default:s(()=>[n(V)]),_:1}),r("更新插件")]),_:1},8,["command"]),n(y,{command:()=>h("switch")},{default:s(()=>[n(c,null,{default:s(()=>[n($)]),_:1}),r(o(e.detail.status?"禁用":"启用")+"插件",1)]),_:1},8,["command"]),n(y,{command:()=>h("delete")},{default:s(()=>[n(c,null,{default:s(()=>[n(E)]),_:1}),r("删除插件")]),_:1},8,["command"])]),_:1})]),default:s(()=>[n(Q,{size:18})]),_:1})])):k("",!0)])])}}});export{ze as _};
