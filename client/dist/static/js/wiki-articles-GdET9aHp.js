import{W as he}from"./Wiki-pPbI1vxV.js";import{f as V,r as T,$ as J,w as N,v as D,L as S,o as g,aC as fe,aD as ge,aq as Q,ar as X,as as ee,at as te,au as oe,av as ne,aw as ie,ax as ae,j as O,g as C,h as f,I as c,F as R,C as se,a5 as ce,Y as re,ay as ke,n as le,B as x,aE as we,a as ye,s as be,x as E,i as z,y as Ee,A as B,aF as U,K as G,D as ue,P as $e,_,a4 as de,aa as K,ac as M,p as W}from"./vendor-DwjfiTos.js";import{d as Ae,u as me,a as Te,g as j,v as ze,o as Y}from"./index-LJ8e8yHT.js";import{I as Ce}from"./Image-hYrnd1mX.js";import{B as Pe}from"./Bucket-W6Z8tqrK.js";const De="juejin",Ve="github",Le="smartblue",Ie="cyanosis",Re="channing-cyan",xe="fancy",Oe="condensed-night-purple",Be="greenwillow",Se="vue-pro",Fe="healer-readable",He="mk-cute",Me="jzman",je="geek-black",qe="awesome-geen",Ne="qklhk-chocolate",Ue="orange",Ge="scrolls-light",Ke="simplicity-green",We="arknights",Ye="vuepress",Ze="Chinese-red",Je="nico",Qe="devui-blue",pe={juejin:De,github:Ve,smartblue:Le,cyanosis:Ie,channingCyan:Re,fancy:xe,condensedNightPurple:Oe,greenwillow:Be,vuePro:Se,healerReadable:Fe,mkCute:He,jzman:Me,geekBlack:je,awesomeGeen:qe,qklhkChocolate:Ne,orange:Ue,scrollsLight:Ge,simplicityGreen:Ke,arknights:We,vuepress:Ye,ChineseRed:Ze,nico:Je,devuiBlue:Qe};function Xe({locale:b,...d}={}){const r={...pe,...b},m=[];for(const l in r)m.push({title:l,name:r[l]});return{viewerEffect:({file:l})=>{l&&d.callback(d.theme)},actions:[{title:"Markdown主题",icon:'<svg t="1706237411212" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4232" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M264.090273 111.378908h146.607307c18.711012 0 34.14437 13.959435 37.6713 32.525996 4.352736 13.905745 12.482957 26.391258 23.038182 34.830836a62.572018 62.572018 0 0 0 40.372425 14.521903 63.719964 63.719964 0 0 0 40.651103-14.521903 69.494211 69.494211 0 0 0 23.885718-37.745444c4.602012-17.978525 20.036647-29.606275 36.570653-29.606274h146.603472c11.931993 0 21.961822 4.635248 28.991395 13.959435l208.417437 222.941897a42.288652 42.288652 0 0 1 0 57.738627L853.822723 559.302927a36.064431 36.064431 0 0 1-53.681187 0l-0.525397-0.884609-1.624765-1.150503v314.419662c0 22.666186-16.784559 40.938728-38.497106 40.938728H264.090273c-21.136017 0-37.920576-18.272543-37.920576-40.938728V557.266537l-2.45185 2.03639a36.371232 36.371232 0 0 1-53.954751 0L26.682719 406.020146c-14.633119-15.940857-14.633119-41.801606 0-57.738627l1.876598-1.76794L236.975476 123.006658a37.470601 37.470601 0 0 1 27.114797-11.632863z m120.868 81.289422h-105.158522L107.42757 377.29848l89.17548 95.195168 40.372426-43.238456a37.786351 37.786351 0 0 1 27.114797-11.8962c21.111728 0 37.946143 18.272543 37.946142 40.644711v372.443358h419.511711V457.998589a41.312003 41.312003 0 0 1 11.377195-28.748511c14.658685-15.96898 39.022502-15.96898 54.20147 0l39.859813 43.24357 89.699598-95.195168-172.625291-184.63015h-105.434643a144.386837 144.386837 0 0 1-40.12315 51.100226c-24.113263 19.746465-54.20147 31.642665-86.723631 31.642665-32.492759 0-62.334248-11.8962-86.448789-31.642665a148.496689 148.496689 0 0 1-40.372425-51.093834z" fill="#3B3F51" p-id="4233"></path></svg>',handler:{type:"dropdown",actions:m.map(({title:l,name:n})=>({title:n===d.theme?`${l}(当前)`:l,handler:{type:"action",click({editor:e,appendBlock:h,codemirror:k}){d.callback(n)}}})),...r}}]}}const et=V({__name:"bytemd-editor",props:{value:{},markdownTheme:{},codeTheme:{}},emits:["update:value","theme-change"],setup(b,{emit:d}){const r=b,m=d,l=Ae(),n=me(),e=new Ce,h=new Pe,k=Te(),w=T([]);function p(t){m("update:value",t)}function u(t,o,i=1e3){n.$notify({title:"错误提示",message:t,type:o,duration:i})}async function a(t){try{const{current_bucket:o}=l.user_habits.data,$=(await h.find({visible:!0,is_only_names:!0})).items.map(y=>y.id),{system:{accept:P,maxcount:s,maxsize:v}}=k.systemConfig;if(!o||!$.includes(o))return u("请先选择存储桶，然后再上传","warning"),[];if(s<t.length)return u("选择文件长度超出数量限制","warning"),[];const A=t.filter(y=>{const L=y.size/1024/1024;return!P.includes(j(y.name))||L>v}).map(y=>{const L=y.size/1024/1024,H=j(y.name);if(L>v)return`${y.name}大小${L.toFixed(2)}MB不符合要求`;if(!P.includes(H))return`${y.name}格式${H}不符合要求`});if(A.length)return u(A.join(";"),"error"),[];const I=t.filter(y=>{const L=y.size/1024/1024;return P.includes(j(y.name))&&L<=v});u("图片上传中，请勿操作...","warning");const F=new FormData;F.append("bucket_id",o.toString()),I.forEach(y=>{F.append("files",y)});const ve=await e.upload(F,({loaded:y,total:L,percent:H})=>{});return u("图片上传成功...","success"),ve.map(y=>({url:y.baseurl+y.url,name:y.name}))}catch(o){u("出错啦: "+o,"error")}}return J(()=>{const t=document.querySelector(".bytemd-toolbar-right");if(t){const o=t.querySelector(".bytemd-toolbar-icon");o&&o.click()}}),N(()=>r.markdownTheme,t=>{w.value=[Q(),X(),ee(),te(),oe(),ne(),ie(),ae(),Xe({locale:{...pe},theme:t,callback(o){m("theme-change",o)}})]},{immediate:!0}),(t,o)=>(g(),D(S(ge),{class:"bytemd-editor",value:t.value,mode:"auto",previewDebounce:300,plugins:w.value,placeholder:"请输入您的markdown内容....",locale:S(fe),uploadImages:a,onChange:p},null,8,["value","plugins","placeholder","locale"]))}}),tt={class:"bytemd-navigator"},ot=c("div",{class:"bytemd-navigator-title"},"本页目录",-1),nt={class:"bytemd-navigator-main"},it={class:"nav-list"},at=["data-level","title","onClick"],st=V({__name:"bytemd-preview",props:{value:{}},emits:["update:value"],setup(b,{emit:d}){const r=b,m=ce();re();const l=T(0),n=[Q(),X(),ee(),te(),oe(),ne(),ie(),ae()],e=T([]);function h(t){we({plugins:[{rehype:o=>o.use(()=>i=>{i&&i.children.length&&k(i)})}]}).processSync(t)}function k(t){const o=[];t.children.filter(i=>i.type==="element").forEach((i,$)=>{if(["h1","h2","h3","h4","h5","h6"].includes(i.tagName)&&i.children.length>0){const P=i.tagName.charAt(1),s=w(i);o.push({level:P,text:s})}}),e.value=o}function w(t){let o="";return t.children.forEach(i=>{i.type==="text"&&(o+=i.value)}),o}function p(){const t=document.querySelector("#bytemd-container").querySelector(".markdown-body");Array.from(t.children).filter(i=>["H1","H2","H3","H4","H5","H6"].includes(i.tagName)).forEach((i,$)=>{i.setAttribute("id",`head-${$}`),e.value[$].offsetTop=i.offsetTop})}function u(t){O(()=>{if(t){const o=document.querySelector(t);if(o){const i=o.offsetTop;document.querySelector(".bytemd-viewer").scrollTo(0,i-20)}}})}function a(t){const o=t.target.scrollTop;for(let i=0;i<e.value.length;i++)e.value[i].offsetTop<=o+20&&(l.value=i)}return N(()=>r.value,t=>{t&&O(()=>{h(t),p(),u(m.hash)})},{immediate:!0}),J(()=>{O(()=>{p()})}),(t,o)=>(g(),C(R,null,[f(S(ke),{class:"bytemd-viewer markdown-body",value:t.value,plugins:n,ref:"viewerRef",onScroll:a},null,8,["value"]),c("div",tt,[ot,c("div",nt,[c("ul",it,[(g(!0),C(R,null,se(e.value,(i,$)=>(g(),C("li",{class:le(["level-"+i.level,$===l.value?"active":""]),"data-level":$,title:i.text,onClick:P=>u(`#head-${$}`)},[c("span",null,x(i.text),1)],10,at))),256))])])])],64))}}),ct={class:"wiki-article-preview"},rt={class:"wiki-article-preview__header"},lt={class:"left-content"},ut={class:"wiki-article-title"},dt={class:"wiki-article-time"},mt={class:"right-content"},pt={class:"wiki-article-preview__content",id:"bytemd-container"},_t=V({__name:"article-preview",props:{article:{default:()=>({title:"",updatedAt:"",markdown:""})},edit:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["update:edit","update","theme-change"],setup(b,{emit:d}){const r=b,m=d;ye({theme:!1});function l(n){switch(n){case"edit":m("update:edit",!0);break;case"cancel":m("update:edit",!1);break;case"preview":m("update:edit",!1),m("update");break}}return N(()=>r.article,n=>{O(()=>{var w;const e=n.theme.markdown,h=document.querySelector("#bytemd-theme"),k=((w=U[e])==null?void 0:w.style)??U.juejin.style;h.innerHTML=k.replaceAll(".markdown-body","#bytemd-container .markdown-body")})},{deep:!0}),(n,e)=>{const h=z("el-input"),k=z("el-button"),w=Ee("loading");return be((g(),C("div",ct,[c("div",rt,[c("div",lt,[n.edit?(g(),D(h,{key:0,modelValue:n.article.title,"onUpdate:modelValue":e[0]||(e[0]=p=>n.article.title=p)},null,8,["modelValue"])):(g(),C(R,{key:1},[c("div",ut,x(n.article.title),1),c("div",dt," 更新于 "+x(S(ze)(n.article.updatedAt)),1)],64))]),c("div",mt,[n.edit?(g(),C(R,{key:0},[f(k,{type:"danger",icon:"Back",onClick:e[1]||(e[1]=p=>l("cancel"))},{default:E(()=>[B("取消")]),_:1}),f(k,{type:"success",icon:"Checked",onClick:e[2]||(e[2]=p=>l("preview"))},{default:E(()=>[B("保存")]),_:1})],64)):(g(),D(k,{key:1,type:"primary",icon:"EditPen",onClick:e[3]||(e[3]=p=>l("edit"))},{default:E(()=>[B("编辑")]),_:1}))])]),c("div",pt,[n.edit?(g(),D(et,{key:0,value:n.article.markdown,"onUpdate:value":e[4]||(e[4]=p=>n.article.markdown=p),"markdown-theme":n.article.theme.markdown,"code-theme":n.article.theme.code,onThemeChange:e[5]||(e[5]=p=>n.$emit("theme-change",p))},null,8,["value","markdown-theme","code-theme"])):(g(),D(st,{key:1,value:n.article.markdown,"onUpdate:value":e[6]||(e[6]=p=>n.article.markdown=p)},null,8,["value"]))])])),[[w,n.loading]])}}}),vt={class:"wiki-icon"},_e=V({__name:"wiki-icon",props:{color:{default:"#606266"},size:{default:"16"}},setup(b){$e(l=>({db19b752:m.value,"89db1466":r.value}));const d=b,r=G(()=>d.color),m=G(()=>parseInt(d.size)+"px");return(l,n)=>(g(),C("span",vt,[ue(l.$slots,"default")]))}}),ht=c("svg",{t:"1693878652630",class:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M426.666667 170.666667H170.666667c-47.146667 0-84.906667 38.186667-84.906667 85.333333L85.333333 768c0 47.146667 38.186667 85.333333 85.333334 85.333333h682.666666c47.146667 0 85.333333-38.186667 85.333334-85.333333V341.333333c0-47.146667-38.186667-85.333333-85.333334-85.333333H512l-85.333333-85.333333z","p-id":"4270"})],-1),ft=V({__name:"icon-folder",props:{color:{default:"#606266"},size:{default:"16"}},setup(b){return(d,r)=>(g(),D(_e,{size:d.size,color:d.color},{default:E(()=>[ht]),_:1},8,["size","color"]))}}),gt=c("svg",{t:"1693879787380",class:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[c("path",{d:"M842.666667 285.866667l-187.733334-187.733334c-14.933333-14.933333-32-21.333333-53.333333-21.333333H234.666667C194.133333 74.666667 160 108.8 160 149.333333v725.333334c0 40.533333 34.133333 74.666667 74.666667 74.666666h554.666666c40.533333 0 74.666667-34.133333 74.666667-74.666666V337.066667c0-19.2-8.533333-38.4-21.333333-51.2z m-44.8 44.8c-2.133333 2.133333-4.266667 0-8.533334 0h-170.666666c-6.4 0-10.666667-4.266667-10.666667-10.666667V149.333333c0-2.133333 0-6.4-2.133333-8.533333 0 0 2.133333 0 2.133333 2.133333l189.866667 187.733334z m-8.533334 554.666666H234.666667c-6.4 0-10.666667-4.266667-10.666667-10.666666V149.333333c0-6.4 4.266667-10.666667 10.666667-10.666666h311.466666c-2.133333 4.266667-2.133333 6.4-2.133333 10.666666v170.666667c0 40.533333 34.133333 74.666667 74.666667 74.666667h170.666666c4.266667 0 6.4 0 10.666667-2.133334V874.666667c0 6.4-4.266667 10.666667-10.666667 10.666666z",fill:"#666666","p-id":"5233"}),c("path",{d:"M640 693.333333H341.333333c-17.066667 0-32 14.933333-32 32s14.933333 32 32 32h298.666667c17.066667 0 32-14.933333 32-32s-14.933333-32-32-32zM640 522.666667H341.333333c-17.066667 0-32 14.933333-32 32s14.933333 32 32 32h298.666667c17.066667 0 32-14.933333 32-32s-14.933333-32-32-32zM341.333333 416h85.333334c17.066667 0 32-14.933333 32-32s-14.933333-32-32-32h-85.333334c-17.066667 0-32 14.933333-32 32s14.933333 32 32 32z",fill:"#666666","p-id":"5234"})],-1),Z=V({__name:"icon-file",props:{color:{default:"#606266"},size:{default:"16"}},setup(b){return(d,r)=>(g(),D(_e,{size:d.size,color:d.color},{default:E(()=>[gt]),_:1},8,["size","color"]))}}),kt=(b,d)=>{const r=b[d];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((m,l)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(l.bind(null,new Error("Unknown variable dynamic import: "+d)))})},wt={class:"action"},yt={class:"popover-action-menu"},bt=["onClick"],Et={class:"menu-item-text"},q=V({__name:"action-popover",props:{placement:{default:"bottom-end"},trigger:{default:"click"},actions:{default:()=>[]},parent:{default:()=>({id:0})}},emits:["action"],setup(b,{emit:d}){const r=b,m=d,l=T({});async function n(){["file","folder","excel","mindmap","diagram","magic","import","canvas","copy","delete","export","docx","pdf","markdown","html"].forEach(async k=>{const{default:w}=await kt(Object.assign({"./icons/icon-canvas.vue":()=>_(()=>import("./icon-canvas-Jf0ZMi43.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])),"./icons/icon-computer.vue":()=>_(()=>import("./icon-computer-9NY3ChRY.js"),__vite__mapDeps([8,1,2,3,4,5,6,7])),"./icons/icon-copy.vue":()=>_(()=>import("./icon-copy-pSQGocNl.js"),__vite__mapDeps([9,1,2,3,4,5,6,7])),"./icons/icon-delete.vue":()=>_(()=>import("./icon-delete-iZuWwFxi.js"),__vite__mapDeps([10,1,2,3,4,5,6,7])),"./icons/icon-diagram.vue":()=>_(()=>import("./icon-diagram-D5g-OhiI.js"),__vite__mapDeps([11,1,2,3,4,5,6,7])),"./icons/icon-docx.vue":()=>_(()=>import("./icon-docx-ZeVVmwA3.js"),__vite__mapDeps([12,1,2,3,4,5,6,7])),"./icons/icon-edit.vue":()=>_(()=>import("./icon-edit-NeXiwJqI.js"),__vite__mapDeps([13,1,2,3,4,5,6,7])),"./icons/icon-excel.vue":()=>_(()=>import("./icon-excel-iaWsrcVn.js"),__vite__mapDeps([14,1,2,3,4,5,6,7])),"./icons/icon-export.vue":()=>_(()=>import("./icon-export-VEX8esnS.js"),__vite__mapDeps([15,1,2,3,4,5,6,7])),"./icons/icon-file.vue":()=>_(()=>import("./icon-file-dXVTqY_P.js"),__vite__mapDeps([16,3,4,1,2,5,6,7])),"./icons/icon-folder.vue":()=>_(()=>import("./icon-folder-qA1rmcua.js"),__vite__mapDeps([17,3,4,1,2,5,6,7])),"./icons/icon-html.vue":()=>_(()=>import("./icon-html-nmtVFfZJ.js"),__vite__mapDeps([18,1,2,3,4,5,6,7])),"./icons/icon-import.vue":()=>_(()=>import("./icon-import-QF-CzWtu.js"),__vite__mapDeps([19,1,2,3,4,5,6,7])),"./icons/icon-info.vue":()=>_(()=>import("./icon-info-K6GLJFNJ.js"),__vite__mapDeps([20,1,2,3,4,5,6,7])),"./icons/icon-list.vue":()=>_(()=>import("./icon-list-YTZNHDB0.js"),__vite__mapDeps([21,1,2,3,4,5,6,7])),"./icons/icon-lock.vue":()=>_(()=>import("./icon-lock-_FKtXbQc.js"),__vite__mapDeps([22,1,2,3,4,5,6,7])),"./icons/icon-magic.vue":()=>_(()=>import("./icon-magic-FgS1jnnn.js"),__vite__mapDeps([23,1,2,3,4,5,6,7])),"./icons/icon-markdown.vue":()=>_(()=>import("./icon-markdown-rweV5kPg.js"),__vite__mapDeps([24,1,2,3,4,5,6,7])),"./icons/icon-mindmap.vue":()=>_(()=>import("./icon-mindmap-_XN25LuV.js"),__vite__mapDeps([25,1,2,3,4,5,6,7])),"./icons/icon-move.vue":()=>_(()=>import("./icon-move-8phduCxo.js"),__vite__mapDeps([26,1,2,3,4,5,6,7])),"./icons/icon-pdf.vue":()=>_(()=>import("./icon-pdf-iorac6tG.js"),__vite__mapDeps([27,1,2,3,4,5,6,7])),"./icons/icon-play.vue":()=>_(()=>import("./icon-play-gzYax6Ob.js"),__vite__mapDeps([28,1,2,3,4,5,6,7])),"./icons/icon-print.vue":()=>_(()=>import("./icon-print-rqfV_5g1.js"),__vite__mapDeps([29,1,2,3,4,5,6,7])),"./icons/icon-save.vue":()=>_(()=>import("./icon-save-zGQcwdbh.js"),__vite__mapDeps([30,1,2,3,4,5,6,7])),"./icons/icon-share.vue":()=>_(()=>import("./icon-share-aH6365KE.js"),__vite__mapDeps([31,1,2,3,4,5,6,7]))}),`./icons/icon-${k}.vue`);l.value[k]=w})}n();function e(h){m("action",{...h,...r.parent})}return(h,k)=>{const w=z("Plus"),p=z("el-icon"),u=z("el-popover");return g(),D(u,{placement:h.placement,trigger:h.trigger,"popper-class":"action-popover"},{reference:E(()=>[ue(h.$slots,"reference"),c("div",wt,[f(p,null,{default:E(()=>[f(w)]),_:1})])]),default:E(()=>[c("div",yt,[(g(!0),C(R,null,se(h.actions,(a,t)=>(g(),C("div",{key:"action-item-"+t,class:"popover-action-menu-item",onClick:o=>e(a)},[(g(),D(de(l.value[a.icon]),{size:a.size,color:a.color},null,8,["size","color"])),c("span",Et,x(a.text),1)],8,bt))),128))])]),_:3},8,["placement","trigger"])}}}),$t={class:"wiki-article-sidebar"},At={class:"wiki-article-sidebar__header"},Tt={class:"wiki-search-entry"},zt=c("span",{class:"wiki-search-entry-content"},"搜索内容",-1),Ct=c("span",{class:"wiki-search-entry-hotkey"},"Ctrl+Shift+F",-1),Pt={class:"wiki-article-sidebar__content"},Dt={class:"wiki-page-title"},Vt=c("span",null,"文档目录",-1),Lt={class:"action"},It={class:"node-item-label"},Rt={class:"node-item-actions"},xt=V({__name:"article-sidebar",props:{treeData:{},article:{default:()=>({id:0})},expandedKeys:{}},emits:["update","action"],setup(b,{emit:d}){const r=re(),m=d,l=T([{icon:"file",size:18,text:"新建文档",func:"createFile"},{icon:"folder",size:18,text:"新建分组",func:"createFolder",color:"#F6C659"}]),n=T([{icon:"file",size:18,text:"新建文档",func:"createFile"},{icon:"folder",size:18,text:"新建分组",func:"createFolder",color:"#F6C659"}]),e=T([{icon:"copy",size:18,text:"复制文档",func:"copyFile"},{icon:"delete",size:18,text:"删除文档",func:"deleteFile"}]);function h(){r.push({name:"Wiki"})}function k(u){m("update",u)}function w(u){let a=null;switch(u){case"folder":a=M(ft);break;case"file":a=M(Z);break;default:a=M(Z);break}return a}function p(u){let a=null;switch(u){case"folder":a="rgb(246, 198, 89)";break;case"file":a="rgb(156, 156, 251)";break;case"excel":a="#01a408";break;case"mindmap":a="rgb(156, 156, 251)";break;case"diagram":a="rgb(156, 156, 251)";break;default:a="rgb(156, 156, 251)";break}return a}return(u,a)=>{const t=z("DArrowLeft"),o=z("el-icon"),i=z("Search"),$=z("Plus"),P=z("MoreFilled"),s=z("el-tree");return g(),C("div",$t,[c("div",At,[c("div",{class:"wiki-go-back",onClick:h},[f(o,null,{default:E(()=>[f(t)]),_:1}),B("返回")]),c("div",Tt,[f(o,{class:"wiki-search-entry-icon",size:16},{default:E(()=>[f(i)]),_:1}),zt,Ct])]),c("div",Pt,[c("div",Dt,[Vt,f(q,{actions:l.value,trigger:"click",onAction:a[0]||(a[0]=v=>u.$emit("action",v))},{reference:E(()=>[c("div",Lt,[f(o,null,{default:E(()=>[f($)]),_:1})])]),_:1},8,["actions"])]),f(s,{class:"wiki-page-tree",data:u.treeData,props:{children:"children",label:"title"},"highlight-current":"","default-expanded-keys":u.expandedKeys,"node-key":"id","current-node-key":u.article.id,"expand-on-click-node":!1,onNodeClick:k},{default:E(({node:v,data:A})=>[c("div",{class:le({"node-item":!0,active:u.article.id===A.id})},[(g(),D(de(w(A.type)),{class:"node-item-icon",size:18,color:p(A.type)},null,8,["color"])),c("span",It,x(v.label),1),c("div",Rt,[f(q,{actions:n.value,trigger:"click",parent:A,onAction:a[2]||(a[2]=I=>u.$emit("action",I))},{reference:E(()=>[c("div",{class:"node-item-action",onClick:a[1]||(a[1]=K(()=>{},["stop"]))},[f(o,{size:"12"},{default:E(()=>[f($)]),_:1})])]),_:2},1032,["actions","parent"]),f(q,{actions:e.value,trigger:"click",parent:A,onAction:a[4]||(a[4]=I=>u.$emit("action",I))},{reference:E(()=>[c("div",{class:"node-item-action",onClick:a[3]||(a[3]=K(()=>{},["stop"]))},[f(o,{size:"12"},{default:E(()=>[f(P)]),_:1})])]),_:2},1032,["actions","parent"])])],2)]),_:1},8,["data","default-expanded-keys","current-node-key"])])])}}}),Ot={class:"wiki-article"},Bt=V({__name:"wiki-articles",setup(b){const d=ce(),r=new he,m=me(),{wid:l}=d.params,n=T([]),e=T({id:0,title:"",theme:{code:"github",markdown:"github"}}),h=T(!1),k=T(!1),w=T([]);function p(){r.getArticlePageTree(+l).then(s=>{n.value=s,s.length&&!e.value.id&&(e.value={...s[0],theme:{code:"github",markdown:"github"}},u(s[0]))})}p();function u(s){k.value=!0,r.getArticleDetail(s.id).then(v=>{v.markdown===" "&&(v.markdown=""),e.value=v,k.value=!1,w.value.push(v.id)})}function a(){r.updateArticle({id:e.value.id,title:e.value.title,markdown:e.value.markdown}).then(s=>{m.$message({message:"文档更新成功",type:"success",duration:1e3}),p()})}function t(s,v="未命名文档",A=0){r.createArticle({title:v,type:s,pid:A,markdown:""},+l).then(I=>{m.$message({message:"文档新建成功",type:"success",duration:1e3}),p()})}function o(s){r.deleteArticle(s).then(v=>{p(),m.$message({message:"文档删除成功",type:"success",duration:1e3}),s===e.value.id&&n.value.length&&u(n.value[0])})}function i(s){r.copyArticle(s).then(v=>{p(),m.$message({message:"文档复制成功",type:"success",duration:1e3})})}function $(s){switch(s.func){case"createFile":W.prompt("请输出文档名称","新建文档",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\S+$/,inputErrorMessage:"请输出文档名称"}).then(({value:v})=>{t("file",v,s.id),s.id&&w.value.push(s.id)}).catch(()=>{});break;case"createFolder":W.prompt("请输出分组名称","新建分组",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\S+$/,inputErrorMessage:"请输出分组名称"}).then(({value:v})=>{t("folder",v,s.id)}).catch(()=>{});break;case"deleteFile":Y("确定删除吗?该操作会将其子节点一并删除").then(()=>{o(s.id)});break;case"copyFile":Y("该操作只会复制当前节点，其子节点不会复制，确定复制吗？").then(()=>{i(s.id)});break}}function P(s){s!==e.value.theme.markdown&&(e.value.theme.code=s,e.value.theme.markdown=s,r.changTheme(e.value.id,s).then(v=>{m.$message({message:"主题切换成功",type:"success",duration:1e3})}))}return(s,v)=>(g(),C("div",Ot,[f(xt,{"tree-data":n.value,article:e.value,expandedKeys:w.value,onUpdate:u,onAction:$},null,8,["tree-data","article","expandedKeys"]),f(_t,{article:e.value,edit:h.value,"onUpdate:edit":v[0]||(v[0]=A=>h.value=A),loadig:k.value,onUpdate:a,onThemeChange:P},null,8,["article","edit","loadig"])]))}}),qt=Object.freeze(Object.defineProperty({__proto__:null,default:Bt},Symbol.toStringTag,{value:"Module"}));export{_e as _,Z as a,ft as b,qt as w};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["static/js/icon-canvas-Jf0ZMi43.js","static/js/vendor-DwjfiTos.js","static/css/vendor-5Uc64JMc.css","static/js/Wiki-pPbI1vxV.js","static/js/index-LJ8e8yHT.js","static/css/index-HEzhKsKQ.css","static/js/Image-hYrnd1mX.js","static/js/Bucket-W6Z8tqrK.js","static/js/icon-computer-9NY3ChRY.js","static/js/icon-copy-pSQGocNl.js","static/js/icon-delete-iZuWwFxi.js","static/js/icon-diagram-D5g-OhiI.js","static/js/icon-docx-ZeVVmwA3.js","static/js/icon-edit-NeXiwJqI.js","static/js/icon-excel-iaWsrcVn.js","static/js/icon-export-VEX8esnS.js","static/js/icon-file-dXVTqY_P.js","static/js/icon-folder-qA1rmcua.js","static/js/icon-html-nmtVFfZJ.js","static/js/icon-import-QF-CzWtu.js","static/js/icon-info-K6GLJFNJ.js","static/js/icon-list-YTZNHDB0.js","static/js/icon-lock-_FKtXbQc.js","static/js/icon-magic-FgS1jnnn.js","static/js/icon-markdown-rweV5kPg.js","static/js/icon-mindmap-_XN25LuV.js","static/js/icon-move-8phduCxo.js","static/js/icon-pdf-iorac6tG.js","static/js/icon-play-gzYax6Ob.js","static/js/icon-print-rqfV_5g1.js","static/js/icon-save-zGQcwdbh.js","static/js/icon-share-aH6365KE.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
