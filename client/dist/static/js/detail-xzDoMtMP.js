import{a as j,s as q,p as ee,u as te,o as Y,P as ne}from"./index-LJ8e8yHT.js";import{f as M,a5 as G,K as P,r as V,i as w,y as Q,s as K,o as n,g as c,I as e,h as v,x as d,A as o,B as a,v as h,F as I,z as $,L as U,a as le,C as se,p as ae,Y as ie}from"./vendor-DwjfiTos.js";import{_ as oe,a as ue}from"./uplog-md.vue_vue_type_style_index_0_lang-P4m2D3oi.js";import{_ as ce}from"./cReward.vue_vue_type_style_index_0_lang-6BJZpQ_o.js";const de={class:"plugin-intro"},re={class:"plugin-intro-left"},pe={class:"plugin-intro-right"},_e={class:"intro-line"},ge=e("div",{class:"intro-line-title"},"插件类型",-1),ve={class:"intro-line-content"},me={class:"intro-line"},fe=e("div",{class:"intro-line-title"},"是否收费",-1),he={class:"intro-line-content"},ye={key:1},$e={class:"intro-line"},ke=e("div",{class:"intro-line-title"},"工作环境",-1),be={class:"intro-line-content"},Ce={class:"intro-line"},we=e("div",{class:"intro-line-title"},"更多信息",-1),Pe={class:"intro-line-content"},De=e("span",null,"插件版本: ",-1),Be=e("span",null,"插件作者: ",-1),Ee=e("span",null,"安装次数: ",-1),Ve=e("span",null,"创建时间: ",-1),Se=e("span",null,"最近更新: ",-1),Ae={key:0},Ie=e("span",null,"安装时间: ",-1),Me=M({__name:"plugin-intro",props:{detail:{default:()=>({})}},setup(B){const p=B,m=j(),y=G(),E=P(()=>{const{name:l,version:s}=p.detail;return`${q}${l}/${s}/files`}),f=V(""),k=V(!1),b=P(()=>m.payment_types.reduce((l,s)=>(l[s.value]=s.label,l),{})),g=P(()=>(m.dicts.find(s=>s.code==="plugin_env").values||[]).reduce((s,r)=>(s[r.value]=r.label,s),{})),t=P(()=>(m.dicts.find(s=>s.code==="plugin_type").values||[]).reduce((s,r)=>(s[r.value]=r.label,s),{}));function S(){k.value=!0,fetch(`${E.value}/README.md`).then(l=>l.text()).then(l=>{f.value=l,k.value=!1})}S();function C(l){return ee(l,"YYYY-MM-DD")}return(l,s)=>{const r=w("el-tag"),F=Q("loading");return K((n(),c("div",de,[e("div",re,[v(oe,{value:f.value},null,8,["value"])]),e("div",pe,[e("div",_e,[ge,e("div",ve,[v(r,null,{default:d(()=>[o(a(t.value[l.detail.category]),1)]),_:1})])]),e("div",me,[fe,e("div",he,[v(r,null,{default:d(()=>[o(a(b.value[l.detail.payment_type]),1)]),_:1}),l.detail.payment?(n(),h(r,{key:0,effect:"dark"},{default:d(()=>[l.detail.payment_type!=="limited_free"?(n(),c(I,{key:0},[o(a(l.detail.price)+"元",1)],64)):(n(),c("s",ye,a(l.detail.price)+"元",1))]),_:1})):$("",!0)])]),e("div",$e,[ke,e("div",be,[v(r,null,{default:d(()=>[o(a(g.value[l.detail.platform]),1)]),_:1})])]),e("div",Ce,[we,e("div",Pe,[e("p",null,[De,o(a(l.detail.version),1)]),e("p",null,[Be,o(a(l.detail.author),1)]),e("p",null,[Ee,o(a(l.detail.downloadCounts),1)]),e("p",null,[Ve,o(a(C(l.detail.createdAt)),1)]),e("p",null,[Se,o(a(C(l.detail.updatedAt)),1)]),l.detail.user_plugin.id&&U(y).name==="PluginDetail"?(n(),c("p",Ae,[Ie,o(a(C(l.detail.user_plugin.createdAt)),1)])):$("",!0)])])])])),[[F,k.value]])}}}),Ne={class:"plugin-uplog-md"},Ye=M({__name:"plugin-uplog",props:{detail:{default:()=>({})}},setup(B){return(p,m)=>(n(),c("div",Ne,[v(ue,{plugin_name:p.detail.name,plugin_version:p.detail.version},null,8,["plugin_name","plugin_version"])]))}}),Fe={class:"plugin-support-md"},Te=e("p",{class:"title"},"支持作者",-1),Ue=e("section",null,[e("p",{class:"title"},"联系作者"),e("p",null,"邮箱: itchenliang@163.com"),e("p",null,"QQ: 1825956830"),e("p",null,"Gitee: https://gitee.com/itchenliang"),e("p",null,"Github: https://github.com/ischenliang")],-1),ze=M({__name:"plugin-support",props:{detail:{default:()=>({})}},setup(B){return(p,m)=>(n(),c("div",Fe,[e("section",null,[Te,e("p",null,"作者: "+a(p.detail.author),1),e("p",null,"版本: "+a(p.detail.version),1),e("p",null,"类别: "+a(p.detail.category),1),v(ce)]),Ue]))}}),Le={class:"plugin-runcode"},Re=M({__name:"plugin-runcode",props:{detail:{default:()=>({})}},setup(B){const p=B,m=P(()=>`${q}${p.detail.name}/${p.detail.user_plugin.version}/files`),y=V(!1);function E(){y.value=!0,fetch(m.value+"/dist/main.js").then(f=>f.text()).then(async f=>{new Function(f)();const b=window.MyPlugin,{name:g,component:t}=b,S="custom-"+g;customElements.get(S)||customElements.define("custom-"+g,window.Vue.defineCustomElement({...t,styles:[await(await fetch(m.value+"/dist/style.css")).text()]}));const C=document.createElement("custom-"+g);C.setAttribute("id",g),document.querySelector(".plugin-runcode").appendChild(C),y.value=!1})}return E(),(f,k)=>{const b=Q("loading");return K((n(),c("div",Le,null,512)),[[b,y.value]])}}}),je={class:"plugin-detail-container"},qe={class:"plugin-detail-toolbar"},Ge=e("span",null,"返回",-1),Qe={class:"plugin-detail-info"},Ke={class:"plugin-detail-info-left"},He=["src"],Je={key:0,class:"plugin-detail-status status-success"},Oe={key:1,class:"plugin-detail-status status-danger"},We={key:1,class:"plugin-detail-status status-info"},Xe={class:"plugin-detail-platform"},Ze={class:"plugin-detail-info-right"},xe={class:"plugin-detail-info-title"},et={class:"plugin-detail-version"},tt={class:"plugin-detail-info-meta"},nt=e("span",{class:"meta-divider"},"|",-1),lt=e("span",{class:"meta-divider"},"|",-1),st={class:"plugin-detail-info-desc"},at={class:"plugin-detail-info-tags"},it={class:"plugin-detail-info-payment"},ot={key:0},ut={key:1},ct={key:0,class:"plugin-detail-info-action"},gt=M({__name:"detail",setup(B){const p={tooler:{active:"禁用后，就不会有在线使用栏目",inactive:"启用后，才能显示在线使用栏目"},themer:{active:"",inactive:""},uploader:{active:"禁用后，创建存储桶时将不会显示该插件",inactive:"启用后，创建存储桶时会显示该插件"},transformer:{active:"",inactive:""},handler:{active:"",inactive:""},commander:{active:"",inactive:""}},m=j(),y=new ne,E=ie(),f=G(),k=te(),{plugin_id:b}=f.query,g=V("intro"),t=V({}),S=P(()=>m.payment_types.reduce((u,i)=>(u[i.value]=i.label,u),{})),C=P(()=>(m.dicts.find(i=>i.code==="plugin_type").values||[]).reduce((i,_)=>(i[_.value]=_.label,i),{})),l=P(()=>(m.dicts.find(i=>i.code==="plugin_env").values||[]).reduce((i,_)=>(i[_.value]=_.label,i),{}));V("");const s=le({install:!1,uninstall:!1,update:!1,toggle:!1});function r(){b&&y.detail(+b).then(u=>{t.value=u})}r();function F(){const{name:u}=f;return u==="SystemPluginDetail"?E.push({name:"SystemPlugin"}):E.push({name:"Plugin"})}function z(){Y(`是否确定${t.value.user_plugin.status?"禁用":"启用"}该插件？`).then(()=>{s.toggle=!0,y.toggleIntsall(t.value.user_plugin.id).then(()=>{const{status:u}=t.value.user_plugin;k.$message({message:u?"禁用成功":"启用成功",type:"success",duration:1e3}),r(),s.toggle=!1})})}function H(){Y("是否确定更新插件").then(()=>{s.update=!0,y.updateInstall(t.value.id).then(()=>{k.$message({message:"更新成功",type:"success",duration:1e3}),r(),s.update=!1})})}function J(){const{payment:u,price:i,id:_,payment_type:A}=t.value;u&&A==="paid"?L(_,"该插件是付费插件，卸载后需要再安装需要填写安装秘钥，是否确定卸载"):L(_)}function L(u,i="该操作将删除关联的存储桶，是否确定卸载该插件？"){Y(i).then(()=>{s.uninstall=!0,y.uninstall(u).then(()=>{k.$message({message:"更新成功",type:"success",duration:1e3}),r(),s.uninstall=!1,t.value.category==="themer"&&window.location.reload()})})}function O(){const{payment:u,price:i,id:_,payment_type:A}=t.value;u&&A==="paid"?ae.prompt("提示","请输入安装秘钥，该秘钥找客服生成",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^.{10}$/,inputErrorMessage:"请填写长度为10的安装秘钥"}).then(({value:D})=>{R(_,D)}).catch(()=>{}):R(_)}function R(u,i=""){Y("是否确定安装该插件？").then(()=>{s.install=!0,y.install(u,i).then(_=>{r(),k.$message({message:"插件安装成功",type:"success",duration:1e3}),s.install=!1})})}return(u,i)=>{const _=w("Back"),A=w("el-icon"),D=w("el-button"),W=w("el-tooltip"),X=w("el-tag"),N=w("el-tab-pane"),Z=w("el-tabs");return n(),c("div",je,[e("div",qe,[e("div",{class:"back-btn",onClick:F},[v(A,null,{default:d(()=>[v(_)]),_:1}),Ge]),t.value.user_plugin.id&&U(f).name==="PluginDetail"?(n(),h(W,{key:0,placement:"bottom",effect:"dark",content:t.value.user_plugin.status?p[t.value.category].active:p[t.value.category].inactive},{default:d(()=>[t.value.user_plugin.status?(n(),h(D,{key:0,type:"danger",size:"small",loading:s.toggle,onClick:z},{default:d(()=>[o(" 禁用插件 ")]),_:1},8,["loading"])):(n(),h(D,{key:1,type:"primary",size:"small",loading:s.toggle,onClick:z},{default:d(()=>[o("启用插件")]),_:1},8,["loading"]))]),_:1},8,["content"])):$("",!0)]),e("div",Qe,[e("div",Ke,[e("img",{src:t.value.logo||"https://downloads-51growth.oss-cn-beijing.aliyuncs.com/assets/img/apps/claude.svg",alt:""},null,8,He),t.value.user_plugin.id?(n(),c(I,{key:0},[t.value.user_plugin.status?(n(),c("span",Je,"已启用")):(n(),c("span",Oe,"已禁用"))],64)):(n(),c("span",We,"未安装")),e("div",Xe,a(l.value[t.value.platform]),1)]),e("div",Ze,[e("div",xe,[e("span",null,a(t.value.title),1),e("span",et,a(t.value.version),1)]),e("div",tt,[e("span",null,"作者: "+a(t.value.author),1),nt,e("span",null,"安装次数: "+a(t.value.downloadCounts),1),lt,e("span",null,"插件类型: "+a(C.value[t.value.category]),1)]),e("div",st,a(t.value.description),1),e("div",at,[e("span",it,[o(a(S.value[t.value.payment_type])+" ",1),t.value.payment?(n(),c("span",ot,[o(" ("),e("span",null,[t.value.payment_type!=="limited_free"?(n(),c(I,{key:0},[o(a(t.value.price)+"元",1)],64)):(n(),c("s",ut,a(t.value.price)+"元",1))]),o(") ")])):$("",!0)]),(n(!0),c(I,null,se(t.value.tags,(T,x)=>(n(),h(X,{key:x},{default:d(()=>[o(a(T),1)]),_:2},1024))),128))])]),U(f).name==="PluginDetail"?(n(),c("div",ct,[t.value.user_plugin.id?(n(),c(I,{key:0},[v(D,{type:"warning",onClick:J,loading:s.uninstall},{default:d(()=>[o("卸载")]),_:1},8,["loading"]),t.value.version!==t.value.user_plugin.version?(n(),h(D,{key:0,type:"primary",loading:s.update,onClick:H},{default:d(()=>[o("更新")]),_:1},8,["loading"])):$("",!0)],64)):(n(),h(D,{key:1,type:"success",onClick:O,loading:s.install},{default:d(()=>[o("安装")]),_:1},8,["loading"]))])):$("",!0)]),v(Z,{modelValue:g.value,"onUpdate:modelValue":i[0]||(i[0]=T=>g.value=T),class:"plugin-detail-tabs"},{default:d(()=>[v(N,{label:"插件介绍",name:"intro"},{default:d(()=>[g.value==="intro"?(n(),h(Me,{key:0,detail:t.value},null,8,["detail"])):$("",!0)]),_:1}),v(N,{label:"支持",name:"support"},{default:d(()=>[g.value==="support"?(n(),h(ze,{key:0,detail:t.value},null,8,["detail"])):$("",!0)]),_:1}),v(N,{label:"更新日志",name:"uplog"},{default:d(()=>[g.value==="uplog"?(n(),h(Ye,{key:0,detail:t.value},null,8,["detail"])):$("",!0)]),_:1}),t.value.user_plugin.status&&t.value.category==="tooler"?(n(),h(N,{key:0,label:"在线使用",name:"onlineuse"},{default:d(()=>[g.value==="onlineuse"?(n(),h(Re,{key:0,detail:t.value},null,8,["detail"])):$("",!0)]),_:1})):$("",!0)]),_:1},8,["modelValue"])])}}});export{gt as default};
