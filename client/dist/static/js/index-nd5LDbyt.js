import{i as q,r as U,a as Q,K as $,o as d,p as b,v as k,x as l,k as e,j as h,C as B,F,I as N,ar as j,au as D,aG as J,as as M,aq as K,av as L,at as A,aC as H,$ as P,aK as W,w as T,g as Y,n as Z,t as C,Y as X,a5 as ee,a4 as le,z as ae,A as E}from"./vendor-GbG8F5IP.js";import{_ as O,v as G,u as te,a as oe,S as ue}from"./index-TExW8zL1.js";import{_ as se}from"./index.vue_vue_type_style_index_0_lang-2HMshNUa.js";/* empty css                 */const R={id:"",website:{logo:"",ico:"",name:"",desc:"",keys:[],author:"",version:"",reward_alipay:"",reward_weixin:""},contact:{weixin:"",qq:"",github:"",gitee:"",email:"",qq_group:"",about:""},system:{accept:[],maxsize:0,maxcount:0,storage_size:0,storage_count:0,icon_url:"",icon_prefix:"",icon_font:"",copyright_company:"",copyright_time:"",copyright_miitbeian:"",copyright_miiturl:"https://beian.miit.gov.cn/",map_type:"baidu",map_key:"",mail_user:"",mail_pass:""},uplog:"",plugin:{default:""},bucket_service:[]},ne=q({__name:"websiteConfig",props:{data:{default:()=>({...R})}},emits:["update:data"],setup(z,{emit:y}){const V=z,x=y,p=U(),g=[],_=Q({"website.logo":[{required:!0,message:"请输入网站logo",trigger:["blur"]}],"website.name":[{required:!0,message:"请输入网站名称",trigger:["blur"]}]}),a=$({get:()=>V.data,set:i=>{x("update:data",i)}});return(i,t)=>{const m=d("el-input"),r=d("el-form-item"),o=d("el-col"),n=d("el-row"),f=d("c-card"),v=d("el-option"),w=d("el-select"),c=d("el-form");return b(),k(c,{class:"website-form",model:a.value,ref_key:"formRef",ref:p,rules:_,"label-position":"top","label-width":"97px"},{default:l(()=>[e(f,{title:"网站logo&打赏","header-padding":"18px 15px"},{default:l(()=>[e(n,null,{default:l(()=>[e(o,{xl:12,lg:12},{default:l(()=>[e(r,{prop:"website.logo",label:"网站logo"},{default:l(()=>[e(m,{modelValue:a.value.website.logo,"onUpdate:modelValue":t[0]||(t[0]=s=>a.value.website.logo=s),placeholder:"请输入网站lodo图片地址",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{xl:12,lg:12},{default:l(()=>[e(r,{prop:"website.ico",label:"网站ico"},{default:l(()=>[e(m,{modelValue:a.value.website.ico,"onUpdate:modelValue":t[1]||(t[1]=s=>a.value.website.ico=s),placeholder:"请输入网站ico图片地址",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{xl:12,lg:12},{default:l(()=>[e(r,{prop:"website.reward_alipay",label:"阿里支付"},{default:l(()=>[e(m,{modelValue:a.value.website.reward_alipay,"onUpdate:modelValue":t[2]||(t[2]=s=>a.value.website.reward_alipay=s),placeholder:"请输入阿里支付二维码图片地址",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{xl:12,lg:12},{default:l(()=>[e(r,{prop:"website.reward_weixin",label:"微信支付"},{default:l(()=>[e(m,{modelValue:a.value.website.reward_weixin,"onUpdate:modelValue":t[3]||(t[3]=s=>a.value.website.reward_weixin=s),placeholder:"请输入网站微信支付二维码图片地址",size:"large"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(f,{title:"网站信息"},{default:l(()=>[e(n,null,{default:l(()=>[e(o,{xl:8,lg:12,md:12},{default:l(()=>[e(r,{prop:"website.name",label:"网站名称"},{default:l(()=>[e(m,{modelValue:a.value.website.name,"onUpdate:modelValue":t[4]||(t[4]=s=>a.value.website.name=s),placeholder:"请输入网站名称",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{xl:8,lg:12,md:12},{default:l(()=>[e(r,{prop:"desc",label:"网站作者"},{default:l(()=>[e(m,{modelValue:a.value.website.author,"onUpdate:modelValue":t[5]||(t[5]=s=>a.value.website.author=s),placeholder:"请输入网站作者",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{xl:8,lg:12,md:12},{default:l(()=>[e(r,{prop:"version",label:"版本号"},{default:l(()=>[e(m,{modelValue:a.value.website.version,"onUpdate:modelValue":t[6]||(t[6]=s=>a.value.website.version=s),placeholder:"请输入版本号",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{xl:24},{default:l(()=>[e(r,{prop:"keys",label:"网站关键字"},{default:l(()=>[e(w,{modelValue:a.value.website.keys,"onUpdate:modelValue":t[7]||(t[7]=s=>a.value.website.keys=s),multiple:"",filterable:"","allow-create":"","default-first-option":"",size:"large","reserve-keyword":!1,placeholder:"网站关键字"},{default:l(()=>[(b(),h(F,null,B(g,s=>e(v,{key:s.value,label:s.label,value:s.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(o,{xl:24},{default:l(()=>[e(r,{prop:"desc",label:"网站描述"},{default:l(()=>[e(m,{modelValue:a.value.website.desc,"onUpdate:modelValue":t[8]||(t[8]=s=>a.value.website.desc=s),placeholder:"请输入网站描述",size:"large",type:"textarea",rows:7},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(f,{title:"关注我们"},{default:l(()=>[e(n,null,{default:l(()=>[e(o,{xl:8,lg:8,md:12},{default:l(()=>[e(r,{prop:"name",label:"Github"},{default:l(()=>[e(m,{modelValue:a.value.contact.github,"onUpdate:modelValue":t[9]||(t[9]=s=>a.value.contact.github=s),placeholder:"请输入作者Github",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{xl:8,lg:8,md:12},{default:l(()=>[e(r,{prop:"title",label:"Gitee"},{default:l(()=>[e(m,{modelValue:a.value.contact.gitee,"onUpdate:modelValue":t[10]||(t[10]=s=>a.value.contact.gitee=s),placeholder:"请输入作者Gitee",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{xl:8,lg:8,md:12},{default:l(()=>[e(r,{prop:"contact.weixin",label:"微信"},{default:l(()=>[e(m,{modelValue:a.value.contact.weixin,"onUpdate:modelValue":t[11]||(t[11]=s=>a.value.contact.weixin=s),placeholder:"请输入作者微信号",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{xl:8,lg:8,md:12},{default:l(()=>[e(r,{prop:"contact.qq",label:"QQ"},{default:l(()=>[e(m,{modelValue:a.value.contact.qq,"onUpdate:modelValue":t[12]||(t[12]=s=>a.value.contact.qq=s),placeholder:"请输入作者QQ号",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{xl:8,lg:8,md:12},{default:l(()=>[e(r,{prop:"contact.qq_group",label:"QQ群"},{default:l(()=>[e(m,{modelValue:a.value.contact.qq_group,"onUpdate:modelValue":t[13]||(t[13]=s=>a.value.contact.qq_group=s),placeholder:"请输入社区QQ交流区",size:"large"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),de=O(ne,[["__scopeId","data-v-192009e4"]]),me=N("p",{style:{"line-height":"22px",color:"#666","margin-bottom":"5px"}},"对右上角的菜单和链接配置",-1),re=q({__name:"systemConfig",props:{data:{default:()=>({...R})}},emits:["update:data"],setup(z,{emit:y}){const V=z,x=y,p=U(),g=Q({logo:[{required:!0,message:"请输入网站logo",trigger:["blur"]}]}),_=$(()=>{let i=[];for(let t in G)i.push({label:G[t],value:t});return i}),a=$({get:()=>V.data,set:i=>{x("update:data",i)}});return(i,t)=>{const m=d("el-option"),r=d("el-select"),o=d("el-form-item"),n=d("el-col"),f=d("el-input-number"),v=d("el-row"),w=d("c-card"),c=d("el-input"),s=d("el-switch"),S=d("el-form");return b(),k(S,{class:"website-form",model:a.value,ref_key:"formRef",ref:p,rules:g,"label-position":"top","label-width":"97px"},{default:l(()=>[e(w,{title:"上传配置"},{default:l(()=>[e(v,null,{default:l(()=>[e(n,{xl:6,lg:8,md:12},{default:l(()=>[e(o,{prop:"system.accept",label:"可选文件类型"},{default:l(()=>[e(r,{modelValue:a.value.system.accept,"onUpdate:modelValue":t[0]||(t[0]=u=>a.value.system.accept=u),multiple:"",filterable:"",size:"large","collapse-tags":"",placeholder:"请选择可选文件类型"},{default:l(()=>[(b(!0),h(F,null,B(_.value,u=>(b(),k(m,{key:u.label+u.value,label:u.label,value:u.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{xl:6,lg:8,md:12},{default:l(()=>[e(o,{prop:"system.maxsize",label:"单文件最大容量(MB)"},{default:l(()=>[e(f,{modelValue:a.value.system.maxsize,"onUpdate:modelValue":t[1]||(t[1]=u=>a.value.system.maxsize=u),min:1,size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{xl:6,lg:8,md:12},{default:l(()=>[e(o,{prop:"system.maxcount",label:"单次最多上传文件数量"},{default:l(()=>[e(f,{modelValue:a.value.system.maxcount,"onUpdate:modelValue":t[2]||(t[2]=u=>a.value.system.maxcount=u),min:1,size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{xl:6,lg:8,md:12},{default:l(()=>[e(o,{prop:"system.storage_size",label:"存储桶容量限制(MB)"},{default:l(()=>[e(f,{modelValue:a.value.system.storage_size,"onUpdate:modelValue":t[3]||(t[3]=u=>a.value.system.storage_size=u),min:1,size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{xl:6,lg:8,md:12},{default:l(()=>[e(o,{prop:"system.storage_count",label:"存储桶数量限制"},{default:l(()=>[e(f,{modelValue:a.value.system.storage_count,"onUpdate:modelValue":t[4]||(t[4]=u=>a.value.system.storage_count=u),min:1,size:"large"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(w,{title:"图标配置(存储桶类型等图标)"},{default:l(()=>[e(v,null,{default:l(()=>[e(n,{xl:8,lg:8,md:12},{default:l(()=>[e(o,{prop:"name",label:"图标url"},{default:l(()=>[e(c,{modelValue:a.value.system.icon_url,"onUpdate:modelValue":t[5]||(t[5]=u=>a.value.system.icon_url=u),placeholder:"请输入网站名称",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{xl:8,lg:8,md:12},{default:l(()=>[e(o,{prop:"name",label:"图标前缀(FontClass)"},{default:l(()=>[e(c,{modelValue:a.value.system.icon_prefix,"onUpdate:modelValue":t[6]||(t[6]=u=>a.value.system.icon_prefix=u),placeholder:"请输入网站名称",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{xl:8,lg:8,md:12},{default:l(()=>[e(o,{prop:"name",label:"图标字体Font Family"},{default:l(()=>[e(c,{modelValue:a.value.system.icon_font,"onUpdate:modelValue":t[7]||(t[7]=u=>a.value.system.icon_font=u),placeholder:"请输入网站名称",size:"large"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(w,{title:"ip定位服务和邮件服务配置"},{default:l(()=>[e(v,null,{default:l(()=>[e(n,{xl:12,lg:8,md:12},{default:l(()=>[e(o,{prop:"map_type",label:"启用服务类型"},{default:l(()=>[e(r,{modelValue:a.value.system.map_type,"onUpdate:modelValue":t[8]||(t[8]=u=>a.value.system.map_type=u),placeholder:"请选择服务类型",size:"large"},{default:l(()=>[e(m,{label:"高德地图",value:"gaode"}),e(m,{label:"百度地图",value:"baidu"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{xl:12,lg:8,md:12},{default:l(()=>[e(o,{prop:"map_key",label:"开发者密钥"},{default:l(()=>[e(c,{modelValue:a.value.system.map_key,"onUpdate:modelValue":t[9]||(t[9]=u=>a.value.system.map_key=u),placeholder:"请输入开放者秘钥",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{xl:12,lg:8,md:12},{default:l(()=>[e(o,{prop:"mail_user",label:"收件人邮箱"},{default:l(()=>[e(c,{modelValue:a.value.system.mail_user,"onUpdate:modelValue":t[10]||(t[10]=u=>a.value.system.mail_user=u),placeholder:"请输入收件人邮箱",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{xl:12,lg:8,md:12},{default:l(()=>[e(o,{prop:"mail_pass",label:"邮箱授权码"},{default:l(()=>[e(c,{modelValue:a.value.system.mail_pass,"onUpdate:modelValue":t[11]||(t[11]=u=>a.value.system.mail_pass=u),placeholder:"请输入邮箱授权码",size:"large"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(w,{title:"其他配置"},{default:l(()=>[e(v,null,{default:l(()=>[e(n,{xl:12,lg:8,md:12},{default:l(()=>[e(o,{prop:"enable_register",label:"是否启用注册"},{default:l(()=>[e(s,{modelValue:a.value.system.enable_register,"onUpdate:modelValue":t[12]||(t[12]=u=>a.value.system.enable_register=u)},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{xl:12,lg:8,md:12},{default:l(()=>[e(o,{prop:"enable_chatgpt",label:"是否启用ChatGPT"},{default:l(()=>[e(s,{modelValue:a.value.system.enable_chatgpt,"onUpdate:modelValue":t[13]||(t[13]=u=>a.value.system.enable_chatgpt=u)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(w,{title:"菜单配置"},{default:l(()=>[me,e(se,{modelValue:a.value.bucket_service_str,"onUpdate:modelValue":t[14]||(t[14]=u=>a.value.bucket_service_str=u)},null,8,["modelValue"])]),_:1}),e(w,{title:"版权信息"},{default:l(()=>[e(v,null,{default:l(()=>[e(n,{xl:6,lg:8,md:12},{default:l(()=>[e(o,{prop:"copyright_company",label:"版权归属公司"},{default:l(()=>[e(c,{modelValue:a.value.system.copyright_company,"onUpdate:modelValue":t[15]||(t[15]=u=>a.value.system.copyright_company=u),placeholder:"请输入版权归属公司",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{xl:6,lg:8,md:12},{default:l(()=>[e(o,{prop:"copyright_time",label:"运营时间段"},{default:l(()=>[e(c,{modelValue:a.value.system.copyright_time,"onUpdate:modelValue":t[16]||(t[16]=u=>a.value.system.copyright_time=u),placeholder:"请输入运营时间段",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{xl:6,lg:8,md:12},{default:l(()=>[e(o,{prop:"copyright_miitbeian",label:"工信备案号"},{default:l(()=>[e(c,{modelValue:a.value.system.copyright_miitbeian,"onUpdate:modelValue":t[17]||(t[17]=u=>a.value.system.copyright_miitbeian=u),placeholder:"请输入工信部备案号",size:"large"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{xl:6,lg:8,md:12},{default:l(()=>[e(o,{prop:"copyright_miiturl",label:"备案地址"},{default:l(()=>[e(c,{modelValue:a.value.system.copyright_miiturl,"onUpdate:modelValue":t[18]||(t[18]=u=>a.value.system.copyright_miiturl=u),placeholder:"请输入工信部备案地址",size:"large"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),ie={class:"bytemd-container"},pe=q({__name:"bytemd",props:{value:{default:""},placeholder:{default:""},plugins:{default:[j(),D(),J(),M(),K(),L(),A()]},previewDebounce:{default:200},locale:{default:H},uploadImages:{type:Function,default:void 0},maxLength:{default:void 0},mode:{default:"auto"}},emits:["change","update:value"],setup(z,{emit:y}){const V=z,x=y,p=U(null),g=Y();return P(()=>{p.value=new W({target:g==null?void 0:g.subTree.el,props:V}),p.value.$on("change",_=>{x("change",_.detail.value),x("update:value",_.detail.value)})}),T(V,_=>{p.value&&p.value.$set(Object.fromEntries(Object.entries(_).filter(a=>a))),Z(()=>{window.dispatchEvent(new Event("resize"))})},{immediate:!0}),(_,a)=>(b(),h("div",ie))}}),I=O(pe,[["__scopeId","data-v-18dd7832"]]),_e=q({__name:"uplogConfig",props:{data:{default:()=>({...R})}},emits:["update:data"],setup(z,{emit:y}){const V=z,x=y,p=$({get:()=>V.data,set:i=>{x("update:data",i)}}),g=U(),_=Q({logo:[{required:!0,message:"请输入网站logo",trigger:["blur"]}]}),a=i=>{p.value.contact.about=i};return(i,t)=>{const m=d("el-form-item"),r=d("el-col"),o=d("el-row"),n=d("c-card"),f=d("el-form");return b(),k(f,{class:"website-form",model:p.value,ref_key:"formRef",ref:g,rules:_,"label-position":"top","label-width":"97px"},{default:l(()=>[e(n,{title:"更新日志"},{default:l(()=>[e(o,null,{default:l(()=>[e(r,{xl:24,lg:24,md:24},{default:l(()=>[e(m,{prop:"name",label:"日志内容"},{default:l(()=>[e(I,{value:p.value.uplog,"onUpdate:value":t[0]||(t[0]=v=>p.value.uplog=v),style:{height:"500px"}},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1}),e(n,{title:"关于系统"},{default:l(()=>[e(o,null,{default:l(()=>[e(r,{xl:24},{default:l(()=>[e(m,{prop:"desc",label:"关于系统内容"},{default:l(()=>[e(I,{value:p.value.contact.about,mode:"split",style:{height:"500px"},onChange:a},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])}}}),ce={class:"system-setting"},fe={class:"page-action"},Ve=q({__name:"index",setup(z){const y=new ue,V=te(),x=X(),p=ee(),g=oe(),_=U("website"),a=U([{label:"网站配置",name:"website",component:C(de)},{label:"系统配置",name:"system",component:C(re)},{label:"更新日志",name:"uplog",component:C(_e)}]),i=U({...R});(()=>{y.detail().then(o=>{o.bucket_service_str=JSON.stringify(o.bucket_service,null,"	"),i.value=o})})();const m=()=>{y.save({...i.value,bucket_service:JSON.parse(i.value.bucket_service_str)}).then(o=>{V.$message({message:"保存成功",duration:1e3,type:"success"}),g.updateSystemConfig({...C(i.value),bucket_service:JSON.parse(i.value.bucket_service_str)})})},r=o=>{x.push({name:p.name,query:{type:o}})};return T(()=>p,o=>{const{type:n="website"}=o.query;_.value=n},{immediate:!0,deep:!0}),(o,n)=>{const f=d("el-tab-pane"),v=d("c-tabs"),w=d("c-card"),c=d("el-button");return b(),h(F,null,[N("div",ce,[e(w,{title:"系统设置"},{default:l(()=>[e(v,{modelValue:_.value,"onUpdate:modelValue":n[1]||(n[1]=s=>_.value=s),onTabChange:r},{default:l(()=>[(b(!0),h(F,null,B(a.value,(s,S)=>(b(),k(f,{key:S,label:s.label,name:s.name},{default:l(()=>[_.value===s.name?(b(),k(le(s.component),{key:0,data:i.value,"onUpdate:data":n[0]||(n[0]=u=>i.value=u)},null,40,["data"])):ae("",!0)]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])]),_:1})]),N("div",fe,[e(c,{type:"default"},{default:l(()=>[E("取消")]),_:1}),e(c,{type:"primary",onClick:m},{default:l(()=>[E("保存")]),_:1})])],64)}}});export{Ve as default};
