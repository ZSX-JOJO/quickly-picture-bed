import{W as be}from"./Wiki-uu1Xzfzz.js";import{f as I,r as T,$ as te,w as j,v as C,L as M,o as v,aC as Ee,aD as De,aq as oe,ar as ne,as as ie,at as ae,au as se,av as re,aw as ce,ax as le,j as F,g as P,h as y,I as l,F as x,C as de,a5 as ue,Y as me,ay as Ae,n as pe,B,aE as $e,a as Te,s as _e,x as E,i as z,y as ve,A as H,aF as Y,K as Z,D as fe,P as Ce,_ as p,a4 as he,aa as J,z as ze,ac as K,p as Q}from"./vendor-DwjfiTos.js";import{d as Pe,u as ge,a as Le,g as G,v as Ve,o as X}from"./index-i1BX2IYC.js";import{I as Ie}from"./Image-aUM8NL0j.js";import{B as Re}from"./Bucket-LrxDhdm1.js";const Oe="juejin",Se="github",xe="smartblue",Be="cyanosis",Ne="channing-cyan",Fe="fancy",He="condensed-night-purple",Me="greenwillow",je="vue-pro",qe="healer-readable",Ue="mk-cute",Ke="jzman",Ge="geek-black",We="awesome-geen",Ye="qklhk-chocolate",Ze="orange",Je="scrolls-light",Qe="simplicity-green",Xe="arknights",et="vuepress",tt="Chinese-red",ot="nico",nt="devui-blue",ke={juejin:Oe,github:Se,smartblue:xe,cyanosis:Be,channingCyan:Ne,fancy:Fe,condensedNightPurple:He,greenwillow:Me,vuePro:je,healerReadable:qe,mkCute:Ue,jzman:Ke,geekBlack:Ge,awesomeGeen:We,qklhkChocolate:Ye,orange:Ze,scrollsLight:Je,simplicityGreen:Qe,arknights:Xe,vuepress:et,ChineseRed:tt,nico:ot,devuiBlue:nt};function it({locale:b,...u}={}){const r={...ke,...b},m=[];for(const c in r)m.push({title:c,name:r[c]});return{viewerEffect:({file:c})=>{c&&u.callback(u.theme)},actions:[{title:"Markdown主题",icon:'<svg t="1706237411212" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4232" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><path d="M264.090273 111.378908h146.607307c18.711012 0 34.14437 13.959435 37.6713 32.525996 4.352736 13.905745 12.482957 26.391258 23.038182 34.830836a62.572018 62.572018 0 0 0 40.372425 14.521903 63.719964 63.719964 0 0 0 40.651103-14.521903 69.494211 69.494211 0 0 0 23.885718-37.745444c4.602012-17.978525 20.036647-29.606275 36.570653-29.606274h146.603472c11.931993 0 21.961822 4.635248 28.991395 13.959435l208.417437 222.941897a42.288652 42.288652 0 0 1 0 57.738627L853.822723 559.302927a36.064431 36.064431 0 0 1-53.681187 0l-0.525397-0.884609-1.624765-1.150503v314.419662c0 22.666186-16.784559 40.938728-38.497106 40.938728H264.090273c-21.136017 0-37.920576-18.272543-37.920576-40.938728V557.266537l-2.45185 2.03639a36.371232 36.371232 0 0 1-53.954751 0L26.682719 406.020146c-14.633119-15.940857-14.633119-41.801606 0-57.738627l1.876598-1.76794L236.975476 123.006658a37.470601 37.470601 0 0 1 27.114797-11.632863z m120.868 81.289422h-105.158522L107.42757 377.29848l89.17548 95.195168 40.372426-43.238456a37.786351 37.786351 0 0 1 27.114797-11.8962c21.111728 0 37.946143 18.272543 37.946142 40.644711v372.443358h419.511711V457.998589a41.312003 41.312003 0 0 1 11.377195-28.748511c14.658685-15.96898 39.022502-15.96898 54.20147 0l39.859813 43.24357 89.699598-95.195168-172.625291-184.63015h-105.434643a144.386837 144.386837 0 0 1-40.12315 51.100226c-24.113263 19.746465-54.20147 31.642665-86.723631 31.642665-32.492759 0-62.334248-11.8962-86.448789-31.642665a148.496689 148.496689 0 0 1-40.372425-51.093834z" fill="#3B3F51" p-id="4233"></path></svg>',handler:{type:"dropdown",actions:m.map(({title:c,name:i})=>({title:i===u.theme?`${c}(当前)`:c,handler:{type:"action",click({editor:t,appendBlock:h,codemirror:g}){u.callback(i)}}})),...r}}]}}const at=I({__name:"bytemd-editor",props:{value:{},markdownTheme:{},codeTheme:{}},emits:["update:value","theme-change"],setup(b,{emit:u}){const r=b,m=u,c=Pe(),i=ge(),t=new Ie,h=new Re,g=Le(),w=T([]);function _(o){m("update:value",o)}function k(o,a,n=1e3){i.$notify({title:"错误提示",message:o,type:a,duration:n})}async function A(o){try{const{current_bucket:a}=c.user_habits.data,$=(await h.find({visible:!0,is_only_names:!0})).items.map(f=>f.id),{system:{accept:L,maxcount:R,maxsize:s}}=g.systemConfig;if(!a||!$.includes(a))return k("请先选择存储桶，然后再上传","warning"),[];if(R<o.length)return k("选择文件长度超出数量限制","warning"),[];const e=o.filter(f=>{const V=f.size/1024/1024;return!L.includes(G(f.name))||V>s}).map(f=>{const V=f.size/1024/1024,S=G(f.name);if(V>s)return`${f.name}大小${V.toFixed(2)}MB不符合要求`;if(!L.includes(S))return`${f.name}格式${S}不符合要求`});if(e.length)return k(e.join(";"),"error"),[];const d=o.filter(f=>{const V=f.size/1024/1024;return L.includes(G(f.name))&&V<=s});k("图片上传中，请勿操作...","warning");const D=new FormData;D.append("bucket_id",a.toString()),d.forEach(f=>{D.append("files",f)});const N=await t.upload(D,({loaded:f,total:V,percent:S})=>{});return k("图片上传成功...","success"),N.map(f=>({url:f.baseurl+f.url,name:f.name}))}catch(a){k("出错啦: "+a,"error")}}return te(()=>{const o=document.querySelector(".bytemd-toolbar-right");if(o){const a=o.querySelector(".bytemd-toolbar-icon");a&&a.click()}}),j(()=>r.markdownTheme,o=>{w.value=[oe(),ne(),ie(),ae(),se(),re(),ce(),le(),it({locale:{...ke},theme:o,callback(a){m("theme-change",a)}})]},{immediate:!0}),(o,a)=>(v(),C(M(De),{class:"bytemd-editor",value:o.value,mode:"auto",previewDebounce:300,plugins:w.value,placeholder:"请输入您的markdown内容....",locale:M(Ee),uploadImages:A,onChange:_},null,8,["value","plugins","placeholder","locale"]))}}),st={class:"bytemd-navigator"},rt=l("div",{class:"bytemd-navigator-title"},"本页目录",-1),ct={class:"bytemd-navigator-main"},lt={class:"nav-list"},dt=["data-level","title","onClick"],ut=I({__name:"bytemd-preview",props:{value:{}},emits:["update:value"],setup(b,{emit:u}){const r=b,m=ue();me();const c=T(0),i=[oe(),ne(),ie(),ae(),se(),re(),ce(),le()],t=T([]);function h(o){$e({plugins:[{rehype:a=>a.use(()=>n=>{n&&n.children.length&&g(n)})}]}).processSync(o)}function g(o){const a=[];o.children.filter(n=>n.type==="element").forEach((n,$)=>{if(["h1","h2","h3","h4","h5","h6"].includes(n.tagName)&&n.children.length>0){const L=n.tagName.charAt(1),R=w(n);a.push({level:L,text:R})}}),t.value=a}function w(o){let a="";return o.children.forEach(n=>{n.type==="text"&&(a+=n.value)}),a}function _(){const o=document.querySelector("#bytemd-container").querySelector(".markdown-body");Array.from(o.children).filter(n=>["H1","H2","H3","H4","H5","H6"].includes(n.tagName)).forEach((n,$)=>{n.setAttribute("id",`head-${$}`),t.value[$]&&(t.value[$].offsetTop=n.offsetTop)})}function k(o){F(()=>{if(o){const a=document.querySelector(o);if(a){const n=a.offsetTop;document.querySelector(".bytemd-viewer").scrollTo(0,n-20)}}})}function A(o){const a=o.target.scrollTop;for(let n=0;n<t.value.length;n++)t.value[n].offsetTop<=a+20&&(c.value=n)}return j(()=>r.value,o=>{o&&F(()=>{h(o),_(),k(m.hash)})},{immediate:!0}),te(()=>{F(()=>{_()})}),(o,a)=>(v(),P(x,null,[y(M(Ae),{class:"bytemd-viewer markdown-body",value:o.value,plugins:i,ref:"viewerRef",onScroll:A},null,8,["value"]),l("div",st,[rt,l("div",ct,[l("ul",lt,[(v(!0),P(x,null,de(t.value,(n,$)=>(v(),P("li",{class:pe(["level-"+n.level,$===c.value?"active":""]),"data-level":$,title:n.text,onClick:L=>k(`#head-${$}`)},[l("span",null,B(n.text),1)],10,dt))),256))])])])],64))}}),mt={class:"wiki-article-preview"},pt={class:"wiki-article-preview__header"},_t={class:"left-content"},vt={class:"wiki-article-title"},ft={class:"wiki-article-time"},ht={class:"right-content"},gt={class:"wiki-article-preview__content",id:"bytemd-container"},kt=I({__name:"article-preview",props:{article:{default:()=>({title:"",updatedAt:"",markdown:""})},edit:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["update:edit","update","theme-change"],setup(b,{emit:u}){const r=b,m=u;Te({theme:!1});function c(i){switch(i){case"edit":m("update:edit",!0);break;case"cancel":m("update:edit",!1);break;case"preview":m("update:edit",!1),m("update");break}}return j(()=>r.article,i=>{F(()=>{var w;const t=i.theme.markdown,h=document.querySelector("#bytemd-theme"),g=((w=Y[t])==null?void 0:w.style)??Y.juejin.style;h.innerHTML=g.replaceAll(".markdown-body","#bytemd-container .markdown-body")})},{deep:!0}),(i,t)=>{const h=z("el-input"),g=z("el-button"),w=ve("loading");return _e((v(),P("div",mt,[l("div",pt,[l("div",_t,[i.edit?(v(),C(h,{key:0,modelValue:i.article.title,"onUpdate:modelValue":t[0]||(t[0]=_=>i.article.title=_)},null,8,["modelValue"])):(v(),P(x,{key:1},[l("div",vt,B(i.article.title),1),l("div",ft," 更新于 "+B(M(Ve)(i.article.updatedAt)),1)],64))]),l("div",ht,[i.edit?(v(),P(x,{key:0},[y(g,{type:"danger",icon:"Back",onClick:t[1]||(t[1]=_=>c("cancel"))},{default:E(()=>[H("取消")]),_:1}),y(g,{type:"success",icon:"Checked",onClick:t[2]||(t[2]=_=>c("preview"))},{default:E(()=>[H("保存")]),_:1})],64)):(v(),C(g,{key:1,type:"primary",icon:"EditPen",onClick:t[3]||(t[3]=_=>c("edit"))},{default:E(()=>[H("编辑")]),_:1}))])]),l("div",gt,[i.edit?(v(),C(at,{key:0,value:i.article.markdown,"onUpdate:value":t[4]||(t[4]=_=>i.article.markdown=_),"markdown-theme":i.article.theme.markdown,"code-theme":i.article.theme.code,onThemeChange:t[5]||(t[5]=_=>i.$emit("theme-change",_))},null,8,["value","markdown-theme","code-theme"])):(v(),C(ut,{key:1,value:i.article.markdown,"onUpdate:value":t[6]||(t[6]=_=>i.article.markdown=_)},null,8,["value"]))])])),[[w,i.loading]])}}}),wt={class:"wiki-icon"},we=I({__name:"wiki-icon",props:{color:{default:"#606266"},size:{default:"16"}},setup(b){Ce(c=>({db19b752:m.value,"89db1466":r.value}));const u=b,r=Z(()=>u.color),m=Z(()=>parseInt(u.size)+"px");return(c,i)=>(v(),P("span",wt,[fe(c.$slots,"default")]))}}),yt=l("svg",{t:"1693878652630",class:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M426.666667 170.666667H170.666667c-47.146667 0-84.906667 38.186667-84.906667 85.333333L85.333333 768c0 47.146667 38.186667 85.333333 85.333334 85.333333h682.666666c47.146667 0 85.333333-38.186667 85.333334-85.333333V341.333333c0-47.146667-38.186667-85.333333-85.333334-85.333333H512l-85.333333-85.333333z","p-id":"4270"})],-1),bt=I({__name:"icon-folder",props:{color:{default:"#606266"},size:{default:"16"}},setup(b){return(u,r)=>(v(),C(we,{size:u.size,color:u.color},{default:E(()=>[yt]),_:1},8,["size","color"]))}}),Et=l("svg",{t:"1693879787380",class:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M842.666667 285.866667l-187.733334-187.733334c-14.933333-14.933333-32-21.333333-53.333333-21.333333H234.666667C194.133333 74.666667 160 108.8 160 149.333333v725.333334c0 40.533333 34.133333 74.666667 74.666667 74.666666h554.666666c40.533333 0 74.666667-34.133333 74.666667-74.666666V337.066667c0-19.2-8.533333-38.4-21.333333-51.2z m-44.8 44.8c-2.133333 2.133333-4.266667 0-8.533334 0h-170.666666c-6.4 0-10.666667-4.266667-10.666667-10.666667V149.333333c0-2.133333 0-6.4-2.133333-8.533333 0 0 2.133333 0 2.133333 2.133333l189.866667 187.733334z m-8.533334 554.666666H234.666667c-6.4 0-10.666667-4.266667-10.666667-10.666666V149.333333c0-6.4 4.266667-10.666667 10.666667-10.666666h311.466666c-2.133333 4.266667-2.133333 6.4-2.133333 10.666666v170.666667c0 40.533333 34.133333 74.666667 74.666667 74.666667h170.666666c4.266667 0 6.4 0 10.666667-2.133334V874.666667c0 6.4-4.266667 10.666667-10.666667 10.666666z",fill:"#666666","p-id":"5233"}),l("path",{d:"M640 693.333333H341.333333c-17.066667 0-32 14.933333-32 32s14.933333 32 32 32h298.666667c17.066667 0 32-14.933333 32-32s-14.933333-32-32-32zM640 522.666667H341.333333c-17.066667 0-32 14.933333-32 32s14.933333 32 32 32h298.666667c17.066667 0 32-14.933333 32-32s-14.933333-32-32-32zM341.333333 416h85.333334c17.066667 0 32-14.933333 32-32s-14.933333-32-32-32h-85.333334c-17.066667 0-32 14.933333-32 32s14.933333 32 32 32z",fill:"#666666","p-id":"5234"})],-1),ee=I({__name:"icon-file",props:{color:{default:"#606266"},size:{default:"16"}},setup(b){return(u,r)=>(v(),C(we,{size:u.size,color:u.color},{default:E(()=>[Et]),_:1},8,["size","color"]))}}),Dt=(b,u)=>{const r=b[u];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((m,c)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(c.bind(null,new Error("Unknown variable dynamic import: "+u)))})},At={class:"menu-item-text"},W=I({__name:"action-popover",props:{placement:{default:"bottom-end"},trigger:{default:"click"},actions:{default:()=>[]},parent:{default:()=>({id:0})}},emits:["action"],setup(b,{emit:u}){const r=b,m=u,c=T({});async function i(){["file","folder","excel","mindmap","diagram","magic","import","canvas","copy","delete","export","docx","pdf","markdown","html"].forEach(async g=>{const{default:w}=await Dt(Object.assign({"./icons/icon-canvas.vue":()=>p(()=>import("./icon-canvas-XmRJdeYk.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])),"./icons/icon-computer.vue":()=>p(()=>import("./icon-computer-TCylT2j4.js"),__vite__mapDeps([8,1,2,3,4,5,6,7])),"./icons/icon-copy.vue":()=>p(()=>import("./icon-copy-52XTfKkY.js"),__vite__mapDeps([9,1,2,3,4,5,6,7])),"./icons/icon-delete.vue":()=>p(()=>import("./icon-delete-xn94LxeE.js"),__vite__mapDeps([10,1,2,3,4,5,6,7])),"./icons/icon-diagram.vue":()=>p(()=>import("./icon-diagram-Jo4Xczm1.js"),__vite__mapDeps([11,1,2,3,4,5,6,7])),"./icons/icon-docx.vue":()=>p(()=>import("./icon-docx-RBHz1t11.js"),__vite__mapDeps([12,1,2,3,4,5,6,7])),"./icons/icon-edit.vue":()=>p(()=>import("./icon-edit-C7ybRyZK.js"),__vite__mapDeps([13,1,2,3,4,5,6,7])),"./icons/icon-excel.vue":()=>p(()=>import("./icon-excel-bJPX0olM.js"),__vite__mapDeps([14,1,2,3,4,5,6,7])),"./icons/icon-export.vue":()=>p(()=>import("./icon-export-BXXY5h_T.js"),__vite__mapDeps([15,1,2,3,4,5,6,7])),"./icons/icon-file.vue":()=>p(()=>import("./icon-file-cYdK2K8Z.js"),__vite__mapDeps([16,3,4,1,2,5,6,7])),"./icons/icon-folder.vue":()=>p(()=>import("./icon-folder-WjgMuiKm.js"),__vite__mapDeps([17,3,4,1,2,5,6,7])),"./icons/icon-html.vue":()=>p(()=>import("./icon-html-BINvNohZ.js"),__vite__mapDeps([18,1,2,3,4,5,6,7])),"./icons/icon-import.vue":()=>p(()=>import("./icon-import-JMwg_LQ1.js"),__vite__mapDeps([19,1,2,3,4,5,6,7])),"./icons/icon-info.vue":()=>p(()=>import("./icon-info-1TtZnf6E.js"),__vite__mapDeps([20,1,2,3,4,5,6,7])),"./icons/icon-list.vue":()=>p(()=>import("./icon-list-PnIBRNDc.js"),__vite__mapDeps([21,1,2,3,4,5,6,7])),"./icons/icon-lock.vue":()=>p(()=>import("./icon-lock-389tiWnG.js"),__vite__mapDeps([22,1,2,3,4,5,6,7])),"./icons/icon-magic.vue":()=>p(()=>import("./icon-magic-nKgCoy9z.js"),__vite__mapDeps([23,1,2,3,4,5,6,7])),"./icons/icon-markdown.vue":()=>p(()=>import("./icon-markdown-nXeOsdER.js"),__vite__mapDeps([24,1,2,3,4,5,6,7])),"./icons/icon-mindmap.vue":()=>p(()=>import("./icon-mindmap-hX3ousl1.js"),__vite__mapDeps([25,1,2,3,4,5,6,7])),"./icons/icon-move.vue":()=>p(()=>import("./icon-move-DfWIhnR5.js"),__vite__mapDeps([26,1,2,3,4,5,6,7])),"./icons/icon-pdf.vue":()=>p(()=>import("./icon-pdf-0wYnB3id.js"),__vite__mapDeps([27,1,2,3,4,5,6,7])),"./icons/icon-play.vue":()=>p(()=>import("./icon-play-B3Hcwj3W.js"),__vite__mapDeps([28,1,2,3,4,5,6,7])),"./icons/icon-print.vue":()=>p(()=>import("./icon-print--fJTiucl.js"),__vite__mapDeps([29,1,2,3,4,5,6,7])),"./icons/icon-save.vue":()=>p(()=>import("./icon-save-eH5Ppk9R.js"),__vite__mapDeps([30,1,2,3,4,5,6,7])),"./icons/icon-share.vue":()=>p(()=>import("./icon-share-BmBnkG-1.js"),__vite__mapDeps([31,1,2,3,4,5,6,7]))}),`./icons/icon-${g}.vue`);c.value[g]=w})}i();function t(h){m("action",{...h,...r.parent})}return(h,g)=>{const w=z("el-dropdown-item"),_=z("el-dropdown-menu"),k=z("el-dropdown");return v(),C(k,{"popper-class":"action-popover",placement:h.placement,trigger:h.trigger},{dropdown:E(()=>[y(_,null,{default:E(()=>[(v(!0),P(x,null,de(h.actions,(A,o)=>(v(),C(w,{key:"action-item-"+o,onClick:a=>t(A)},{default:E(()=>[(v(),C(he(c.value[A.icon]),{size:A.size,color:A.color},null,8,["size","color"])),l("span",At,B(A.text),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:E(()=>[fe(h.$slots,"reference")]),_:3},8,["placement","trigger"])}}}),$t={class:"wiki-article-sidebar"},Tt={class:"wiki-article-sidebar__header"},Ct={class:"wiki-search-entry"},zt=l("span",{class:"wiki-search-entry-content"},"搜索内容",-1),Pt=l("span",{class:"wiki-search-entry-hotkey"},"Ctrl+Shift+F",-1),Lt={class:"wiki-article-sidebar__content"},Vt={class:"wiki-page-title"},It=l("span",null,"文档目录",-1),Rt={class:"action"},Ot={class:"node-item-label"},St={key:0,class:"node-item-actions"},xt=I({__name:"article-sidebar",props:{treeData:{},article:{default:()=>({id:0})},expandedKeys:{},loading:{type:Boolean}},emits:["update","action","drag-sort"],setup(b,{emit:u}){const r=me(),m=b,c=u,i=T(null),t=T([{icon:"file",size:18,text:"新建文档",func:"createFile"},{icon:"folder",size:18,text:"新建分组",func:"createFolder",color:"#F6C659"}]),h=T([{icon:"file",size:18,text:"新建文档",func:"createFile"},{icon:"folder",size:18,text:"新建分组",func:"createFolder",color:"#F6C659"}]),g=T([{icon:"copy",size:18,text:"复制文档",func:"copyFile"},{icon:"delete",size:18,text:"删除文档",func:"deleteFile"}]);function w(){r.push({name:"Wiki"})}function _(s){c("update",s)}function k(s){let e=null;switch(s){case"folder":e=K(bt);break;case"file":e=K(ee);break;default:e=K(ee);break}return e}function A(s){let e=null;switch(s){case"folder":e="rgb(246, 198, 89)";break;case"file":e="rgb(156, 156, 251)";break;case"excel":e="#01a408";break;case"mindmap":e="rgb(156, 156, 251)";break;case"diagram":e="rgb(156, 156, 251)";break;default:e="rgb(156, 156, 251)";break}return e}function o(s,e){}function a(s,e,d){}function n(s,e,d){}function $(s,e,d){}function L(s,e,d,D){}function R(s,e,d,D){console.log("from:",s.data.title,"to:",e.data.title,"类型:",d),c("drag-sort",{from:s.data.id,to:e.data.id,type:d})}return j(()=>m.article,s=>{s&&i.value.setCurrentKey(s.id)},{deep:!0,immediate:!0}),(s,e)=>{const d=z("DArrowLeft"),D=z("el-icon"),N=z("Search"),f=z("Plus"),V=z("MoreFilled"),S=z("el-tree"),ye=ve("loading");return v(),P("div",$t,[l("div",Tt,[l("div",{class:"wiki-go-back",onClick:w},[y(D,null,{default:E(()=>[y(d)]),_:1}),H("返回")]),l("div",Ct,[y(D,{class:"wiki-search-entry-icon",size:16},{default:E(()=>[y(N)]),_:1}),zt,Pt])]),l("div",Lt,[l("div",Vt,[It,y(W,{actions:t.value,trigger:"click",onAction:e[0]||(e[0]=q=>s.$emit("action",q))},{reference:E(()=>[l("div",Rt,[y(D,null,{default:E(()=>[y(f)]),_:1})])]),_:1},8,["actions"])]),_e((v(),C(S,{class:"wiki-page-tree",ref_key:"treeRef",ref:i,data:s.treeData,props:{children:"children",label:"title"},"highlight-current":"","default-expanded-keys":s.expandedKeys,"node-key":"id","current-node-key":s.article.id,"expand-on-click-node":!1,draggable:"",onNodeClick:_,onNodeDragStart:o,onNodeDragEnter:a,onNodeDragLeave:n,onNodeDragOver:$,onNodeDragEnd:L,onNodeDrop:R},{default:E(({node:q,data:O})=>[l("div",{class:pe({"node-item":!0,active:s.article.id===O.id})},[(v(),C(he(k(O.type)),{class:"node-item-icon",size:18,color:A(O.type)},null,8,["color"])),l("span",Ot,B(q.label),1),O.id===s.article.id?(v(),P("div",St,[y(W,{actions:h.value,trigger:"click",parent:O,onAction:e[2]||(e[2]=U=>s.$emit("action",U))},{reference:E(()=>[l("div",{class:"node-item-action",onClick:e[1]||(e[1]=J(()=>{},["stop"]))},[y(D,{size:"12"},{default:E(()=>[y(f)]),_:1})])]),_:2},1032,["actions","parent"]),y(W,{actions:g.value,trigger:"click",parent:O,onAction:e[4]||(e[4]=U=>s.$emit("action",U))},{reference:E(()=>[l("div",{class:"node-item-action",onClick:e[3]||(e[3]=J(()=>{},["stop"]))},[y(D,{size:"12"},{default:E(()=>[y(V)]),_:1})])]),_:2},1032,["actions","parent"])])):ze("",!0)],2)]),_:1},8,["data","default-expanded-keys","current-node-key"])),[[ye,s.loading]])])])}}}),Bt={class:"wiki-article"},Nt=I({__name:"wiki-articles",setup(b){const u=ue(),r=new be,m=ge(),{wid:c}=u.params,i=T([]),t=T({id:0,title:"",theme:{code:"github",markdown:"github"}}),h=T(!1),g=T(!1),w=T(!1),_=T([]);function k(){w.value=!0,r.getArticlePageTree(+c).then(e=>{i.value=e,w.value=!1,e.length&&(t.value.id=e[0].id,A(e[0]))})}k();function A(e){g.value=!0,t.value.id=e.id,r.getArticleDetail(e.id).then(d=>{d.markdown===" "&&(d.markdown=""),t.value=d,g.value=!1,_.value.push(d.id)})}function o(){r.updateArticle({id:t.value.id,title:t.value.title,markdown:t.value.markdown}).then(e=>{m.$message({message:"文档更新成功",type:"success",duration:1e3}),k()})}function a(e,d="未命名文档",D=0){r.createArticle({title:d,type:e,pid:D,markdown:""},+c).then(N=>{m.$message({message:"文档新建成功",type:"success",duration:1e3}),k()})}function n(e){r.deleteArticle(e).then(d=>{m.$message({message:"文档删除成功",type:"success",duration:1e3}),k()})}function $(e){r.copyArticle(e).then(d=>{k(),m.$message({message:"文档复制成功",type:"success",duration:1e3})})}function L(e){switch(e.func){case"createFile":Q.prompt("请输出文档名称","新建文档",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\S+$/,inputErrorMessage:"请输出文档名称"}).then(({value:d})=>{a("file",d,e.id),e.id&&_.value.push(e.id)}).catch(()=>{});break;case"createFolder":Q.prompt("请输出分组名称","新建分组",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\S+$/,inputErrorMessage:"请输出分组名称"}).then(({value:d})=>{a("folder",d,e.id)}).catch(()=>{});break;case"deleteFile":X("确定删除吗?该操作会将其子节点一并删除").then(()=>{n(e.id)});break;case"copyFile":X("该操作只会复制当前节点，其子节点不会复制，确定复制吗？").then(()=>{$(e.id)});break}}function R(e){e!==t.value.theme.markdown&&(t.value.theme.code=e,t.value.theme.markdown=e,r.changTheme(t.value.id,e).then(d=>{m.$message({message:"主题切换成功",type:"success",duration:1e3})}))}function s(e){r.sortArticle(e).then(d=>{k()})}return(e,d)=>(v(),P("div",Bt,[y(xt,{"tree-data":i.value,article:t.value,loading:w.value,expandedKeys:_.value,onUpdate:A,onAction:L,onDragSort:s},null,8,["tree-data","article","loading","expandedKeys"]),y(kt,{article:t.value,edit:h.value,"onUpdate:edit":d[0]||(d[0]=D=>h.value=D),loading:g.value,onUpdate:o,onThemeChange:R},null,8,["article","edit","loading"])]))}}),Ut=Object.freeze(Object.defineProperty({__proto__:null,default:Nt},Symbol.toStringTag,{value:"Module"}));export{we as _,ee as a,bt as b,Ut as w};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["static/js/icon-canvas-XmRJdeYk.js","static/js/vendor-DwjfiTos.js","static/css/vendor-5Uc64JMc.css","static/js/Wiki-uu1Xzfzz.js","static/js/index-i1BX2IYC.js","static/css/index-HEzhKsKQ.css","static/js/Image-aUM8NL0j.js","static/js/Bucket-LrxDhdm1.js","static/js/icon-computer-TCylT2j4.js","static/js/icon-copy-52XTfKkY.js","static/js/icon-delete-xn94LxeE.js","static/js/icon-diagram-Jo4Xczm1.js","static/js/icon-docx-RBHz1t11.js","static/js/icon-edit-C7ybRyZK.js","static/js/icon-excel-bJPX0olM.js","static/js/icon-export-BXXY5h_T.js","static/js/icon-file-cYdK2K8Z.js","static/js/icon-folder-WjgMuiKm.js","static/js/icon-html-BINvNohZ.js","static/js/icon-import-JMwg_LQ1.js","static/js/icon-info-1TtZnf6E.js","static/js/icon-list-PnIBRNDc.js","static/js/icon-lock-389tiWnG.js","static/js/icon-magic-nKgCoy9z.js","static/js/icon-markdown-nXeOsdER.js","static/js/icon-mindmap-hX3ousl1.js","static/js/icon-move-DfWIhnR5.js","static/js/icon-pdf-0wYnB3id.js","static/js/icon-play-B3Hcwj3W.js","static/js/icon-print--fJTiucl.js","static/js/icon-save-eH5Ppk9R.js","static/js/icon-share-BmBnkG-1.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
