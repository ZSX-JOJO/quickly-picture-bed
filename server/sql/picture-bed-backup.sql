/*
 Navicat Premium Data Transfer

 Source Server         : itchenliang
 Source Server Type    : MySQL
 Source Server Version : 50715
 Source Host           : 124.222.54.192:3306
 Source Schema         : picture-bed-backup

 Target Server Type    : MySQL
 Target Server Version : 50715
 File Encoding         : 65001

 Date: 07/03/2023 11:27:27
*/

SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;

-- ----------------------------
-- Table structure for album
-- ----------------------------
DROP TABLE IF EXISTS `album`;
CREATE TABLE `album`  (
  `id` char(36) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL COMMENT 'uuid',
  `uid` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '用户id',
  `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '相册名称',
  `desc` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '相册描述',
  `cover` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '相册封面',
  `background` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '相册背景',
  `createdAt` datetime(0) NOT NULL,
  `updatedAt` datetime(0) NOT NULL,
  `sort` float NULL DEFAULT 1 COMMENT '排序值',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of album
-- ----------------------------

-- ----------------------------
-- Table structure for bucket
-- ----------------------------
DROP TABLE IF EXISTS `bucket`;
CREATE TABLE `bucket`  (
  `id` char(36) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL COMMENT 'uuid',
  `type` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '存储桶类别',
  `tag` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '存储桶标签',
  `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '存储桶名称',
  `config` json NOT NULL COMMENT '存储桶配置',
  `visible` tinyint(1) NOT NULL DEFAULT 1 COMMENT '是否在上传区域显示',
  `uid` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '操作人，用户id',
  `createdAt` datetime(0) NOT NULL,
  `updatedAt` datetime(0) NOT NULL,
  `plugin` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT '存储桶插件',
  `version` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '1.0.0' COMMENT '存储源版本',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of bucket
-- ----------------------------
INSERT INTO `bucket` VALUES ('97026000-ae03-4ef0-b74d-a25690c93f56', 'local', '本地存储桶', '本地演示', '\"{\\\"path\\\":\\\"upload/\\\",\\\"baseUrl\\\":\\\"http://124.222.54.192:3001\\\"}\"', 1, '6a7a4a31-2e6d-4e8d-ab98-63d90cd2284c', '2023-03-07 02:57:56', '2023-03-07 03:15:56', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n      {\r\n        \"type\": \"string\",\r\n        \"label\":\"指定存储路径\",\r\n        \"field\": \"path\",\r\n        \"default\": \"\",\r\n        \"required\": true,\r\n        \"placeholder\":\"例如: upload/\"\r\n      },\r\n      {\r\n        \"type\": \"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\": \"baseUrl\",\r\n        \"default\": \'http://\' + window.uploader_ip,\r\n        \"hidden\":true,\r\n        \"required\": true,\r\n        \"placeholder\":\"例如: upload/\"\r\n      },\r\n    ],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function () {\r\n				\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const ip = `http://${window.uploader_ip}/api/v1/tool/upload`\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'path\', \'${config.path}\' + file.filename)\r\n				return {\r\n					url: ip,\r\n					method: \"post\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n        const tmp = res.data\r\n				return {\r\n					img_url: tmp.data.img_url,\r\n					hash: tmp.data.hash\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '1.0.0');

-- ----------------------------
-- Table structure for bucketsource
-- ----------------------------
DROP TABLE IF EXISTS `bucketsource`;
CREATE TABLE `bucketsource`  (
  `id` char(36) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL COMMENT 'uuid',
  `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '存储源名称',
  `type` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '存储源类型',
  `config` text CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '存储源配置',
  `createdAt` datetime(0) NOT NULL,
  `updatedAt` datetime(0) NOT NULL,
  `status` tinyint(1) NOT NULL DEFAULT 1 COMMENT '存储源状态',
  `version` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '1.0.0' COMMENT '存储源版本',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of bucketsource
-- ----------------------------
INSERT INTO `bucketsource` VALUES ('1c471b96-6ddd-454e-97f1-7414ca122008', '青云对象存储', 'qingstor', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				// const json = {\r\n        //   \"key\": \"${config.path}\" + file.filename,\r\n        //   \"redirect\": \"${config.redirect}\"\r\n        // }\r\n        // console.log(json)\r\n        // const policy = window.btoa(JSON.stringify(json))\r\n        // // const policy = window.btoa(json)\r\n        // const signature = this.crypto.HmacSHA256(\'${config.secret_access_key}\', policy).toString()\r\n        // console.log(signature.toString())\r\n        // return {\r\n        //   signature,\r\n        //   policy\r\n        // }\r\n        return await this.axios({\r\n          url: \'http://\' + window.uploader_ip + \'/api/v1/tool/qyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            access_key_id: \'${config.access_key_id}\',\r\n            secret_access_key: \'${config.secret_access_key}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            redirect: \'${config.redirect}\',\r\n            storage_type: \'${config.storage_type}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        const formData = new FormData()\r\n        formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        formData.append(\'redirect\', \'${config.redirect}\')\r\n        formData.append(\'file\', file.file)\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"POST\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2022-12-13 09:25:25', '2023-03-07 03:13:57', 1, '1.0.3');
INSERT INTO `bucketsource` VALUES ('2b25ef86-1b8a-4c7c-806c-b59a0d196ca8', '阿里云OSS', 'oss', '(() => {\r\n  return {\r\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#阿里云-oss\',\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({\r\n          url: \'http://\' + window.uploader_ip + \'/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-11-03 06:29:37', '2023-03-07 03:12:53', 1, '1.0.7');
INSERT INTO `bucketsource` VALUES ('51f58e71-0a37-4c44-b2e7-d53e70c63109', '华为云OBS', 'obs', '[{\"type\": \"string\", \"label\": \"设定用户名\", \"value\": \"username\", \"default\": \"\", \"required\": true, \"placeholder\": \"请输入github用户名\"}, {\"type\": \"string\", \"label\": \"设定仓库名\", \"value\": \"repo\", \"default\": \"\", \"required\": true, \"placeholder\": \"请输入github仓库名\"}, {\"type\": \"string\", \"label\": \"分支\", \"value\": \"branch\", \"default\": \"main\", \"required\": true, \"placeholder\": \"请输入github仓库分支名\"}, {\"type\": \"string\", \"label\": \"私人令牌\", \"value\": \"token\", \"default\": \"\", \"required\": true, \"placeholder\": \"请输入github token\"}, {\"type\": \"string\", \"label\": \"指定存储路径\", \"value\": \"path\", \"default\": \"\", \"required\": false, \"placeholder\": \"例如img/\"}, {\"type\": \"string\", \"label\": \"设定自定义域名\", \"value\": \"domain\", \"default\": \"\", \"required\": false, \"placeholder\": \"例如https://xxxx.com\"}, {\"type\": \"string\", \"label\": \"提交说明\", \"value\": \"commit_messages\", \"default\": \"upload ${filename}\", \"required\": false, \"placeholder\": \"例如 upload test\"}, {\"type\": \"string\", \"label\": \"访问前缀\", \"value\": \"baseUrl\", \"hidden\": true, \"default\": \"https://raw.githubusercontent.com/${username}/${repo}/${branch}/\", \"required\": false, \"placeholder\": \"请输入baseUrl\"}, {\"type\": \"string\", \"label\": \"服务地址|域名地址\", \"value\": \"host\", \"hidden\": true, \"default\": \"https://api.github.com/repos/\", \"required\": false, \"placeholder\": \"请输入服务地址\"}]', '2022-10-25 05:59:42', '2022-11-01 08:19:59', 0, '1.0.0');
INSERT INTO `bucketsource` VALUES ('607eb9fe-5f38-4beb-86c0-84b4b97aeba1', ' 腾讯COS', 'cos', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#腾讯云-cos\',\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({\r\n          url: \'http://\' + window.uploader_ip + \'/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: file.file\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-10-24 02:24:04', '2023-03-07 03:12:12', 1, '1.0.4');
INSERT INTO `bucketsource` VALUES ('6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '又拍云USS', 'uss', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#又拍云uss\',\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名，本示例试用的是基本认证\r\n      // 参考：https://help.upyun.com/knowledge-base/object_storage_authorization/\r\n      getSign: function (options) {\r\n        // const data = [\'PUT\']\r\n        // data.push(options[\'path\'])\r\n        // data.push(options[\'date\'])\r\n        // // 签名\r\n        // const md5Pwd = this.md5(\'${config.password}\')\r\n        // const sign = this.hmacsha1(md5Pwd, data.join(\'&\'))\r\n        // return \'UPYUN ${config.operator}:\' + sign\r\n\r\n        // const md5Pwd = this.md5(\'${config.password}\')\r\n        const sign = window.btoa(\'${config.operator}:${config.password}\')\r\n        return sign\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({\r\n          url: \'http://\' + window.uploader_ip + \'/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const date = new Date().toUTCString()\r\n        const sign = this.getSign({\r\n          path: \'/${config.bucket}/${config.path}\' + file.filename,\r\n          date: date\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: \'Basic \' + sign,\r\n            \'X-Date\': date,\r\n            Date: date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-11-03 06:29:52', '2023-03-07 03:11:28', 1, '1.0.4');
INSERT INTO `bucketsource` VALUES ('8f86a45d-34a6-4a50-b13a-e8195e0227a2', 'NextCloud网盘', 'nextcloud', '[{\"type\": \"string\", \"label\": \"AppID\", \"value\": \"appId\", \"default\": \"\", \"required\": true, \"placeholder\": \"请输入leancloud的appid\"}, {\"type\": \"string\", \"label\": \"appkey\", \"value\": \"appkey\", \"default\": \"123\", \"required\": false, \"placeholder\": \"请输入leancloud的appid\"}, {\"type\": \"string\", \"label\": \"访问前缀\", \"value\": \"baseUrl\", \"hidden\": true, \"default\": \"https://raw.githubusercontent.com/${username}/${repo}\", \"required\": false, \"placeholder\": \"请输入baseUrl\"}]', '2022-11-03 06:30:18', '2022-11-03 06:35:22', 0, '1.0.0');
INSERT INTO `bucketsource` VALUES ('9449c07e-514a-456f-a781-31e2c06f3af1', '七牛云 KODO', 'qiniu', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#七牛云-kodo\',\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AccessKey\",\r\n          \"field\":\"accessKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入AccessKey\"\r\n      },\r\n      {\r\n        \"type\":\"password\",\r\n        \"label\":\"设定SecretKey\",\r\n        \"field\":\"secretKey\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入SecretKey\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket_name\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入自定义域名\",\r\n          \"tips\": \"以http://或https://开头，末尾无需斜杠\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"设定存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"qiniu.region.z0\",\r\n          \"required\":true,\r\n          \"options\": [\r\n            {\r\n              \"label\": \"华东区域\",\r\n              \"value\": \"qiniu.region.z0\"\r\n            },\r\n            {\r\n              \"label\": \"华北区域\",\r\n              \"value\": \"qiniu.region.z1\"\r\n            },\r\n            {\r\n              \"label\": \"华南区域\",\r\n              \"value\": \"qiniu.region.z2\"\r\n            },\r\n            {\r\n              \"label\": \"北美区域\",\r\n              \"value\": \"qiniu.region.na0\"\r\n            },\r\n            {\r\n              \"label\": \"新加坡区域\",\r\n              \"value\": \"qiniu.region.as0\"\r\n            }\r\n          ],\r\n          \"placeholder\":\"请选择存储区域\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定网址后缀\",\r\n          \"field\":\"suffix\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如: imageView2/0/q/75|watermark/2/text/6ZuF5bGF5peF5ri45rCR5a6_/font/5a6L5L2T/fontsize/360/fill/I0ZBRkFGQQ==/dissolve/100/gravity/SouthEast/dx/15/dy/15|imageslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如: img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"访问前缀\",\r\n          \"field\":\"baseUrl\",\r\n          \"hidden\":true,\r\n          \"default\":\"${config.domain}\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      beforeEach: async function (file) {\r\n        return await this.axios({\r\n          url: \'http://\' + window.uploader_ip + \'/api/v1/tool/qiniuSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKey: \'${config.accessKey}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket_name}\',\r\n            expires: 7200\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'token\', res.data.data.token)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'fname\', file.filename)\r\n        return {\r\n          url: \'https://upload.qiniup.com/\',\r\n          method: \'post\',\r\n          data: formData\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data\r\n        return {\r\n          img_url: tmp.key,\r\n          hash: tmp.hash\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-10-24 02:24:23', '2023-03-07 03:13:08', 1, '1.0.3');
INSERT INTO `bucketsource` VALUES ('a3e15fa5-a5fc-48f7-8496-6b8ce0db222c', 'Leancloud图床', 'leancloud', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"请求token接口地址\",\r\n        \"field\":\"api_url\",\r\n        \"default\": \"\",\r\n        \"required\": true,\r\n        \"placeholder\":\"https://dzncsgi3.lc-cn-n1-shared.com/1.1/fileTokens\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"自定义域名\",\r\n        \"field\":\"domain\",\r\n        \"default\": \"\",\r\n        \"required\": true,\r\n        \"placeholder\":\"请输入自定义域名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\":\"baseUrl\",\r\n        \"hidden\":true,\r\n        \"default\":\"${config.domain}\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      beforeEach: async function (file) {\r\n        return await this.axios({\r\n          url: \'${config.api_url}\',\r\n          method: \"POST\",\r\n          data: {\r\n            name: file.filename,\r\n            metaData: {\r\n              size: file.file.size,\r\n              owner: \'unkown\'\r\n            }\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'token\', res.data.token)\r\n        formData.append(\'key\', res.data.key)\r\n        formData.append(\'fname\', file.filename)\r\n        return {\r\n          url: res.data.upload_url,\r\n          method: \'post\',\r\n          data: formData,\r\n          headers: {\r\n            accept: \'*/*\',\r\n            \'accept-encoding\': \'gzip, deflate, br\',\r\n            \'accept-language\': \'zh-CN,zh;q=0.9\',\r\n            \'content-length\': 64,\r\n            \'content-type\': \'application/json;charset=UTF-8\',\r\n            \'sec-ch-ua\': \'\"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"108\", \"Google Chrome\";v=\"108\"\',\r\n            \'sec-ch-ua-mobile\':\' ?0\',\r\n            \'sec-ch-ua-platform\': \"Windows\",\r\n            \'sec-fetch-dest\': \'empty\',\r\n            \'sec-fetch-mode\': \'cors\',\r\n            \'sec-fetch-site\': \'cross-site\',\r\n            \'user-agent\': \'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36\',\r\n            \'x-lc-id\': \'DZNcsGI3WVFNYIVdNCUUHeRy-gzGzoHsz\',\r\n            \'x-lc-sign\': \'e91b4aa58dcaf4f58549826a679f5fac,1670493759853\',\r\n            \'x-lc-ua\': \'LeanCloud-JS-SDK/4.13.2 (Browser)\'\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data\r\n        return {\r\n          img_url: tmp.key,\r\n          hash: tmp.hash\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-10-24 02:23:53', '2022-12-08 10:05:18', 0, '1.0.0');
INSERT INTO `bucketsource` VALUES ('b9c4aa49-e966-438e-b7a7-3308795f7394', '本地存储桶', 'local', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n      {\r\n        \"type\": \"string\",\r\n        \"label\":\"指定存储路径\",\r\n        \"field\": \"path\",\r\n        \"default\": \"\",\r\n        \"required\": true,\r\n        \"placeholder\":\"例如: upload/\"\r\n      },\r\n      {\r\n        \"type\": \"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\": \"baseUrl\",\r\n        \"default\": \'http://\' + window.uploader_ip,\r\n        \"hidden\":true,\r\n        \"required\": true,\r\n        \"placeholder\":\"例如: upload/\"\r\n      },\r\n    ],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function () {\r\n				\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const ip = `http://${window.uploader_ip}/api/v1/tool/upload`\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'path\', \'${config.path}\' + file.filename)\r\n				return {\r\n					url: ip,\r\n					method: \"post\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n        const tmp = res.data\r\n				return {\r\n					img_url: tmp.data.img_url,\r\n					hash: tmp.data.hash\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2023-03-07 02:53:45', '2023-03-07 03:07:12', 1, '1.0.0');
INSERT INTO `bucketsource` VALUES ('cb0e06ae-49c9-4c13-9d48-f20093ca53d0', '天翼云 OOS', 'oos', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AccessKey\",\r\n          \"field\":\"accessKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入AccessKey\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"设定SecretKey\",\r\n        \"field\":\"secretKey\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入SecretKey\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket_name\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定访问网址\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入访问网址\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"设定存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"qiniu.region.z0\",\r\n          \"required\":true,\r\n          \"options\": [\r\n            {\r\n              \"label\": \"华东区域\",\r\n              \"value\": \"qiniu.region.z0\"\r\n            },\r\n            {\r\n              \"label\": \"华北区域\",\r\n              \"value\": \"qiniu.region.z1\"\r\n            },\r\n            {\r\n              \"label\": \"华南区域\",\r\n              \"value\": \"qiniu.region.z2\"\r\n            },\r\n            {\r\n              \"label\": \"北美区域\",\r\n              \"value\": \"qiniu.region.na0\"\r\n            },\r\n            {\r\n              \"label\": \"新加坡区域\",\r\n              \"value\": \"qiniu.region.as0\"\r\n            }\r\n          ],\r\n          \"placeholder\":\"请选择存储区域\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定网址后缀\",\r\n          \"field\":\"suffix\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如: imageView2/0/q/75|watermark/2/text/6ZuF5bGF5peF5ri45rCR5a6_/font/5a6L5L2T/fontsize/360/fill/I0ZBRkFGQQ==/dissolve/100/gravity/SouthEast/dx/15/dy/15|imageslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如: img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"访问前缀\",\r\n          \"field\":\"baseUrl\",\r\n          \"hidden\":true,\r\n          \"default\":\"${config.domain}\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      beforeEach: async function (file) {\r\n        return await this.axios({\r\n          url: \'http://124.222.54.192:3002/api/v1/tool/qiniuSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKey: \'${config.accessKey}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket_name}\',\r\n            expires: 7200\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'token\', res.data.data.token)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'fname\', file.filename)\r\n        return {\r\n          url: \'https://upload.qiniup.com/\',\r\n          method: \'post\',\r\n          data: formData\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data\r\n        return {\r\n          img_url: tmp.key,\r\n          hash: tmp.hash\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-07 09:43:26', '2022-12-08 09:43:26', 1, '1.0.0');
INSERT INTO `bucketsource` VALUES ('f4fe0250-e404-4b27-891e-49d2b67e5e3e', 'Gitee图床', 'gitee', '(() => {\r\n	return {\r\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#gitee\',\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"用户名\",\r\n        \"field\":\"username\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入Gitee用户名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"仓库名称\",\r\n        \"field\":\"repo\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入仓库名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"分支\",\r\n        \"field\":\"branch\",\r\n        \"default\":\"master\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入分支名称\"\r\n      },\r\n      {\r\n        \"type\":\"password\",\r\n        \"label\":\"私人令牌\",\r\n        \"field\":\"token\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入私人令牌\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"存储路径\",\r\n        \"field\":\"path\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入存储路径\"\r\n      },\r\n      {\r\n        \"type\":\"option\",\r\n        \"label\":\"自定义路径\",\r\n        \"field\":\"customPath\",\r\n        \"default\":\"default\",\r\n        \"required\":false,\r\n        \"options\": [\r\n          { label: \"默认\", value: \"default\" },\r\n          { label: \"年\", value: \"year\" },\r\n          { label: \"年月\", value: \"year-month\" },\r\n          { label: \"年月日\", value: \"year-month-day\" }\r\n        ],\r\n        \"placeholder\":\"请选择自定义路径\"\r\n      },\r\n      {\r\n        \"tips\":\"${filename} - 文件名占位符<br/>${createdAt} - 创建时间\",\r\n        \"type\":\"string\",\r\n        \"label\":\"提交内容\",\r\n        \"field\":\"commit_messages\",\r\n        \"default\":\"upload ${file.filename} by pic bed\",\r\n        \"required\":false,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"请输入提交内容\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\":\"baseUrl\",\r\n        \"hidden\":true,\r\n        \"default\":\"https://gitee.com/${config.username}/${config.repo}/raw/${config.branch}/\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://gitee.com/api/v5/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        const formData = new FormData()\r\n        formData.append(\'branch\', \'${config.branch}\')\r\n        formData.append(\'content\', content)\r\n        formData.append(\'access_token\', \'${config.token}\')\r\n        formData.append(\'message\', tmp)\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n		}\r\n	}\r\n})()', '2022-10-24 02:23:17', '2023-02-23 05:30:07', 1, '1.0.4');
INSERT INTO `bucketsource` VALUES ('f68dd625-c5ce-4ef2-a3ca-5a843baf76fa', 'Github + jsDelivr图床', 'github', '(() => {\r\n  return {\r\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#github--jsdelivr\',\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            // \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}@${config.branch}/\",\r\n            \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${file.filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: tmp\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-10-24 02:22:56', '2023-02-23 05:33:22', 1, '1.0.5');

-- ----------------------------
-- Table structure for bucketsourcehistory
-- ----------------------------
DROP TABLE IF EXISTS `bucketsourcehistory`;
CREATE TABLE `bucketsourcehistory`  (
  `id` char(36) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL COMMENT 'uuid:历史记录id',
  `bs_id` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '存储源id',
  `config` text CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '当前最新存储源配置',
  `config_old` text CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '旧版本存储源配置',
  `createdAt` datetime(0) NOT NULL,
  `updatedAt` datetime(0) NOT NULL,
  `version` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '1.0.0' COMMENT '最新版本号',
  `version_old` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '1.0.0' COMMENT '旧版本号',
  `remark` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '备注',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of bucketsourcehistory
-- ----------------------------
INSERT INTO `bucketsourcehistory` VALUES ('00a7b7f5-ab5a-43fd-84ce-f414fa0e992c', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名\r\n      getSign: function (options) {\r\n        const data = []\r\n        for (let key in options) {\r\n          if (options[key]) {\r\n            data.push(options[key])\r\n          }\r\n        }\r\n        // 签名\r\n        const sign = this.hmacsha1(\'${config.password}\', data.join(\'&\'))\r\n        return \'UPYUN ${config.operator}:\' + sign\r\n      },\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        // const spark = new this.sparkMd5.ArrayBuffer()\r\n        // spark.append(arrayBufferData)\r\n        // const md5 = spark.end()\r\n        // const res = await this.beforeEach(file, md5)\r\n        // const signature = res.data.data\r\n        const date = new Date().toGMTString()\r\n        const sign = this.getSign({\r\n          method: \'PUT\',\r\n          path: \'/${config.path}\' + file.filename,\r\n          date: date,\r\n          policy: \'\',\r\n          // contentMd5: this.md5()\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: sign,\r\n            \'X-Date\': date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名\r\n      getSign: function (options) {\r\n        const data = []\r\n        for (let key in options) {\r\n          if (options[key]) {\r\n            data.push(options[key])\r\n          }\r\n        }\r\n        // 签名\r\n        const sign = this.hmacsha1(\'${config.password}\', data.join(\'&\'))\r\n        return \'UPYUN ${config.operator}:\' + sign\r\n      },\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        // const spark = new this.sparkMd5.ArrayBuffer()\r\n        // spark.append(arrayBufferData)\r\n        // const md5 = spark.end()\r\n        // const res = await this.beforeEach(file, md5)\r\n        // const signature = res.data.data\r\n        const date = new Date().toGMTString()\r\n        const sign = this.getSign({\r\n          method: \'PUT\',\r\n          path: \'/${config.path}\' + file.filename,\r\n          date: date,\r\n          policy: \'\',\r\n          // contentMd5: this.md5()\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: sign,\r\n            \'X-Date\': date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-14 07:53:27', '2022-12-14 07:53:27', '1.0.3', '1.0.3', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('04f4570c-ad80-431f-bf47-567645c93904', 'f4fe0250-e404-4b27-891e-49d2b67e5e3e', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"用户名\",\r\n        \"field\":\"username\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入Gitee用户名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"仓库地址\",\r\n        \"field\":\"repo\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入仓库名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"分支\",\r\n        \"field\":\"branch\",\r\n        \"default\":\"master\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入分支名称\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"私人令牌\",\r\n        \"field\":\"token\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入私人令牌\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"存储路径\",\r\n        \"field\":\"path\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入存储路径\"\r\n      },\r\n      {\r\n        \"type\":\"option\",\r\n        \"label\":\"自定义路径\",\r\n        \"field\":\"customPath\",\r\n        \"default\":\"default\",\r\n        \"required\":false,\r\n        \"options\": [\r\n          { label: \"默认\", value: \"default\" },\r\n          { label: \"年\", value: \"year\" },\r\n          { label: \"年月\", value: \"year-month\" },\r\n          { label: \"年月日\", value: \"year-month-day\" }\r\n        ],\r\n        \"placeholder\":\"请选择自定义路径\"\r\n      },\r\n      {\r\n        \"tips\":\"${filename} - 文件名占位符<br/>${createdAt} - 创建时间\",\r\n        \"type\":\"string\",\r\n        \"label\":\"提交内容\",\r\n        \"field\":\"commit_messages\",\r\n        \"default\":\"upload ${file.filename} by pic bed\",\r\n        \"required\":false,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"请输入提交内容\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\":\"baseUrl\",\r\n        \"hidden\":true,\r\n        \"default\":\"https://gitee.com/${config.username}/${config.repo}/raw/${config.branch}/\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://gitee.com/api/v5/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        const formData = new FormData()\r\n        formData.append(\'branch\', \'${config.branch}\')\r\n        formData.append(\'content\', content)\r\n        formData.append(\'access_token\', \'${config.token}\')\r\n        formData.append(\'message\', tmp)\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"用户名\",\r\n        \"field\":\"username\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入Gitee用户名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"仓库地址\",\r\n        \"field\":\"repo\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入仓库名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"分支\",\r\n        \"field\":\"branch\",\r\n        \"default\":\"master\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入分支名称\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"私人令牌\",\r\n        \"field\":\"token\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入私人令牌\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"存储路径\",\r\n        \"field\":\"path\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入存储路径\"\r\n      },\r\n      {\r\n        \"type\":\"option\",\r\n        \"label\":\"自定义路径\",\r\n        \"field\":\"customPath\",\r\n        \"default\":\"default\",\r\n        \"required\":false,\r\n        \"options\": [\r\n          { label: \"默认\", value: \"default\" },\r\n          { label: \"年\", value: \"year\" },\r\n          { label: \"年月\", value: \"year-month\" },\r\n          { label: \"年月日\", value: \"year-month-day\" }\r\n        ],\r\n        \"placeholder\":\"请选择自定义路径\"\r\n      },\r\n      {\r\n        \"tips\":\"${filename} - 文件名占位符<br/>${createdAt} - 创建时间\",\r\n        \"type\":\"string\",\r\n        \"label\":\"提交内容\",\r\n        \"field\":\"commit_messages\",\r\n        \"default\":\"upload ${file.filename} by pic bed\",\r\n        \"required\":false,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"请输入提交内容\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\":\"baseUrl\",\r\n        \"hidden\":true,\r\n        \"default\":\"https://gitee.com/${username}/${repo}/raw/${branch}/\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://gitee.com/api/v5/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        const formData = new FormData()\r\n        formData.append(\'branch\', \'${config.branch}\')\r\n        formData.append(\'content\', content)\r\n        formData.append(\'access_token\', \'${config.token}\')\r\n        formData.append(\'message\', tmp)\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n		}\r\n	}\r\n})()', '2022-12-10 06:39:00', '2022-12-10 06:39:00', '1.0.2', '1.0.1', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('0526f3be-e8e6-4c62-8b79-3a4f393c4a8d', '2b25ef86-1b8a-4c7c-806c-b59a0d196ca8', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          //  + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            // Authorization: \'OSS ${config.accessKeyId}:\' + res.data.data.token,\r\n            // Date: new Date().toUTCString(),\r\n            // \'Content-Type\': \'image/png\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      fileToBase64: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          //  + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            // Authorization: \'OSS ${config.accessKeyId}:\' + res.data.data.token,\r\n            // Date: new Date().toUTCString(),\r\n            // \'Content-Type\': \'image/png\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename,\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 05:37:49', '2022-12-12 05:37:49', '1.0.5', '1.0.5', '添加如果添加了自定义后缀，则自动添加到url中');
INSERT INTO `bucketsourcehistory` VALUES ('08ca90e2-0a4c-45eb-9824-9b76ee39b421', '2b25ef86-1b8a-4c7c-806c-b59a0d196ca8', '(() => {\r\n  return {\r\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#阿里云-oss\',\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({\r\n          url: \'http://\' + window.uploader_ip + \'/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#阿里云-oss\',\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2023-03-07 03:12:53', '2023-03-07 03:12:53', '1.0.7', '1.0.7', '将写死的ip地址替换成当前服务所用后端ip');
INSERT INTO `bucketsourcehistory` VALUES ('0a3438a0-323a-4ba0-a754-fe8f0419d81c', 'f4fe0250-e404-4b27-891e-49d2b67e5e3e', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"用户名\",\r\n        \"field\":\"username\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入Gitee用户名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"仓库地址\",\r\n        \"field\":\"repo\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入仓库名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"分支\",\r\n        \"field\":\"branch\",\r\n        \"default\":\"master\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入分支名称\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"私人令牌\",\r\n        \"field\":\"token\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入私人令牌\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"存储路径\",\r\n        \"field\":\"path\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入存储路径\"\r\n      },\r\n      {\r\n        \"type\":\"option\",\r\n        \"label\":\"自定义路径\",\r\n        \"field\":\"customPath\",\r\n        \"default\":\"default\",\r\n        \"required\":false,\r\n        \"options\": [\r\n          { label: \"默认\", value: \"default\" },\r\n          { label: \"年\", value: \"year\" },\r\n          { label: \"年月\", value: \"year-month\" },\r\n          { label: \"年月日\", value: \"year-month-day\" }\r\n        ],\r\n        \"placeholder\":\"请选择自定义路径\"\r\n      },\r\n      {\r\n        \"tips\":\"${filename} - 文件名占位符<br/>${createdAt} - 创建时间\",\r\n        \"type\":\"string\",\r\n        \"label\":\"提交内容\",\r\n        \"field\":\"commit_messages\",\r\n        \"default\":\"upload ${filename} by pic bed\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入提交内容\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\":\"baseUrl\",\r\n        \"hidden\":true,\r\n        \"default\":\"https://gitee.com/${username}/${repo}/raw/${branch}/\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://gitee.com/api/v5/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        const formData = new FormData()\r\n        formData.append(\'branch\', \'${config.branch}\')\r\n        formData.append(\'content\', content)\r\n        formData.append(\'access_token\', \'${config.token}\')\r\n        formData.append(\'message\', tmp)\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"用户名\",\r\n        \"field\":\"username\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入Gitee用户名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"仓库地址\",\r\n        \"field\":\"repo\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入仓库名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"分支\",\r\n        \"field\":\"branch\",\r\n        \"default\":\"master\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入分支名称\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"私人令牌\",\r\n        \"field\":\"token\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入私人令牌\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"存储路径\",\r\n        \"field\":\"path\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入存储路径\"\r\n      },\r\n      {\r\n        \"type\":\"option\",\r\n        \"label\":\"自定义路径\",\r\n        \"field\":\"customPath\",\r\n        \"default\":\"default\",\r\n        \"required\":false,\r\n        \"optios\": [\r\n          { label: \"默认\", value: \"default\" },\r\n          { label: \"年\", value: \"year\" },\r\n          { label: \"年月\", value: \"year-month\" },\r\n          { label: \"年月日\", value: \"year-month-day\" }\r\n        ],\r\n        \"placeholder\":\"请选择自定义路径\"\r\n      },\r\n      {\r\n        \"tips\":\"${filename} - 文件名占位符<br/>${createdAt} - 创建时间\",\r\n        \"type\":\"string\",\r\n        \"label\":\"提交内容\",\r\n        \"field\":\"commit_messages\",\r\n        \"default\":\"upload ${filename} by pic bed\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入提交内容\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\":\"baseUrl\",\r\n        \"hidden\":true,\r\n        \"default\":\"https://gitee.com/${username}/${repo}/raw/${branch}/\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://gitee.com/api/v5/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        const formData = new FormData()\r\n        formData.append(\'branch\', \'${config.branch}\')\r\n        formData.append(\'content\', content)\r\n        formData.append(\'access_token\', \'${config.token}\')\r\n        formData.append(\'message\', tmp)\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n		}\r\n	}\r\n})()', '2022-12-10 06:36:08', '2022-12-10 06:36:08', '1.0.1', '1.0.1', '最终');
INSERT INTO `bucketsourcehistory` VALUES ('0a4fbe8a-3cec-44cb-b2ae-a02d44a73b85', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名，本示例试用的是基本认证\r\n      // 参考：https://help.upyun.com/knowledge-base/object_storage_authorization/\r\n      getSign: function (options) {\r\n        // const data = [\'PUT\']\r\n        // data.push(options[\'path\'])\r\n        // data.push(options[\'date\'])\r\n        // // 签名\r\n        // const md5Pwd = this.md5(\'${config.password}\')\r\n        // const sign = this.hmacsha1(md5Pwd, data.join(\'&\'))\r\n        // return \'UPYUN ${config.operator}:\' + sign\r\n\r\n        // const md5Pwd = this.md5(\'${config.password}\')\r\n        const sign = window.btoa(\'${config.operator}:${config.password}\')\r\n        return sign\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const date = new Date().toUTCString()\r\n        const sign = this.getSign({\r\n          path: \'/${config.bucket}/${config.path}\' + file.filename,\r\n          date: date\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: \'Basic \' + sign,\r\n            \'X-Date\': date,\r\n            Date: date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名\r\n      getSign: function (options) {\r\n        // const data = [\'PUT\']\r\n        // data.push(options[\'path\'])\r\n        // data.push(options[\'date\'])\r\n        // // 签名\r\n        // const md5Pwd = this.md5(\'${config.password}\')\r\n        // const sign = this.hmacsha1(md5Pwd, data.join(\'&\'))\r\n        // return \'UPYUN ${config.operator}:\' + sign\r\n\r\n        // const md5Pwd = this.md5(\'${config.password}\')\r\n        const sign = window.btoa(\'${config.operator}:${config.password}\')\r\n        return sign\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const date = new Date().toUTCString()\r\n        const sign = this.getSign({\r\n          path: \'/${config.bucket}/${config.path}\' + file.filename,\r\n          date: date\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: \'Basic \' + sign,\r\n            \'X-Date\': date,\r\n            Date: date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-14 08:55:50', '2022-12-14 08:55:50', '1.0.3', '1.0.3', '11');
INSERT INTO `bucketsourcehistory` VALUES ('0ac3c1b9-b771-4307-a58d-9be80093838f', '841ef04a-2ad2-451a-993b-6002db343a5b', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#本地存储桶\',\r\n    config: [\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"设定AccessKey\",\r\n        \"field\":\"accessKey\",\r\n        \"default\":\"mVGmIkaYxQTAdr2OVQrlxZVTUMMZHPl1DfCSCusn\",\r\n        \"required\":true,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"请输入AccessKey\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"设定SecretKey\",\r\n        \"field\":\"secretKey\",\r\n        \"default\":\"okkbqh5DaceVTr1AVfOCnH6XLi_xynQo7DlA2SQM\",\r\n        \"required\":true,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"请输入SecretKey\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"设定存储空间名\",\r\n        \"field\":\"bucket_name\",\r\n        \"default\":\"yaju\",\r\n        \"required\":true,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"设定访问网址\",\r\n        \"field\":\"domain\",\r\n        \"default\":\"http://img.itchenliang.club/\",\r\n        \"required\":true,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"请输入访问网址\"\r\n      },\r\n      {\r\n        \"type\":\"option\",\r\n        \"label\":\"设定存储区域\",\r\n        \"field\":\"area\",\r\n        \"default\":\"qiniu.region.z0\",\r\n        \"required\":true,\r\n        \"hidden\": true,\r\n        \"options\": [\r\n          {\r\n            \"label\": \"华东区域\",\r\n            \"value\": \"qiniu.region.z0\"\r\n          },\r\n          {\r\n            \"label\": \"华北区域\",\r\n            \"value\": \"qiniu.region.z1\"\r\n          },\r\n          {\r\n            \"label\": \"华南区域\",\r\n            \"value\": \"qiniu.region.z2\"\r\n          },\r\n          {\r\n            \"label\": \"北美区域\",\r\n            \"value\": \"qiniu.region.na0\"\r\n          },\r\n          {\r\n            \"label\": \"新加坡区域\",\r\n            \"value\": \"qiniu.region.as0\"\r\n          }\r\n        ],\r\n        \"placeholder\":\"请选择存储区域\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"设定网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"例如: imageView2/0/q/75|watermark/2/text/6ZuF5bGF5peF5ri45rCR5a6_/font/5a6L5L2T/fontsize/360/fill/I0ZBRkFGQQ==/dissolve/100/gravity/SouthEast/dx/15/dy/15|imageslim\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"指定存储路径\",\r\n        \"field\":\"path\",\r\n        \"default\":\"picture-ped-img/\",\r\n        \"required\":false,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"例如: img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\":\"baseUrl\",\r\n        \"hidden\":true,\r\n        \"default\":\"${config.domain}\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      beforeEach: async function (file) {\r\n        return await this.axios({\r\n          url: \'http://124.222.54.192:3002/api/v1/tool/qiniuSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKey: \'${config.accessKey}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket_name}\',\r\n            expires: 7200\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'token\', res.data.data.token)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'fname\', file.filename)\r\n        return {\r\n          url: \'https://upload.qiniup.com/\',\r\n          method: \'post\',\r\n          data: formData\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data\r\n        return {\r\n          img_url: tmp.key,\r\n          hash: tmp.hash\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#本地存储桶\',\r\n    config: [\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"设定AccessKey\",\r\n        \"field\":\"accessKey\",\r\n        \"default\":\"mVGmIkaYxQTAdr2OVQrlxZVTUMMZHPl1DfCSCusn\",\r\n        \"required\":true,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"请输入AccessKey\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"设定SecretKey\",\r\n        \"field\":\"secretKey\",\r\n        \"default\":\"okkbqh5DaceVTr1AVfOCnH6XLi_xynQo7DlA2SQM\",\r\n        \"required\":true,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"请输入SecretKey\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"设定存储空间名\",\r\n        \"field\":\"bucket_name\",\r\n        \"default\":\"yaju\",\r\n        \"required\":true,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"设定访问网址\",\r\n        \"field\":\"domain\",\r\n        \"default\":\"https://imgs.itchenliang.club/\",\r\n        \"required\":true,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"请输入访问网址\"\r\n      },\r\n      {\r\n        \"type\":\"option\",\r\n        \"label\":\"设定存储区域\",\r\n        \"field\":\"area\",\r\n        \"default\":\"qiniu.region.z0\",\r\n        \"required\":true,\r\n        \"hidden\": true,\r\n        \"options\": [\r\n          {\r\n            \"label\": \"华东区域\",\r\n            \"value\": \"qiniu.region.z0\"\r\n          },\r\n          {\r\n            \"label\": \"华北区域\",\r\n            \"value\": \"qiniu.region.z1\"\r\n          },\r\n          {\r\n            \"label\": \"华南区域\",\r\n            \"value\": \"qiniu.region.z2\"\r\n          },\r\n          {\r\n            \"label\": \"北美区域\",\r\n            \"value\": \"qiniu.region.na0\"\r\n          },\r\n          {\r\n            \"label\": \"新加坡区域\",\r\n            \"value\": \"qiniu.region.as0\"\r\n          }\r\n        ],\r\n        \"placeholder\":\"请选择存储区域\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"设定网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"例如: imageView2/0/q/75|watermark/2/text/6ZuF5bGF5peF5ri45rCR5a6_/font/5a6L5L2T/fontsize/360/fill/I0ZBRkFGQQ==/dissolve/100/gravity/SouthEast/dx/15/dy/15|imageslim\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"指定存储路径\",\r\n        \"field\":\"path\",\r\n        \"default\":\"picture-ped-img/\",\r\n        \"required\":false,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"例如: img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\":\"baseUrl\",\r\n        \"hidden\":true,\r\n        \"default\":\"${config.domain}\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      beforeEach: async function (file) {\r\n        return await this.axios({\r\n          url: \'http://124.222.54.192:3002/api/v1/tool/qiniuSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKey: \'${config.accessKey}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket_name}\',\r\n            expires: 7200\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'token\', res.data.data.token)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'fname\', file.filename)\r\n        return {\r\n          url: \'https://upload.qiniup.com/\',\r\n          method: \'post\',\r\n          data: formData\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data\r\n        return {\r\n          img_url: tmp.key,\r\n          hash: tmp.hash\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2023-03-02 01:57:58', '2023-03-02 01:57:58', '1.0.2', '1.0.1', '修改加速域名https -> http');
INSERT INTO `bucketsourcehistory` VALUES ('11657997-1301-4257-8526-0771d3525737', '1c471b96-6ddd-454e-97f1-7414ca122008', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				// const json = {\r\n        //   \"key\": \"${config.path}\" + file.filename,\r\n        //   \"redirect\": \"${config.redirect}\"\r\n        // }\r\n        // console.log(json)\r\n        // const policy = window.btoa(JSON.stringify(json))\r\n        // // const policy = window.btoa(json)\r\n        // const signature = this.crypto.HmacSHA256(\'${config.secret_access_key}\', policy).toString()\r\n        // console.log(signature.toString())\r\n        // return {\r\n        //   signature,\r\n        //   policy\r\n        // }\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/qyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            access_key_id: \'${config.access_key_id}\',\r\n            secret_access_key: \'${config.secret_access_key}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            redirect: \'${config.redirect}\',\r\n            storage_type: \'${config.storage_type}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        // console.log(res)\r\n        // const formData = new FormData()\r\n        // formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        // formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        // formData.append(\'policy\', res.data.data.policy)\r\n        // formData.append(\'signature\', res.data.data.signature)\r\n        // formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        // formData.append(\'redirect\', \'${config.redirect}\')\r\n        // formData.append(\'charset\', \'UTF-8\')\r\n        // formData.append(\'Upload\', \'Upload to QingStor\')\r\n        // formData.append(\'file\', file.file)\r\n				return {\r\n          // ${url.protocol}://${options.zone}.${url.host}/${options.bucket}${path}/${encodeURI(fileName)}\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com/${config.path}\" + file.filename,\r\n					method: \"PUT\",\r\n          data: file.file,\r\n          headers: {\r\n            // Host: \'${config.area}.${config.host}\',\r\n            Authorization: res.data.data.signature,\r\n            // Date: new Date().toUTCString(),\r\n            Date: new Date((new Date().getTime() + 300000)).toUTCString(),\r\n            \'User-Agent\': \'picgo_plugin_qingstor\',\r\n            \'Content-Type\': \'application/octet-stream\',\r\n          }\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				// const json = {\r\n        //   \"key\": \"${config.path}\" + file.filename,\r\n        //   \"redirect\": \"${config.redirect}\"\r\n        // }\r\n        // console.log(json)\r\n        // const policy = window.btoa(JSON.stringify(json))\r\n        // // const policy = window.btoa(json)\r\n        // const signature = this.crypto.HmacSHA256(\'${config.secret_access_key}\', policy).toString()\r\n        // console.log(signature.toString())\r\n        // return {\r\n        //   signature,\r\n        //   policy\r\n        // }\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/qyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            access_key_id: \'${config.access_key_id}\',\r\n            secret_access_key: \'${config.secret_access_key}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            redirect: \'${config.redirect}\',\r\n            storage_type: \'${config.storage_type}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        // console.log(res)\r\n        // const formData = new FormData()\r\n        // formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        // formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        // formData.append(\'policy\', res.data.data.policy)\r\n        // formData.append(\'signature\', res.data.data.signature)\r\n        // formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        // formData.append(\'redirect\', \'${config.redirect}\')\r\n        // formData.append(\'charset\', \'UTF-8\')\r\n        // formData.append(\'Upload\', \'Upload to QingStor\')\r\n        // formData.append(\'file\', file.file)\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"PUT\",\r\n          data: file.file,\r\n          headers: {\r\n            // Host: \'${config.area}.${config.host}\',\r\n            Authorization: res.data.data.signature,\r\n            // Date: new Date().toUTCString(),\r\n            Date: new Date((new Date().getTime() + 300000)).toUTCString(),\r\n            \'User-Agent\': \'picgo_plugin_qingstor\',\r\n            \'Content-Type\': \'application/octet-stream\',\r\n          }\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2022-12-19 06:29:39', '2022-12-19 06:29:39', '1.0.4', '1.0.4', '123');
INSERT INTO `bucketsourcehistory` VALUES ('11e4828a-383d-4374-b8d8-9ea637b33c91', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        const spark = new this.sparkMd5.ArrayBuffer()\r\n        spark.append(arrayBufferData)\r\n        const md5 = spark.end()\r\n        const res = await this.beforeEach(file, md5)\r\n        const signature = res.data.data\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: signature.signature,\r\n            // Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const signature = res.data.data\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        const spark = new this.sparkMd5.ArrayBuffer()\r\n        spark.append(arrayBufferData)\r\n        const md5 = spark.end()\r\n        const res = await this.beforeEach(file, md5)\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: signature.signature,\r\n            // Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-13 03:02:19', '2022-12-13 03:02:19', '1.0.2', '1.0.2', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('13c3d401-c873-432c-8e20-3a65f048eec6', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        const signature = res.data.data\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        const spark = new this.sparkMd5.ArrayBuffer()\r\n        spark.append(arrayBufferData)\r\n        const md5 = spark.end()\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: signature.signature,\r\n            // Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        const signature = res.data.data\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        const spark = new this.sparkMd5.ArrayBuffer()\r\n        spark.append(arrayBufferData)\r\n        const md5 = spark.end()\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: signature.signature,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-13 02:43:32', '2022-12-13 02:43:32', '1.0.2', '1.0.2', '啊啊');
INSERT INTO `bucketsourcehistory` VALUES ('175e5e75-5069-4d28-8dbf-4748c61b1fa7', 'f68dd625-c5ce-4ef2-a3ca-5a843baf76fa', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: \'upload \' + file.filename\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: \'${config.commit_messages}\'\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-09 09:42:09', '2022-12-09 09:42:09', '1.0.2', '1.0.2', 'feat:更新上传的message说明');
INSERT INTO `bucketsourcehistory` VALUES ('187abdb2-fa95-46c8-99e2-f56e96142d9c', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#又拍云uss\',\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名，本示例试用的是基本认证\r\n      // 参考：https://help.upyun.com/knowledge-base/object_storage_authorization/\r\n      getSign: function (options) {\r\n        // const data = [\'PUT\']\r\n        // data.push(options[\'path\'])\r\n        // data.push(options[\'date\'])\r\n        // // 签名\r\n        // const md5Pwd = this.md5(\'${config.password}\')\r\n        // const sign = this.hmacsha1(md5Pwd, data.join(\'&\'))\r\n        // return \'UPYUN ${config.operator}:\' + sign\r\n\r\n        // const md5Pwd = this.md5(\'${config.password}\')\r\n        const sign = window.btoa(\'${config.operator}:${config.password}\')\r\n        return sign\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const date = new Date().toUTCString()\r\n        const sign = this.getSign({\r\n          path: \'/${config.bucket}/${config.path}\' + file.filename,\r\n          date: date\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: \'Basic \' + sign,\r\n            \'X-Date\': date,\r\n            Date: date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名，本示例试用的是基本认证\r\n      // 参考：https://help.upyun.com/knowledge-base/object_storage_authorization/\r\n      getSign: function (options) {\r\n        // const data = [\'PUT\']\r\n        // data.push(options[\'path\'])\r\n        // data.push(options[\'date\'])\r\n        // // 签名\r\n        // const md5Pwd = this.md5(\'${config.password}\')\r\n        // const sign = this.hmacsha1(md5Pwd, data.join(\'&\'))\r\n        // return \'UPYUN ${config.operator}:\' + sign\r\n\r\n        // const md5Pwd = this.md5(\'${config.password}\')\r\n        const sign = window.btoa(\'${config.operator}:${config.password}\')\r\n        return sign\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const date = new Date().toUTCString()\r\n        const sign = this.getSign({\r\n          path: \'/${config.bucket}/${config.path}\' + file.filename,\r\n          date: date\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: \'Basic \' + sign,\r\n            \'X-Date\': date,\r\n            Date: date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2023-02-23 05:32:57', '2023-02-23 05:32:57', '1.0.4', '1.0.3', '添加文档地址');
INSERT INTO `bucketsourcehistory` VALUES ('1884af3f-5068-430e-9b36-05f2e8834418', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名\r\n      getSign: function (options) {\r\n        // const data = [\'PUT\']\r\n        // data.push(options[\'path\'])\r\n        // data.push(options[\'date\'])\r\n        // // 签名\r\n        // const md5Pwd = this.md5(\'${config.password}\')\r\n        // const sign = this.hmacsha1(md5Pwd, data.join(\'&\'))\r\n        // return \'UPYUN ${config.operator}:\' + sign\r\n\r\n        const sign = window.btoa(\'${config.operator}:${config.password}\')\r\n        return sign\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const date = new Date().toUTCString()\r\n        const sign = this.getSign({\r\n          path: \'/${config.bucket}/${config.path}\' + file.filename,\r\n          date: date\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: \'Basic \' + sign,\r\n            \'X-Date\': date,\r\n            Date: date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名\r\n      getSign: function (options) {\r\n        // const data = [\'PUT\']\r\n        // data.push(options[\'path\'])\r\n        // data.push(options[\'date\'])\r\n        // // 签名\r\n        // const md5Pwd = this.md5(\'${config.password}\')\r\n        // const sign = this.hmacsha1(md5Pwd, data.join(\'&\'))\r\n        // return \'UPYUN ${config.operator}:\' + sign\r\n\r\n        const md5Pwd = this.md5(\'${config.password}\')\r\n        const operator = \'${config.operator}\'\r\n        const sign = this.hmacsha1(operator + \':\' + md5Pwd)\r\n        return sign\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const date = new Date().toUTCString()\r\n        const sign = this.getSign({\r\n          path: \'/${config.bucket}/${config.path}\' + file.filename,\r\n          date: date\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: sign,\r\n            \'X-Date\': date,\r\n            Date: date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-14 08:49:07', '2022-12-14 08:49:07', '1.0.3', '1.0.3', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('19ae8186-5fec-4004-b8df-77ceca0f462b', 'f4fe0250-e404-4b27-891e-49d2b67e5e3e', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"用户名\",\r\n        \"field\":\"username\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入Gitee用户名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"仓库地址\",\r\n        \"field\":\"repo\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入仓库名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"分支\",\r\n        \"field\":\"branch\",\r\n        \"default\":\"master\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入分支名称\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"私人令牌\",\r\n        \"field\":\"token\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入私人令牌\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"存储路径\",\r\n        \"field\":\"path\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入存储路径\"\r\n      },\r\n      {\r\n        \"type\":\"option\",\r\n        \"label\":\"自定义路径\",\r\n        \"field\":\"customPath\",\r\n        \"default\":\"default\",\r\n        \"required\":false,\r\n        \"options\": [\r\n          { label: \"默认\", value: \"default\" },\r\n          { label: \"年\", value: \"year\" },\r\n          { label: \"年月\", value: \"year-month\" },\r\n          { label: \"年月日\", value: \"year-month-day\" }\r\n        ],\r\n        \"placeholder\":\"请选择自定义路径\"\r\n      },\r\n      {\r\n        \"tips\":\"${filename} - 文件名占位符<br/>${createdAt} - 创建时间\",\r\n        \"type\":\"string\",\r\n        \"label\":\"提交内容\",\r\n        \"field\":\"commit_messages\",\r\n        \"default\":\"upload ${file.filename} by pic bed\",\r\n        \"required\":false,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"请输入提交内容\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\":\"baseUrl\",\r\n        \"hidden\":true,\r\n        \"default\":\"https://gitee.com/${username}/${repo}/raw/${branch}/\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://gitee.com/api/v5/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        const formData = new FormData()\r\n        formData.append(\'branch\', \'${config.branch}\')\r\n        formData.append(\'content\', content)\r\n        formData.append(\'access_token\', \'${config.token}\')\r\n        formData.append(\'message\', tmp)\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"用户名\",\r\n        \"field\":\"username\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入Gitee用户名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"仓库地址\",\r\n        \"field\":\"repo\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入仓库名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"分支\",\r\n        \"field\":\"branch\",\r\n        \"default\":\"master\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入分支名称\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"私人令牌\",\r\n        \"field\":\"token\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入私人令牌\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"存储路径\",\r\n        \"field\":\"path\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入存储路径\"\r\n      },\r\n      {\r\n        \"type\":\"option\",\r\n        \"label\":\"自定义路径\",\r\n        \"field\":\"customPath\",\r\n        \"default\":\"default\",\r\n        \"required\":false,\r\n        \"options\": [\r\n          { label: \"默认\", value: \"default\" },\r\n          { label: \"年\", value: \"year\" },\r\n          { label: \"年月\", value: \"year-month\" },\r\n          { label: \"年月日\", value: \"year-month-day\" }\r\n        ],\r\n        \"placeholder\":\"请选择自定义路径\"\r\n      },\r\n      {\r\n        \"tips\":\"${filename} - 文件名占位符<br/>${createdAt} - 创建时间\",\r\n        \"type\":\"string\",\r\n        \"label\":\"提交内容\",\r\n        \"field\":\"commit_messages\",\r\n        \"default\":\"upload ${filename} by pic bed\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入提交内容\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\":\"baseUrl\",\r\n        \"hidden\":true,\r\n        \"default\":\"https://gitee.com/${username}/${repo}/raw/${branch}/\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://gitee.com/api/v5/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        const formData = new FormData()\r\n        formData.append(\'branch\', \'${config.branch}\')\r\n        formData.append(\'content\', content)\r\n        formData.append(\'access_token\', \'${config.token}\')\r\n        formData.append(\'message\', tmp)\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n		}\r\n	}\r\n})()', '2022-12-10 06:37:05', '2022-12-10 06:37:05', '1.0.1', '1.0.1', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('19bed8fd-e73d-4007-b190-42670a943207', '607eb9fe-5f38-4beb-86c0-84b4b97aeba1', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"switch\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"options\": [\'v5\', \'v4\']\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '[{\"type\": \"string\", \"label\": \"AppID\", \"value\": \"appId\", \"default\": \"\", \"required\": true, \"placeholder\": \"请输入leancloud的appid\"}, {\"type\": \"string\", \"label\": \"appkey\", \"value\": \"appkey\", \"default\": \"123\", \"required\": false, \"placeholder\": \"请输入leancloud的appid\"}, {\"type\": \"string\", \"label\": \"访问前缀\", \"value\": \"baseUrl\", \"hidden\": true, \"default\": \"https://raw.githubusercontent.com/${username}/${repo}\", \"required\": false, \"placeholder\": \"请输入baseUrl\"}]', '2022-12-12 05:44:34', '2022-12-12 05:44:34', '1.0.1', '1.0.0', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('1a2bbd45-a530-4610-813c-6f01b2401397', 'b9c4aa49-e966-438e-b7a7-3308795f7394', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n      {\r\n        \"type\": \"string\",\r\n        \"label\":\"指定存储路径\",\r\n        \"field\": \"accessKey\",\r\n        \"default\": \"\",\r\n        \"required\": true,\r\n        \"placeholder\":\"例如: upload/\"\r\n      },\r\n      {\r\n        \"type\": \"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\": \"baseUrl\",\r\n        \"default\": \'//\' + window.uploader_ip,\r\n        \"hidden\":true,\r\n        \"required\": true,\r\n        \"placeholder\":\"例如: upload/\"\r\n      },\r\n    ],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function () {\r\n				\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const ip = `//${window.uploader_ip}/api/v1/tool/upload`\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'path\', \'/upload/\' + file.filename)\r\n				return {\r\n					url: ip,\r\n					method: \"post\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n        const tmp = res.data\r\n				return {\r\n					img_url: tmp.data.img_url,\r\n					hash: tmp.data.hash\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n      {\r\n        \"type\": \"string\",\r\n        \"label\":\"指定存储路径\",\r\n        \"field\": \"accessKey\",\r\n        \"default\": \"\",\r\n        \"required\": true,\r\n        \"placeholder\":\"例如: upload/\"\r\n      },\r\n      {\r\n        \"type\": \"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\": \"baseUrl\",\r\n        \"default\": window.uploader_ip,\r\n        \"hidden\":true,\r\n        \"required\": true,\r\n        \"placeholder\":\"例如: upload/\"\r\n      },\r\n    ],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function () {\r\n				\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const ip = `//${window.uploader_ip}/api/v1/tool/upload`\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'path\', \'/upload/\' + file.filename)\r\n				return {\r\n					url: ip,\r\n					method: \"post\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n        const tmp = res.data\r\n				return {\r\n					img_url: tmp.data.img_url,\r\n					hash: tmp.data.hash\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2023-03-07 03:03:48', '2023-03-07 03:03:48', '1.0.0', '1.0.0', '11');
INSERT INTO `bucketsourcehistory` VALUES ('1a52974d-b176-44e1-979f-8c68044d20c6', '607eb9fe-5f38-4beb-86c0-84b4b97aeba1', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": [\'v5\', \'v4\']\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"switch\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"options\": [\'v5\', \'v4\']\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 05:49:28', '2022-12-12 05:49:28', '1.0.2', '1.0.1', '将switch修改成choice类型并新增choices列表');
INSERT INTO `bucketsourcehistory` VALUES ('1ad8781e-f936-400b-9c21-4e8f9ef0f05e', '1c471b96-6ddd-454e-97f1-7414ca122008', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				// const json = {\r\n        //   \"key\": \"${config.path}\" + file.filename,\r\n        //   \"redirect\": \"${config.redirect}\"\r\n        // }\r\n        // console.log(json)\r\n        // const policy = window.btoa(JSON.stringify(json))\r\n        // // const policy = window.btoa(json)\r\n        // const signature = this.crypto.HmacSHA256(\'${config.secret_access_key}\', policy).toString()\r\n        // console.log(signature.toString())\r\n        // return {\r\n        //   signature,\r\n        //   policy\r\n        // }\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/qyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            access_key_id: \'${config.access_key_id}\',\r\n            secret_access_key: \'${config.secret_access_key}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            redirect: \'${config.redirect}\',\r\n            storage_type: \'${config.storage_type}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        // console.log(res)\r\n        // const formData = new FormData()\r\n        // formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        // formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        // formData.append(\'policy\', res.data.data.policy)\r\n        // formData.append(\'signature\', res.data.data.signature)\r\n        // formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        // formData.append(\'redirect\', \'${config.redirect}\')\r\n        // formData.append(\'charset\', \'UTF-8\')\r\n        // formData.append(\'Upload\', \'Upload to QingStor\')\r\n        // formData.append(\'file\', file.file)\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"PUT\",\r\n          data: file.file,\r\n          headers: {\r\n            // Host: \'${config.area}.${config.host}\',\r\n            Authorization: res.data.data.signature,\r\n            // Date: new Date().toUTCString(),\r\n            Date: new Date((new Date().getTime() + 300000)).toUTCString(),\r\n            \'User-Agent\': \'picgo_plugin_qingstor\',\r\n            \'Content-Type\': \'application/octet-stream\',\r\n          }\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				// const json = {\r\n        //   \"key\": \"${config.path}\" + file.filename,\r\n        //   \"redirect\": \"${config.redirect}\"\r\n        // }\r\n        // console.log(json)\r\n        // const policy = window.btoa(JSON.stringify(json))\r\n        // // const policy = window.btoa(json)\r\n        // const signature = this.crypto.HmacSHA256(\'${config.secret_access_key}\', policy).toString()\r\n        // console.log(signature.toString())\r\n        // return {\r\n        //   signature,\r\n        //   policy\r\n        // }\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/qyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            access_key_id: \'${config.access_key_id}\',\r\n            secret_access_key: \'${config.secret_access_key}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            redirect: \'${config.redirect}\',\r\n            storage_type: \'${config.storage_type}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        // console.log(res)\r\n        // const formData = new FormData()\r\n        // formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        // formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        // formData.append(\'policy\', res.data.data.policy)\r\n        // formData.append(\'signature\', res.data.data.signature)\r\n        // formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        // formData.append(\'redirect\', \'${config.redirect}\')\r\n        // formData.append(\'charset\', \'UTF-8\')\r\n        // formData.append(\'Upload\', \'Upload to QingStor\')\r\n        // formData.append(\'file\', file.file)\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"PUT\",\r\n          data: file.file,\r\n          headers: {\r\n            // Host: \'${config.area}.${config.host}\',\r\n            Authorization: res.data.data.signature,\r\n            Date: new Date().toUTCString(),\r\n            \'User-Agent\': \'picgo_plugin_qingstor\',\r\n            \'Content-Type\': \'application/octet-stream\',\r\n          }\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2022-12-19 06:25:10', '2022-12-19 06:25:10', '1.0.4', '1.0.3', '123');
INSERT INTO `bucketsourcehistory` VALUES ('1b997450-c477-4b61-ae51-88ccf7b103c5', 'b9c4aa49-e966-438e-b7a7-3308795f7394', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n      {\r\n        \"type\": \"string\",\r\n        \"label\":\"指定存储路径\",\r\n        \"field\": \"path\",\r\n        \"default\": \"\",\r\n        \"required\": true,\r\n        \"placeholder\":\"例如: upload/\"\r\n      },\r\n      {\r\n        \"type\": \"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\": \"baseUrl\",\r\n        \"default\": \'http://\' + window.uploader_ip,\r\n        \"hidden\":true,\r\n        \"required\": true,\r\n        \"placeholder\":\"例如: upload/\"\r\n      },\r\n    ],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function () {\r\n				\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const ip = `http://${window.uploader_ip}/api/v1/tool/upload`\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'path\', \'${config.path}\' + file.filename)\r\n				return {\r\n					url: ip,\r\n					method: \"post\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n        const tmp = res.data\r\n				return {\r\n					img_url: tmp.data.img_url,\r\n					hash: tmp.data.hash\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n      {\r\n        \"type\": \"string\",\r\n        \"label\":\"指定存储路径\",\r\n        \"field\": \"accessKey\",\r\n        \"default\": \"\",\r\n        \"required\": true,\r\n        \"placeholder\":\"例如: upload/\"\r\n      },\r\n      {\r\n        \"type\": \"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\": \"baseUrl\",\r\n        \"default\": \'//\' + window.uploader_ip,\r\n        \"hidden\":true,\r\n        \"required\": true,\r\n        \"placeholder\":\"例如: upload/\"\r\n      },\r\n    ],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function () {\r\n				\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const ip = `//${window.uploader_ip}/api/v1/tool/upload`\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'path\', \'/upload/\' + file.filename)\r\n				return {\r\n					url: ip,\r\n					method: \"post\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n        const tmp = res.data\r\n				return {\r\n					img_url: tmp.data.img_url,\r\n					hash: tmp.data.hash\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2023-03-07 03:07:12', '2023-03-07 03:07:12', '1.0.0', '1.0.0', 'asda');
INSERT INTO `bucketsourcehistory` VALUES ('1d68f25e-fccb-4eaa-87e0-e852bfc964b2', '2b25ef86-1b8a-4c7c-806c-b59a0d196ca8', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          //  + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            // Authorization: \'OSS ${config.accessKeyId}:\' + res.data.data.token,\r\n            // Date: new Date().toUTCString(),\r\n            // \'Content-Type\': \'image/png\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 05:39:08', '2022-12-12 05:39:08', '1.0.5', '1.0.5', '去除非必要的注释');
INSERT INTO `bucketsourcehistory` VALUES ('1e94ccbb-bb06-4cbc-839f-3f301ef3f4f7', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名\r\n      getSign: function (options) {\r\n        const data = [\'PUT\']\r\n        data.push(options[\'path\'])\r\n        data.push(options[\'date\'])\r\n        // 签名\r\n        const md5Pwd = this.md5(\'${config.password}\')\r\n        const sign = this.hmacsha1(md5Pwd, data.join(\'&\'))\r\n        return \'UPYUN ${config.operator}:\' + sign\r\n      },\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        // const blobFile = new Blob([file.file], {\r\n        //   type: \'text/plain\'\r\n        // })\r\n        // const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        // const spark = new this.sparkMd5.ArrayBuffer()\r\n        // spark.append(arrayBufferData)\r\n        // const md5 = spark.end()\r\n        // const res = await this.beforeEach(file, md5)\r\n        // const signature = res.data.data\r\n        const date = new Date().toUTCString()\r\n        const sign = this.getSign({\r\n          path: \'/${config.bucket}/${config.path}\' + file.filename,\r\n          date: date\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: sign,\r\n            \'X-Date\': date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名\r\n      getSign: function (options) {\r\n        const data = [\'PUT\']\r\n        data.push(options[\'path\'])\r\n        data.push(options[\'date\'])\r\n        console.log(data)\r\n        // 签名\r\n        const md5Pwd = this.md5(\'${config.password}\')\r\n        console.log(md5Pwd)\r\n        const sign = this.hmacsha1(md5Pwd, data.join(\'&\'))\r\n        return \'UPYUN ${config.operator}:\' + sign\r\n      },\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        // const spark = new this.sparkMd5.ArrayBuffer()\r\n        // spark.append(arrayBufferData)\r\n        // const md5 = spark.end()\r\n        // const res = await this.beforeEach(file, md5)\r\n        // const signature = res.data.data\r\n        const date = new Date().toUTCString()\r\n        const sign = this.getSign({\r\n          path: \'/${config.bucket}/${config.path}\' + file.filename,\r\n          date: date\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: sign,\r\n            \'X-Date\': date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-14 08:21:55', '2022-12-14 08:21:55', '1.0.3', '1.0.3', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('1f8930ac-2c36-4d1c-9507-50305b6b00ff', '2b25ef86-1b8a-4c7c-806c-b59a0d196ca8', '(() => {\r\n  return {\r\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#阿里云-oss\',\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2023-02-23 05:32:03', '2023-02-23 05:32:03', '1.0.7', '1.0.6', '添加文档地址');
INSERT INTO `bucketsourcehistory` VALUES ('238e9d75-5ed8-4a26-b70b-4f57c77d5d55', 'f68dd625-c5ce-4ef2-a3ca-5a843baf76fa', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${file.filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        const tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: tmp\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: \'upload \' + file.filename\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-09 09:59:04', '2022-12-09 09:59:04', '1.0.2', '1.0.2', 'feat:更新commit_messages上传说明');
INSERT INTO `bucketsourcehistory` VALUES ('26d91573-74f8-4ed0-869b-110ed1346f99', '2b25ef86-1b8a-4c7c-806c-b59a0d196ca8', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      getSuffix: function (file) {\r\n        return \'png\'\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: function (file) {\r\n        // 获取signature\r\n        const date = new Date().toUTCString()\r\n        const mimeType = mimeTypes[this.getSuffix(file)]\r\n        const signString = \'PUT\\n\\n\' + mimeType + \'\\n\' + date + \'\\n/${config.bucket}/${config.path}\' + file.filename\r\n        const signature = this.crypto.createHmac(\'sha1\', \'${config.accessKeySecret}\').update(signString).digest(\'base64\')\r\n        console.log(signature)\r\n        return \'OSS ${config.accessKeyId}:\' + signature\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        return {\r\n          url: \'https://${config.bucket}.${options.area}.aliyuncs.com/\' + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'PUT\',\r\n          data: {},\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            Authorization: this.beforeEach(file),\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': this.getSuffix(file)\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      getSuffix: function (file) {\r\n        return \'png\'\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: function (file) {\r\n        // 获取signature\r\n        const date = new Date().toUTCString()\r\n        const mimeType = mimeTypes[this.getSuffix(file)]\r\n        const signString = \'PUT\\n\\n\' + mimeType + \'\\n\' + date + \'\\n/${config.bucket}/${config.path}\' + file.filename\r\n        const signature = this.crypto.createHmac(\'sha1\', \'${config.accessKeySecret}\').update(signString).digest(\'base64\')\r\n        return \'OSS ${config.accessKeyId}:\' + signature\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        return {\r\n          url: \'https://${config.bucket}.${options.area}.aliyuncs.com/${encodeURI(options.path)}${encodeURI(fileName)}\',\r\n          method: \'PUT\',\r\n          data: {},\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            Authorization: this.beforeEach(file),\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': this.getSuffix(file)\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 01:59:56', '2022-12-12 01:59:56', '1.0.3', '1.0.3', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('289eb825-924e-4f7e-8166-2bfb99d732af', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        const signature = res.data.data\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await toArrayBuffer(await toDataURL(blobFile))\r\n        const spark = new SparkMD5.ArrayBuffer()\r\n        spark.append(arrayBufferData)\r\n        const md5 = spark.end()\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: signature.signature,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        const signature = res.data.data\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: signature.signature,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-13 02:24:30', '2022-12-13 02:24:30', '1.0.2', '1.0.2', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('2b18ef49-9a1b-406d-8ec3-67910851b8b9', '2b25ef86-1b8a-4c7c-806c-b59a0d196ca8', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        console.log(this.mime.lookup(file.filename))\r\n        return {\r\n          url: \'https://${config.bucket}.${options.area}.aliyuncs.com/\' + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'PUT\',\r\n          data: {},\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            Authorization: \'OSS ${options.accessKeyId}:\' + res.data.data.token,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': \'png\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        return {\r\n          url: \'https://${config.bucket}.${options.area}.aliyuncs.com/\' + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'PUT\',\r\n          data: {},\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            Authorization: this.beforeEach(file),\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': \'png\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 03:24:55', '2022-12-12 03:24:55', '1.0.4', '1.0.4', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('2c9961cb-9796-4fff-a1c0-c914378c7656', '1c471b96-6ddd-454e-97f1-7414ca122008', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				const json = {\r\n          \"key\": \"${config.path}\" + file.filename,\r\n          \"redirect\": \"${config.redirect}\"\r\n        }\r\n        const policy = window.btoa(JSON.stringify(json))\r\n        const signature = this.crypto.HmacSHA256(\'${config.secret_access_key}\', policy)\r\n        return {\r\n          signature,\r\n          policy\r\n        }\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'policy\', res.policy)\r\n        formData.append(\'signature\', res.signature)\r\n        formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        formData.append(\'redirect\', \'${config.redirect}\')\r\n        formData.append(\'file\', file.file)\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"POST\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				const json = {\r\n          \"key\": \"${config.path}\" + file.filename,\r\n          \"redirect\": \"${config.redirect}\"\r\n        }\r\n        const policy = window.btoa(JSON.stringify(json))\r\n        const signature = this.hmacsha1(\'${config.secret_access_key}\', policy)\r\n        return {\r\n          signature,\r\n          policy\r\n        }\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'policy\', res.policy)\r\n        formData.append(\'signature\', res.signature)\r\n        formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        formData.append(\'redirect\', \'${config.redirect}\')\r\n        formData.append(\'file\', file.file)\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"POST\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2022-12-14 09:50:19', '2022-12-14 09:50:19', '1.0.2', '1.0.2', '11');
INSERT INTO `bucketsourcehistory` VALUES ('2ca05f81-f877-4e06-876e-129c6cdb6f7d', '607eb9fe-5f38-4beb-86c0-84b4b97aeba1', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": [\r\n            { label: \'v5\', value: \'v5\', active: true },\r\n            { label: \'v4\', value: \'v4\', active: false }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": [\'v4\', \'v5\']\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 05:51:47', '2022-12-12 05:51:47', '1.0.2', '1.0.2', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('2d129377-84e8-4ad2-ac99-2f6ccbfe2a3f', '2b25ef86-1b8a-4c7c-806c-b59a0d196ca8', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      fileToBase64: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.accessKeyId}\')\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\' + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            // Authorization: \'OSS ${config.accessKeyId}:\' + res.data.data.token,\r\n            // Date: new Date().toUTCString(),\r\n            // \'Content-Type\': \'image/png\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      fileToBase64: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\' + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'PUT\',\r\n          data: await this.fileToBase64(file.file),\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            Authorization: \'OSS ${config.accessKeyId}:\' + res.data.data.token,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': \'image/png\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 04:49:29', '2022-12-12 04:49:29', '1.0.4', '1.0.4', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('312caaeb-ec0a-4677-b1fd-ee96d8639741', 'b9c4aa49-e966-438e-b7a7-3308795f7394', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n      {\r\n        \"type\": \"string\",\r\n        \"label\":\"指定存储路径\",\r\n        \"field\": \"accessKey\",\r\n        \"default\": \"\",\r\n        \"required\": true,\r\n        \"placeholder\":\"例如: upload/\"\r\n      },\r\n      {\r\n        \"type\": \"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\": \"baseUrl\",\r\n        \"default\": window.uploader_ip,\r\n        \"hidden\":true,\r\n        \"required\": true,\r\n        \"placeholder\":\"例如: upload/\"\r\n      },\r\n    ],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function () {\r\n				\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const ip = `//${window.uploader_ip}/api/v1/tool/upload`\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'path\', \'/upload/\' + file.filename)\r\n				return {\r\n					url: ip,\r\n					method: \"post\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n        const tmp = res.data\r\n				return {\r\n					img_url: tmp.data.img_url,\r\n					hash: tmp.data.hash\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '(() => {\r\n  \r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function () {\r\n				\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const ip = `//${window.uploader_ip}/api/v1/tool/upload`\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'path\', \'/upload/\' + file.filename)\r\n				return {\r\n					url: ip,\r\n					method: \"post\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n        const tmp = res.data\r\n				return {\r\n					img_url: tmp.data.img_url,\r\n					hash: tmp.data.hash\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2023-03-07 03:02:04', '2023-03-07 03:02:04', '1.0.0', '1.0.0', 'ss');
INSERT INTO `bucketsourcehistory` VALUES ('31efbcbb-e3c3-4800-b20b-6d11c2776082', 'f68dd625-c5ce-4ef2-a3ca-5a843baf76fa', '(() => {\r\n  return {\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            // \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}@${config.branch}/\",\r\n            \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${file.filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: tmp\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}@${config.branch}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${file.filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: tmp\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-09 14:28:46', '2022-12-09 14:28:46', '1.0.4', '1.0.4', 'dd');
INSERT INTO `bucketsourcehistory` VALUES ('33b4e88c-3250-46d6-9707-e44a2873a0c7', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        const signature = res.data.data\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        const spark = new SparkMD5.ArrayBuffer()\r\n        spark.append(arrayBufferData)\r\n        const md5 = spark.end()\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: signature.signature,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      toArrayBuffer: function (value) {\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        const signature = res.data.data\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await toDataURL(blobFile))\r\n        const spark = new SparkMD5.ArrayBuffer()\r\n        spark.append(arrayBufferData)\r\n        const md5 = spark.end()\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: signature.signature,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-13 02:26:32', '2022-12-13 02:26:32', '1.0.2', '1.0.2', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('39236fa5-081c-41bb-a6f8-2cd982efb5e5', 'b9c4aa49-e966-438e-b7a7-3308795f7394', '(() => {\r\n  \r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function () {\r\n				\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const ip = `//${window.uploader_ip}/api/v1/tool/upload`\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'path\', \'/upload/\' + file.filename)\r\n				return {\r\n					url: \"ip\",\r\n					method: \"post\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n        const tmp = res.data\r\n				return {\r\n					img_url: tmp.data.img_url,\r\n					hash: tmp.data.hash\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '(() => {\r\n  \r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function () {\r\n				\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const ip = `//${window.uploader_ip}/api/v1/tool/upload`\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'path\', \'/upload/\' + file.filename)\r\n				return {\r\n					url: \"ip\",\r\n					method: \"post\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2023-03-07 02:57:42', '2023-03-07 02:57:42', '1.0.0', '1.0.0', '测试本地存储桶');
INSERT INTO `bucketsourcehistory` VALUES ('3b1919ba-4fb1-4d55-bc1d-ab8a5df7882e', 'f68dd625-c5ce-4ef2-a3ca-5a843baf76fa', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${file.filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        const tmp = \'${config.commit_messages}\'\r\n        console.log(tmp)\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          console.log(keys)\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: tmp\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${file.filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        const tmp = \'${config.commit_messages}\'\r\n        console.log(tmp)\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        console.log(tmp)\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: tmp\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-09 10:01:51', '2022-12-09 10:01:51', '1.0.3', '1.0.3', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('3c57c908-37b5-4e55-8ac8-62a5bd5fd2b4', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      toArrayBuffer: function (value) {\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        const signature = res.data.data\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await toDataURL(blobFile))\r\n        const spark = new SparkMD5.ArrayBuffer()\r\n        spark.append(arrayBufferData)\r\n        const md5 = spark.end()\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: signature.signature,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        const signature = res.data.data\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await toArrayBuffer(await toDataURL(blobFile))\r\n        const spark = new SparkMD5.ArrayBuffer()\r\n        spark.append(arrayBufferData)\r\n        const md5 = spark.end()\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: signature.signature,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-13 02:25:34', '2022-12-13 02:25:34', '1.0.2', '1.0.2', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('3dc6649b-e91d-48a7-b428-c29a9c1a7176', '607eb9fe-5f38-4beb-86c0-84b4b97aeba1', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      useFileToBase64: function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            console.log(reader.result)\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            reject(error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          const content = await this.useFileToBase64(file.file)\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: window.btoa(encodeURI(content))\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      useFileToBase64: function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            console.log(reader.result)\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            reject(error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: await this.useFileToBase64(file.file, true)\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 08:30:38', '2022-12-12 08:30:38', '1.0.2', '1.0.2', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('3fb765b9-4b93-411d-992d-68d78b821780', '607eb9fe-5f38-4beb-86c0-84b4b97aeba1', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId \",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey \",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      useFileToBase64: function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            reject(error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: await this.useFileToBase64(file.file)\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId \",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey \",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      useFileToBase64: function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            reject(error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = {}\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: await this.useFileToBase64(file.file)\r\n          }\r\n        }\r\n        // const res = await this.beforeEach(file)\r\n        // const formData = new FormData()\r\n        // formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        // formData.append(\'policy\', res.data.data.policy)\r\n        // formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        // formData.append(\'success_action_status\', 200)\r\n        // formData.append(\'signature\', res.data.data.signature)\r\n        // formData.append(\'file\', file.file)\r\n        // return {\r\n        //   url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n        //   method: \'POST\',\r\n        //   data: formData,\r\n        //   headers: {\r\n        //     Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n        //     \'Content-Type\': \'multipart/form-data;\'\r\n        //   },\r\n        // }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 06:52:57', '2022-12-12 06:52:57', '1.0.2', '1.0.2', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('40a4dbb0-0bc6-42f1-84be-f33797d581b4', '607eb9fe-5f38-4beb-86c0-84b4b97aeba1', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": [\'v4\', \'v5\']\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": [\'v5\', \'v4\']\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 05:50:12', '2022-12-12 05:50:12', '1.0.2', '1.0.2', '调整两个版本的顺序');
INSERT INTO `bucketsourcehistory` VALUES ('44a9736f-58c5-4195-adbc-9e51d391fbe4', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名\r\n      getSign: function (options) {\r\n        const data = []\r\n        for (let key in options) {\r\n          if (options[key]) {\r\n            data.push(options[key])\r\n          }\r\n        }\r\n        // 签名\r\n        const sign = this.hmacsha1(\'${config.password}\', data.join(\'&\'))\r\n        return \'UPYUN ${config.operator}:\' + sign\r\n      },\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        // const spark = new this.sparkMd5.ArrayBuffer()\r\n        // spark.append(arrayBufferData)\r\n        // const md5 = spark.end()\r\n        // const res = await this.beforeEach(file, md5)\r\n        // const signature = res.data.data\r\n        const date = new Date().toGMTString()\r\n        const sign = this.getSign({\r\n          method: \'PUT\',\r\n          path: \'/${config.path}\' + file.filename,\r\n          date: date,\r\n          policy: \'\',\r\n          // contentMd5: this.md5()\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: sign,\r\n            \'X-Date\': date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名\r\n      getSign: function (options) {\r\n        const data = []\r\n        for (let key in options) {\r\n          if (options[key]) {\r\n            data.push(options[key])\r\n          }\r\n        }\r\n        // 签名\r\n        const sign = this.hmacsha1(\'${config.password}\', data.join(\'&\'))\r\n        return \'UPYUN ${config.operator}:\' + sign\r\n      },\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        console.log(sign)\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        const spark = new this.sparkMd5.ArrayBuffer()\r\n        spark.append(arrayBufferData)\r\n        const md5 = spark.end()\r\n        // const res = await this.beforeEach(file, md5)\r\n        // const signature = res.data.data\r\n        const date = new Date().toGMTString()\r\n        const sign = this.getSign({\r\n          method: \'PUT\',\r\n          path: \'/${config.path}\' + file.filename,\r\n          date: date,\r\n          policy: \'\',\r\n          contentMd5: md5\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: sign,\r\n            \'X-Date\': date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-14 07:52:49', '2022-12-14 07:52:49', '1.0.3', '1.0.3', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('455e456d-5d60-4b95-8e47-0af7810258c3', 'f68dd625-c5ce-4ef2-a3ca-5a843baf76fa', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: \'${config.commit_messages}\'\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: \'${config.commit_messages}\'\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-09 07:01:08', '2022-12-09 07:01:08', '1.0.1', '1.0.0', '更新版本号');
INSERT INTO `bucketsourcehistory` VALUES ('46805e41-2688-497b-bd3e-8db4ca16237e', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名\r\n      getSign: function (options) {\r\n        const data = []\r\n        for (let key in options) {\r\n          if (options[key]) {\r\n            data.push(options[key])\r\n          }\r\n        }\r\n        // 签名\r\n        const sign = this.hmacsha1(\'${config.password}\', data.join(\'&\'))\r\n        return \'UPYUN ${config.operator}:\' + sign\r\n      },\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        console.log(sign)\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        const spark = new this.sparkMd5.ArrayBuffer()\r\n        spark.append(arrayBufferData)\r\n        const md5 = spark.end()\r\n        // const res = await this.beforeEach(file, md5)\r\n        // const signature = res.data.data\r\n        const date = new Date().toGMTString()\r\n        const sign = this.getSign({\r\n          method: \'PUT\',\r\n          path: \'/${config.path}\' + file.filename,\r\n          date: date,\r\n          policy: \'\',\r\n          contentMd5: md5\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: sign,\r\n            \'X-Date\': date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名\r\n      getSign: function (options) {\r\n        const data = []\r\n        for (let key in options) {\r\n          if (options[key]) {\r\n            data.push(options[key])\r\n          }\r\n        }\r\n        // 签名\r\n        const sign = this.hmacsha1(\'${config.password}\', data.join(\'&\'))\r\n        return \'UPYUN ${config.operator}:\' + sign\r\n      },\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        const date = new Date().toGMTString()\r\n        const sign = this.getSign({\r\n          method: \'PUT\',\r\n          path: \'picture-demo/2015.png\',\r\n          date: date,\r\n          policy: \'\',\r\n          contentMd5: \'asdas24ass1d2a4sd\'\r\n        })\r\n        console.log(sign)\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        const spark = new this.sparkMd5.ArrayBuffer()\r\n        spark.append(arrayBufferData)\r\n        const md5 = spark.end()\r\n        const res = await this.beforeEach(file, md5)\r\n        const signature = res.data.data\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: signature.signature,\r\n            // Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-14 07:47:35', '2022-12-14 07:47:35', '1.0.3', '1.0.3', '11');
INSERT INTO `bucketsourcehistory` VALUES ('48736821-4726-4d18-baea-7f9eae284cae', '607eb9fe-5f38-4beb-86c0-84b4b97aeba1', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId \",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey \",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      useFileToBase64: function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            reject(error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = {}\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: await this.useFileToBase64(file.file)\r\n          }\r\n        }\r\n        // const res = await this.beforeEach(file)\r\n        // const formData = new FormData()\r\n        // formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        // formData.append(\'policy\', res.data.data.policy)\r\n        // formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        // formData.append(\'success_action_status\', 200)\r\n        // formData.append(\'signature\', res.data.data.signature)\r\n        // formData.append(\'file\', file.file)\r\n        // return {\r\n        //   url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n        //   method: \'POST\',\r\n        //   data: formData,\r\n        //   headers: {\r\n        //     Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n        //     \'Content-Type\': \'multipart/form-data;\'\r\n        //   },\r\n        // }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId \",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey \",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      useFileToBase64: function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            reject(error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = {}\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: await this.useFileToBase64(file.file)\r\n          }\r\n        }\r\n        // const res = await this.beforeEach(file)\r\n        // const formData = new FormData()\r\n        // formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        // formData.append(\'policy\', res.data.data.policy)\r\n        // formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        // formData.append(\'success_action_status\', 200)\r\n        // formData.append(\'signature\', res.data.data.signature)\r\n        // formData.append(\'file\', file.file)\r\n        // return {\r\n        //   url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n        //   method: \'POST\',\r\n        //   data: formData,\r\n        //   headers: {\r\n        //     Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n        //     \'Content-Type\': \'multipart/form-data;\'\r\n        //   },\r\n        // }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 06:51:40', '2022-12-12 06:51:40', '1.0.2', '1.0.2', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('4ab7912d-0165-43b0-ac29-84685e6f5501', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        const signature = res.data.data\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        const spark = new SparkMD5.ArrayBuffer()\r\n        spark.append(arrayBufferData)\r\n        const md5 = spark.end()\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: signature.signature,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = this.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        const signature = res.data.data\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        const spark = new SparkMD5.ArrayBuffer()\r\n        spark.append(arrayBufferData)\r\n        const md5 = spark.end()\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: signature.signature,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-13 02:28:26', '2022-12-13 02:28:26', '1.0.2', '1.0.2', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('4c68c7ad-c116-4db0-9d7d-61331415b8a9', '607eb9fe-5f38-4beb-86c0-84b4b97aeba1', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId \",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey \",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      useFileToBase64: function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            reject(error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = {}\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: await this.useFileToBase64(file.file)\r\n          }\r\n        }\r\n        // const res = await this.beforeEach(file)\r\n        // const formData = new FormData()\r\n        // formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        // formData.append(\'policy\', res.data.data.policy)\r\n        // formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        // formData.append(\'success_action_status\', 200)\r\n        // formData.append(\'signature\', res.data.data.signature)\r\n        // formData.append(\'file\', file.file)\r\n        // return {\r\n        //   url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n        //   method: \'POST\',\r\n        //   data: formData,\r\n        //   headers: {\r\n        //     Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n        //     \'Content-Type\': \'multipart/form-data;\'\r\n        //   },\r\n        // }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId \",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey \",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        console.log(suffix, version)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = {}\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              contentType: mimeTypes[suffix]\r\n            },\r\n            body: \'asdasdasd\',\r\n            resolveWithFullResponse: true\r\n          }\r\n        }\r\n        // const res = await this.beforeEach(file)\r\n        // const formData = new FormData()\r\n        // formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        // formData.append(\'policy\', res.data.data.policy)\r\n        // formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        // formData.append(\'success_action_status\', 200)\r\n        // formData.append(\'signature\', res.data.data.signature)\r\n        // formData.append(\'file\', file.file)\r\n        // return {\r\n        //   url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n        //   method: \'POST\',\r\n        //   data: formData,\r\n        //   headers: {\r\n        //     Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n        //     \'Content-Type\': \'multipart/form-data;\'\r\n        //   },\r\n        // }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 06:47:54', '2022-12-12 06:47:54', '1.0.2', '1.0.2', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('4fa9854c-c823-437d-bd7f-96da0f387218', '841ef04a-2ad2-451a-993b-6002db343a5b', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#本地存储桶\',\r\n    config: [\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"设定AccessKey\",\r\n        \"field\":\"accessKey\",\r\n        \"default\":\"mVGmIkaYxQTAdr2OVQrlxZVTUMMZHPl1DfCSCusn\",\r\n        \"required\":true,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"请输入AccessKey\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"设定SecretKey\",\r\n        \"field\":\"secretKey\",\r\n        \"default\":\"okkbqh5DaceVTr1AVfOCnH6XLi_xynQo7DlA2SQM\",\r\n        \"required\":true,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"请输入SecretKey\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"设定存储空间名\",\r\n        \"field\":\"bucket_name\",\r\n        \"default\":\"yaju\",\r\n        \"required\":true,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"设定访问网址\",\r\n        \"field\":\"domain\",\r\n        \"default\":\"https://imgs.itchenliang.club/\",\r\n        \"required\":true,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"请输入访问网址\"\r\n      },\r\n      {\r\n        \"type\":\"option\",\r\n        \"label\":\"设定存储区域\",\r\n        \"field\":\"area\",\r\n        \"default\":\"qiniu.region.z0\",\r\n        \"required\":true,\r\n        \"hidden\": true,\r\n        \"options\": [\r\n          {\r\n            \"label\": \"华东区域\",\r\n            \"value\": \"qiniu.region.z0\"\r\n          },\r\n          {\r\n            \"label\": \"华北区域\",\r\n            \"value\": \"qiniu.region.z1\"\r\n          },\r\n          {\r\n            \"label\": \"华南区域\",\r\n            \"value\": \"qiniu.region.z2\"\r\n          },\r\n          {\r\n            \"label\": \"北美区域\",\r\n            \"value\": \"qiniu.region.na0\"\r\n          },\r\n          {\r\n            \"label\": \"新加坡区域\",\r\n            \"value\": \"qiniu.region.as0\"\r\n          }\r\n        ],\r\n        \"placeholder\":\"请选择存储区域\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"设定网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"例如: imageView2/0/q/75|watermark/2/text/6ZuF5bGF5peF5ri45rCR5a6_/font/5a6L5L2T/fontsize/360/fill/I0ZBRkFGQQ==/dissolve/100/gravity/SouthEast/dx/15/dy/15|imageslim\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"指定存储路径\",\r\n        \"field\":\"path\",\r\n        \"default\":\"picture-ped-img/\",\r\n        \"required\":false,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"例如: img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\":\"baseUrl\",\r\n        \"hidden\":true,\r\n        \"default\":\"${config.domain}\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      beforeEach: async function (file) {\r\n        return await this.axios({\r\n          url: \'http://124.222.54.192:3002/api/v1/tool/qiniuSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKey: \'${config.accessKey}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket_name}\',\r\n            expires: 7200\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'token\', res.data.data.token)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'fname\', file.filename)\r\n        return {\r\n          url: \'https://upload.qiniup.com/\',\r\n          method: \'post\',\r\n          data: formData\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data\r\n        return {\r\n          img_url: tmp.key,\r\n          hash: tmp.hash\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"设定AccessKey\",\r\n        \"field\":\"accessKey\",\r\n        \"default\":\"mVGmIkaYxQTAdr2OVQrlxZVTUMMZHPl1DfCSCusn\",\r\n        \"required\":true,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"请输入AccessKey\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"设定SecretKey\",\r\n        \"field\":\"secretKey\",\r\n        \"default\":\"okkbqh5DaceVTr1AVfOCnH6XLi_xynQo7DlA2SQM\",\r\n        \"required\":true,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"请输入SecretKey\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"设定存储空间名\",\r\n        \"field\":\"bucket_name\",\r\n        \"default\":\"yaju\",\r\n        \"required\":true,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"设定访问网址\",\r\n        \"field\":\"domain\",\r\n        \"default\":\"https://imgs.itchenliang.club/\",\r\n        \"required\":true,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"请输入访问网址\"\r\n      },\r\n      {\r\n        \"type\":\"option\",\r\n        \"label\":\"设定存储区域\",\r\n        \"field\":\"area\",\r\n        \"default\":\"qiniu.region.z0\",\r\n        \"required\":true,\r\n        \"hidden\": true,\r\n        \"options\": [\r\n          {\r\n            \"label\": \"华东区域\",\r\n            \"value\": \"qiniu.region.z0\"\r\n          },\r\n          {\r\n            \"label\": \"华北区域\",\r\n            \"value\": \"qiniu.region.z1\"\r\n          },\r\n          {\r\n            \"label\": \"华南区域\",\r\n            \"value\": \"qiniu.region.z2\"\r\n          },\r\n          {\r\n            \"label\": \"北美区域\",\r\n            \"value\": \"qiniu.region.na0\"\r\n          },\r\n          {\r\n            \"label\": \"新加坡区域\",\r\n            \"value\": \"qiniu.region.as0\"\r\n          }\r\n        ],\r\n        \"placeholder\":\"请选择存储区域\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"设定网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"例如: imageView2/0/q/75|watermark/2/text/6ZuF5bGF5peF5ri45rCR5a6_/font/5a6L5L2T/fontsize/360/fill/I0ZBRkFGQQ==/dissolve/100/gravity/SouthEast/dx/15/dy/15|imageslim\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"指定存储路径\",\r\n        \"field\":\"path\",\r\n        \"default\":\"picture-ped-img/\",\r\n        \"required\":false,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"例如: img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\":\"baseUrl\",\r\n        \"hidden\":true,\r\n        \"default\":\"${config.domain}\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      beforeEach: async function (file) {\r\n        return await this.axios({\r\n          url: \'http://124.222.54.192:3002/api/v1/tool/qiniuSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKey: \'${config.accessKey}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket_name}\',\r\n            expires: 7200\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'token\', res.data.data.token)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'fname\', file.filename)\r\n        return {\r\n          url: \'https://upload.qiniup.com/\',\r\n          method: \'post\',\r\n          data: formData\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data\r\n        return {\r\n          img_url: tmp.key,\r\n          hash: tmp.hash\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2023-02-23 05:23:12', '2023-02-23 05:23:12', '1.0.1', '1.0.0', '新增文档地址');
INSERT INTO `bucketsourcehistory` VALUES ('5429c55a-7e6e-4695-9f82-e7a7ebd3d2eb', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = this.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        const signature = res.data.data\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        const spark = new SparkMD5.ArrayBuffer()\r\n        spark.append(arrayBufferData)\r\n        const md5 = spark.end()\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: signature.signature,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        const signature = res.data.data\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        const spark = new SparkMD5.ArrayBuffer()\r\n        spark.append(arrayBufferData)\r\n        const md5 = spark.end()\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: signature.signature,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-13 02:27:34', '2022-12-13 02:27:34', '1.0.2', '1.0.2', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('57f4db50-c322-4ec2-ab7a-88b0901d7fe3', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        const spark = new this.sparkMd5.ArrayBuffer()\r\n        spark.append(arrayBufferData)\r\n        const md5 = spark.end()\r\n        const res = await this.beforeEach(file, md5)\r\n        const signature = res.data.data\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: signature.signature,\r\n            // Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        const spark = new this.sparkMd5.ArrayBuffer()\r\n        spark.append(arrayBufferData)\r\n        const md5 = spark.end()\r\n        const res = await this.beforeEach(file, md5)\r\n        const signature = res.data.data\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: signature.signature,\r\n            // Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-13 10:00:56', '2022-12-13 10:00:56', '1.0.3', '1.0.2', '修改后台环境地址');
INSERT INTO `bucketsourcehistory` VALUES ('5975e917-72ae-4559-bc68-852797a7a5f5', '1c471b96-6ddd-454e-97f1-7414ca122008', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				const json = {\r\n          \"key\": \"${config.path}\" + file.filename,\r\n          \"redirect\": \"${config.redirect}\"\r\n        }\r\n        const policy = window.btoa(JSON.stringify(json))\r\n        const signature = this.crypto.HmacSHA256(\'${config.secret_access_key}\', policy).toString()\r\n        console.log(signature.toString())\r\n        return {\r\n          signature,\r\n          policy\r\n        }\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'policy\', res.policy)\r\n        formData.append(\'signature\', res.signature)\r\n        formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        formData.append(\'redirect\', \'${config.redirect}\')\r\n        formData.append(\'file\', file.file)\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"POST\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				const json = {\r\n          \"key\": \"${config.path}\" + file.filename,\r\n          \"redirect\": \"${config.redirect}\"\r\n        }\r\n        const policy = window.btoa(JSON.stringify(json))\r\n        const signature = this.crypto.HmacSHA256(\'${config.secret_access_key}\', policy)\r\n        console.log(signature)\r\n        return {\r\n          signature,\r\n          policy\r\n        }\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'policy\', res.policy)\r\n        formData.append(\'signature\', res.signature)\r\n        formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        formData.append(\'redirect\', \'${config.redirect}\')\r\n        formData.append(\'file\', file.file)\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"POST\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2022-12-14 09:57:25', '2022-12-14 09:57:25', '1.0.2', '1.0.2', '11');
INSERT INTO `bucketsourcehistory` VALUES ('59a559a9-cb1c-47c9-b485-222703bf67ea', '2b25ef86-1b8a-4c7c-806c-b59a0d196ca8', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      getSuffix: function (file) {\r\n        return \'png\'\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: function (file) {\r\n        // 获取signature\r\n        const date = new Date().toUTCString()\r\n        const mimeType = mimeTypes[this.getSuffix(file)]\r\n        const signString = \'PUT\\n\\n\' + mimeType + \'\\n\' + date + \'\\n/${config.bucket}/${config.path}\' + file.filename\r\n        const signature = this.crypto.createHmac(\'sha1\', \'${config.accessKeySecret}\').update(signString).digest(\'base64\')\r\n        return \'OSS ${config.accessKeyId}:\' + signature\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        return {\r\n          url: \'https://${config.bucket}.${options.area}.aliyuncs.com/${encodeURI(options.path)}${encodeURI(fileName)}\',\r\n          method: \'PUT\',\r\n          data: {},\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            Authorization: this.beforeEach(file),\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': this.getSuffix(file)\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        return {\r\n          url: \'https://${config.bucket}.${options.area}.aliyuncs.com/${encodeURI(options.path)}${encodeURI(fileName)}\',\r\n          method: \'PUT\',\r\n          data: {},\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            Authorization: signature,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': mime.lookup(fileName)\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 01:49:10', '2022-12-12 01:49:10', '1.0.3', '1.0.2', '完成request请求配置');
INSERT INTO `bucketsourcehistory` VALUES ('5b04ceb8-0ad3-43e5-a97b-02f7160231af', '2b25ef86-1b8a-4c7c-806c-b59a0d196ca8', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({\r\n          method: \'post\',\r\n          url: \'http://124.222.54.192/api/v1/tool/aliSign\',\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        return {\r\n          url: \'https://${config.bucket}.${options.area}.aliyuncs.com/\' + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'PUT\',\r\n          data: {},\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            Authorization: this.beforeEach(file),\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': \'png\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      getSuffix: function (file) {\r\n        return \'png\'\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: function (file) {\r\n        // 获取signature\r\n        const date = new Date().toUTCString()\r\n        const mimeType = mimeTypes[this.getSuffix(file)]\r\n        const signString = \'PUT\\n\\n\' + mimeType + \'\\n\' + date + \'\\n/${config.bucket}/${config.path}\' + file.filename\r\n        const signature = this.crypto.createHmac(\'sha1\', \'${config.accessKeySecret}\').update(signString).digest(\'base64\')\r\n        console.log(signature)\r\n        return \'OSS ${config.accessKeyId}:\' + signature\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        return {\r\n          url: \'https://${config.bucket}.${options.area}.aliyuncs.com/\' + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'PUT\',\r\n          data: {},\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            Authorization: this.beforeEach(file),\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': this.getSuffix(file)\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 03:18:20', '2022-12-12 03:18:20', '1.0.4', '1.0.3', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('5b5432aa-fb31-4dfb-a42b-5f54484106a1', '1c471b96-6ddd-454e-97f1-7414ca122008', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				// const json = {\r\n        //   \"key\": \"${config.path}\" + file.filename,\r\n        //   \"redirect\": \"${config.redirect}\"\r\n        // }\r\n        // console.log(json)\r\n        // const policy = window.btoa(JSON.stringify(json))\r\n        // // const policy = window.btoa(json)\r\n        // const signature = this.crypto.HmacSHA256(\'${config.secret_access_key}\', policy).toString()\r\n        // console.log(signature.toString())\r\n        // return {\r\n        //   signature,\r\n        //   policy\r\n        // }\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/qyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            access_key_id: \'${config.access_key_id}\',\r\n            secret_access_key: \'${config.secret_access_key}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            redirect: \'${config.redirect}\',\r\n            storage_type: \'${config.storage_type}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        // console.log(res)\r\n        // const formData = new FormData()\r\n        // formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        // formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        // formData.append(\'policy\', res.data.data.policy)\r\n        // formData.append(\'signature\', res.data.data.signature)\r\n        // formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        // formData.append(\'redirect\', \'${config.redirect}\')\r\n        // formData.append(\'charset\', \'UTF-8\')\r\n        // formData.append(\'Upload\', \'Upload to QingStor\')\r\n        // formData.append(\'file\', file.file)\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"PUT\",\r\n          data: file.file,\r\n          headers: {\r\n            // Host: \'${config.area}.${config.host}\',\r\n            Authorization: res.data.data.signature,\r\n            Date: new Date().toUTCString(),\r\n            \'User-Agent\': UserAgent,\r\n            \'Content-Type\': \'application/octet-stream\',\r\n          }\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				// const json = {\r\n        //   \"key\": \"${config.path}\" + file.filename,\r\n        //   \"redirect\": \"${config.redirect}\"\r\n        // }\r\n        // console.log(json)\r\n        // const policy = window.btoa(JSON.stringify(json))\r\n        // // const policy = window.btoa(json)\r\n        // const signature = this.crypto.HmacSHA256(\'${config.secret_access_key}\', policy).toString()\r\n        // console.log(signature.toString())\r\n        // return {\r\n        //   signature,\r\n        //   policy\r\n        // }\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/qyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            access_key_id: \'${config.access_key_id}\',\r\n            secret_access_key: \'${config.secret_access_key}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            redirect: \'${config.redirect}\',\r\n            storage_type: \'${config.storage_type}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        const formData = new FormData()\r\n        formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        formData.append(\'redirect\', \'${config.redirect}\')\r\n        formData.append(\'charset\', \'UTF-8\')\r\n        formData.append(\'Upload\', \'Upload to QingStor\')\r\n        formData.append(\'file\', file.file)\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"POST\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2022-12-19 06:21:35', '2022-12-19 06:21:35', '1.0.3', '1.0.3', '123');
INSERT INTO `bucketsourcehistory` VALUES ('5c80d1e8-562f-4e9d-a975-45bfdb4be304', '607eb9fe-5f38-4beb-86c0-84b4b97aeba1', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId \",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey \",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = useGetSuffix(file.filename)\r\n        console.log(suffix, version)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = {}\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              contentType: mimeTypes[suffix]\r\n            },\r\n            body: \'asdasdasd\',\r\n            resolveWithFullResponse: true\r\n          }\r\n        }\r\n        // const res = await this.beforeEach(file)\r\n        // const formData = new FormData()\r\n        // formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        // formData.append(\'policy\', res.data.data.policy)\r\n        // formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        // formData.append(\'success_action_status\', 200)\r\n        // formData.append(\'signature\', res.data.data.signature)\r\n        // formData.append(\'file\', file.file)\r\n        // return {\r\n        //   url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n        //   method: \'POST\',\r\n        //   data: formData,\r\n        //   headers: {\r\n        //     Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n        //     \'Content-Type\': \'multipart/form-data;\'\r\n        //   },\r\n        // }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId \",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey \",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 06:30:49', '2022-12-12 06:30:49', '1.0.2', '1.0.2', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('5d5849f9-49cc-4375-a1e8-d8761c7c6757', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const signature = res.data.data\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        const spark = new this.sparkMd5.ArrayBuffer()\r\n        spark.append(arrayBufferData)\r\n        const md5 = spark.end()\r\n        const res = await this.beforeEach(file, md5)\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: signature.signature,\r\n            // Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        const signature = res.data.data\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        const spark = new this.sparkMd5.ArrayBuffer()\r\n        spark.append(arrayBufferData)\r\n        const md5 = spark.end()\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: signature.signature,\r\n            // Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-13 03:01:34', '2022-12-13 03:01:34', '1.0.2', '1.0.2', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('5f178ca8-21cb-4833-a569-069cdd4d5ea8', '607eb9fe-5f38-4beb-86c0-84b4b97aeba1', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId \",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey \",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 06:00:25', '2022-12-12 06:00:25', '1.0.2', '1.0.2', '啊啊');
INSERT INTO `bucketsourcehistory` VALUES ('64a011dc-154e-4d87-a1e2-2e72f8d3a687', 'f68dd625-c5ce-4ef2-a3ca-5a843baf76fa', '(() => {\r\n  return {\r\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#github--jsdelivr\',\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            // \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}@${config.branch}/\",\r\n            \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${file.filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: tmp\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            // \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}@${config.branch}/\",\r\n            \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${file.filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: tmp\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2023-02-23 05:33:22', '2023-02-23 05:33:22', '1.0.5', '1.0.4', '添加文档地址');
INSERT INTO `bucketsourcehistory` VALUES ('6588fa05-818b-4f4f-8c68-ee2d43ec5bb0', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#又拍云uss\',\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名，本示例试用的是基本认证\r\n      // 参考：https://help.upyun.com/knowledge-base/object_storage_authorization/\r\n      getSign: function (options) {\r\n        // const data = [\'PUT\']\r\n        // data.push(options[\'path\'])\r\n        // data.push(options[\'date\'])\r\n        // // 签名\r\n        // const md5Pwd = this.md5(\'${config.password}\')\r\n        // const sign = this.hmacsha1(md5Pwd, data.join(\'&\'))\r\n        // return \'UPYUN ${config.operator}:\' + sign\r\n\r\n        // const md5Pwd = this.md5(\'${config.password}\')\r\n        const sign = window.btoa(\'${config.operator}:${config.password}\')\r\n        return sign\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({\r\n          url: \'http://\' + window.uploader_ip + \'/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const date = new Date().toUTCString()\r\n        const sign = this.getSign({\r\n          path: \'/${config.bucket}/${config.path}\' + file.filename,\r\n          date: date\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: \'Basic \' + sign,\r\n            \'X-Date\': date,\r\n            Date: date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#又拍云uss\',\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名，本示例试用的是基本认证\r\n      // 参考：https://help.upyun.com/knowledge-base/object_storage_authorization/\r\n      getSign: function (options) {\r\n        // const data = [\'PUT\']\r\n        // data.push(options[\'path\'])\r\n        // data.push(options[\'date\'])\r\n        // // 签名\r\n        // const md5Pwd = this.md5(\'${config.password}\')\r\n        // const sign = this.hmacsha1(md5Pwd, data.join(\'&\'))\r\n        // return \'UPYUN ${config.operator}:\' + sign\r\n\r\n        // const md5Pwd = this.md5(\'${config.password}\')\r\n        const sign = window.btoa(\'${config.operator}:${config.password}\')\r\n        return sign\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const date = new Date().toUTCString()\r\n        const sign = this.getSign({\r\n          path: \'/${config.bucket}/${config.path}\' + file.filename,\r\n          date: date\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: \'Basic \' + sign,\r\n            \'X-Date\': date,\r\n            Date: date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2023-03-07 03:11:28', '2023-03-07 03:11:28', '1.0.4', '1.0.4', '将写死的ip地址替换成当前服务所用后端ip');
INSERT INTO `bucketsourcehistory` VALUES ('66173851-9bda-454a-aecd-cdcd34a82d22', '607eb9fe-5f38-4beb-86c0-84b4b97aeba1', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: file.file\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: file.file\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-13 10:00:08', '2022-12-13 10:00:08', '1.0.3', '1.0.2', '修改后台环境地址');
INSERT INTO `bucketsourcehistory` VALUES ('66fcf944-fac0-4212-adf4-0342954b4380', '1c471b96-6ddd-454e-97f1-7414ca122008', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				const json = {\r\n          \"key\": \"${config.path}\" + file.filename,\r\n          \"redirect\": \"${config.redirect}\"\r\n        }\r\n        const policy = window.btoa(JSON.stringify(json))\r\n        const signature = this.hmacsha1(\'${config.secret_access_key}\', policy)\r\n        return {\r\n          signature,\r\n          policy\r\n        }\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'policy\', res.policy)\r\n        formData.append(\'signature\', res.signature)\r\n        formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        formData.append(\'redirect\', \'${config.redirect}\')\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"POST\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"username\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function () {\r\n				const json = {\r\n          \"key\": \"\"\r\n        }\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n				return {\r\n					url: \"\",\r\n					method: \"\",\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2022-12-14 09:40:52', '2022-12-14 09:40:52', '1.0.2', '1.0.1', '完善request');
INSERT INTO `bucketsourcehistory` VALUES ('6f177694-d247-445e-a867-1b345cd46300', '607eb9fe-5f38-4beb-86c0-84b4b97aeba1', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": [\r\n            { label: \'v5\', value: \'v5\', active: true },\r\n            { label: \'v4\', value: \'v4\', active: false }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 05:56:28', '2022-12-12 05:56:28', '1.0.2', '1.0.2', '调整choices的类型定义');
INSERT INTO `bucketsourcehistory` VALUES ('73f38179-f5f5-4a5b-80ab-177063363307', '607eb9fe-5f38-4beb-86c0-84b4b97aeba1', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        // const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          const formData = new FormData()\r\n          formData.append(\'key\', \'${config.path}\' + file.filename)\r\n          formData.append(\'file\', file.file)\r\n          return {\r\n            method: \'POST\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/\',\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: signature.signature,\r\n              // \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: formData\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        // const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          const formData = new FormData()\r\n          formData.append(\'key\', \'${config.path}\' + file.filename)\r\n          formData.append(\'file\', file.file)\r\n          return {\r\n            method: \'POST\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/\',\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              // \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: formData\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 07:40:27', '2022-12-12 07:40:27', '1.0.2', '1.0.2', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('76fbc37b-502a-494a-b0ac-e823fc720758', 'b9c4aa49-e966-438e-b7a7-3308795f7394', '(() => {\r\n  \r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function () {\r\n				\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const ip = `//${window.uploader_ip}/api/v1/tool/upload`\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'path\', \'/upload/\' + file.filename)\r\n				return {\r\n					url: ip,\r\n					method: \"post\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n        const tmp = res.data\r\n				return {\r\n					img_url: tmp.data.img_url,\r\n					hash: tmp.data.hash\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '(() => {\r\n  \r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function () {\r\n				\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const ip = `//${window.uploader_ip}/api/v1/tool/upload`\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'path\', \'/upload/\' + file.filename)\r\n				return {\r\n					url: \"ip\",\r\n					method: \"post\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n        const tmp = res.data\r\n				return {\r\n					img_url: tmp.data.img_url,\r\n					hash: tmp.data.hash\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2023-03-07 02:58:31', '2023-03-07 02:58:31', '1.0.0', '1.0.0', '啊啊');
INSERT INTO `bucketsourcehistory` VALUES ('797af0d7-05a4-4f7c-bfa5-b6ea49ed48c0', '607eb9fe-5f38-4beb-86c0-84b4b97aeba1', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      useFileToBase64: function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            console.log(reader.result)\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            reject(error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename,\r\n            base64: await this.useFileToBase64(file.file, true)\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            // signature.base64\r\n            data: file.file\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      useFileToBase64: function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            console.log(reader.result)\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            reject(error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename,\r\n            base64: await this.useFileToBase64(file.file, true)\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: signature.base64\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 08:45:58', '2022-12-12 08:45:58', '1.0.2', '1.0.2', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('7ad50d1e-d3fb-452d-9977-0f774d4de12e', '1c471b96-6ddd-454e-97f1-7414ca122008', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				const json = {\r\n          \"key\": \"${config.path}\" + file.filename,\r\n          \"redirect\": \"${config.redirect}\"\r\n        }\r\n        const policy = window.btoa(JSON.stringify(json))\r\n        const signature = this.crypto.HmacSHA256(\'${config.secret_access_key}\', policy)\r\n        console.log(signature)\r\n        return {\r\n          signature,\r\n          policy\r\n        }\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'policy\', res.policy)\r\n        formData.append(\'signature\', res.signature)\r\n        formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        formData.append(\'redirect\', \'${config.redirect}\')\r\n        formData.append(\'file\', file.file)\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"POST\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				const json = {\r\n          \"key\": \"${config.path}\" + file.filename,\r\n          \"redirect\": \"${config.redirect}\"\r\n        }\r\n        const policy = window.btoa(JSON.stringify(json))\r\n        const signature = window.btoa(this.crypto.HmacSHA256(\'${config.secret_access_key}\', policy))\r\n        return {\r\n          signature,\r\n          policy\r\n        }\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'policy\', res.policy)\r\n        formData.append(\'signature\', res.signature)\r\n        formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        formData.append(\'redirect\', \'${config.redirect}\')\r\n        formData.append(\'file\', file.file)\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"POST\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2022-12-14 09:53:25', '2022-12-14 09:53:25', '1.0.2', '1.0.2', '12');
INSERT INTO `bucketsourcehistory` VALUES ('7c6f31bf-2bf6-4420-ae43-b6db184c79e8', 'f68dd625-c5ce-4ef2-a3ca-5a843baf76fa', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${file.filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: tmp\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${file.filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        const tmp = \'${config.commit_messages}\'\r\n        console.log(tmp)\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          console.log(keys)\r\n          if (keys[0] === \'file\') {\r\n            console.log(file[keys[1]])\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: tmp\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-09 10:03:42', '2022-12-09 10:03:42', '1.0.3', '1.0.3', '解决const报错问题');
INSERT INTO `bucketsourcehistory` VALUES ('7dc435a4-80ec-42bc-9bba-b0bfda793610', 'f4fe0250-e404-4b27-891e-49d2b67e5e3e', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"用户名\",\r\n        \"field\":\"username\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入Gitee用户名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"仓库地址\",\r\n        \"field\":\"repo\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入仓库名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"分支\",\r\n        \"field\":\"branch\",\r\n        \"default\":\"master\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入分支名称\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"私人令牌\",\r\n        \"field\":\"token\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入私人令牌\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"存储路径\",\r\n        \"field\":\"path\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入存储路径\"\r\n      },\r\n      {\r\n        \"type\":\"option\",\r\n        \"label\":\"自定义路径\",\r\n        \"field\":\"customPath\",\r\n        \"default\":\"default\",\r\n        \"required\":false,\r\n        \"optios\": [\r\n          { label: \"默认\", value: \"default\" },\r\n          { label: \"年\", value: \"year\" },\r\n          { label: \"年月\", value: \"year-month\" },\r\n          { label: \"年月日\", value: \"year-month-day\" }\r\n        ],\r\n        \"placeholder\":\"请选择自定义路径\"\r\n      },\r\n      {\r\n        \"tips\":\"${filename} - 文件名占位符<br/>${createdAt} - 创建时间\",\r\n        \"type\":\"string\",\r\n        \"label\":\"提交内容\",\r\n        \"field\":\"commit_messages\",\r\n        \"default\":\"upload ${filename} by pic bed\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入提交内容\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\":\"baseUrl\",\r\n        \"hidden\":true,\r\n        \"default\":\"https://gitee.com/${username}/${repo}/raw/${branch}/\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://gitee.com/api/v5/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        const formData = new FormData()\r\n        formData.append(\'branch\', \'${config.branch}\')\r\n        formData.append(\'content\', content)\r\n        formData.append(\'access_token\', \'${config.token}\')\r\n        formData.append(\'message\', tmp)\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"用户名\",\r\n        \"field\":\"username\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入Gitee用户名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"仓库地址\",\r\n        \"field\":\"repo\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入仓库名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"分支\",\r\n        \"field\":\"branch\",\r\n        \"default\":\"master\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入分支名称\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"私人令牌\",\r\n        \"field\":\"token\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入私人令牌\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"存储路径\",\r\n        \"field\":\"path\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入存储路径\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"自定义路径\",\r\n        \"field\":\"customPath\",\r\n        \"default\":\"default\",\r\n        \"required\":false,\r\n        \"optios\": [\r\n          { label: \"默认\", value: \"default\" },\r\n          { label: \"年\", value: \"year\" },\r\n          { label: \"年月\", value: \"year-month\" },\r\n          { label: \"年月日\", value: \"year-month-day\" }\r\n        ],\r\n        \"placeholder\":\"请选择自定义路径\"\r\n      },\r\n      {\r\n        \"tips\":\"${filename} - 文件名占位符<br/>${createdAt} - 创建时间\",\r\n        \"type\":\"string\",\r\n        \"label\":\"提交内容\",\r\n        \"field\":\"commit_messages\",\r\n        \"default\":\"upload ${filename} by pic bed\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入提交内容\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\":\"baseUrl\",\r\n        \"hidden\":true,\r\n        \"default\":\"https://gitee.com/${username}/${repo}/raw/${branch}/\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://gitee.com/api/v5/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        const formData = new FormData()\r\n        formData.append(\'branch\', \'${config.branch}\')\r\n        formData.append(\'content\', content)\r\n        formData.append(\'access_token\', \'${config.token}\')\r\n        formData.append(\'message\', tmp)\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n		}\r\n	}\r\n})()', '2022-12-10 06:35:11', '2022-12-10 06:35:11', '1.0.1', '1.0.1', '啊啊');
INSERT INTO `bucketsourcehistory` VALUES ('820e8bc9-b31a-460f-97e2-8cb5fe17292d', 'f68dd625-c5ce-4ef2-a3ca-5a843baf76fa', '(() => {\r\n  return {\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}@${config.branch}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${file.filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: tmp\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}/${config.branch}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${file.filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: tmp\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-09 14:27:32', '2022-12-09 14:27:32', '1.0.4', '1.0.4', '啊啊');
INSERT INTO `bucketsourcehistory` VALUES ('85f591fe-27a7-49d9-bb2e-4e3638e6fbd8', 'f68dd625-c5ce-4ef2-a3ca-5a843baf76fa', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${file.filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        const tmp = \'${config.commit_messages}\'\r\n        console.log(tmp)\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          console.log(keys)\r\n          if (keys[0] === \'file\') {\r\n            console.log(file[keys[1]])\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: tmp\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${file.filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        const tmp = \'${config.commit_messages}\'\r\n        console.log(tmp)\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          console.log(keys)\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: tmp\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-09 10:02:56', '2022-12-09 10:02:56', '1.0.3', '1.0.3', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('868d0e73-6dd2-42de-9d6a-861126f55d98', '1c471b96-6ddd-454e-97f1-7414ca122008', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				const json = {\r\n          \"key\": \"${config.path}\" + file.filename,\r\n          \"redirect\": \"${config.redirect}\"\r\n        }\r\n        const policy = window.btoa(JSON.stringify(json))\r\n        const signature = window.btoa(this.crypto.HmacSHA256(\'${config.secret_access_key}\', policy))\r\n        return {\r\n          signature,\r\n          policy\r\n        }\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'policy\', res.policy)\r\n        formData.append(\'signature\', res.signature)\r\n        formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        formData.append(\'redirect\', \'${config.redirect}\')\r\n        formData.append(\'file\', file.file)\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"POST\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				const json = {\r\n          \"key\": \"${config.path}\" + file.filename,\r\n          \"redirect\": \"${config.redirect}\"\r\n        }\r\n        const policy = window.btoa(JSON.stringify(json))\r\n        const signature = this.crypto.HmacSHA256(\'${config.secret_access_key}\', policy)\r\n        return {\r\n          signature,\r\n          policy\r\n        }\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'policy\', res.policy)\r\n        formData.append(\'signature\', res.signature)\r\n        formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        formData.append(\'redirect\', \'${config.redirect}\')\r\n        formData.append(\'file\', file.file)\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"POST\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2022-12-14 09:52:40', '2022-12-14 09:52:40', '1.0.2', '1.0.2', '11');
INSERT INTO `bucketsourcehistory` VALUES ('879b5e10-8f1b-4a5f-b5ce-2edc7a3147d5', '607eb9fe-5f38-4beb-86c0-84b4b97aeba1', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        // const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data.signature\r\n          const formData = new FormData()\r\n          formData.append(\'key\', \'${config.path}\' + file.filename)\r\n          formData.append(\'file\', file.file)\r\n          const arr = signature.split(\'&\')\r\n          arr.forEach(item => {\r\n            const keys = item.split(\'=\')\r\n            formData.append(keys[0], keys[1])\r\n          })\r\n          return {\r\n            method: \'POST\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/\',\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: signature,\r\n              // \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: formData\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        // const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          const formData = new FormData()\r\n          formData.append(\'key\', \'${config.path}\' + file.filename)\r\n          formData.append(\'file\', file.file)\r\n          return {\r\n            method: \'POST\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/\',\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: signature.signature,\r\n              // \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: formData\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 07:49:57', '2022-12-12 07:49:57', '1.0.2', '1.0.2', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('88edaa1c-9bf5-4098-ad84-01f8d5e3ee1d', '607eb9fe-5f38-4beb-86c0-84b4b97aeba1', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      useFileToBase64: function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            reject(error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: await this.useFileToBase64(file.file)\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId \",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey \",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      useFileToBase64: function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            reject(error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: await this.useFileToBase64(file.file)\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 07:04:31', '2022-12-12 07:04:31', '1.0.2', '1.0.2', '啊啊');
INSERT INTO `bucketsourcehistory` VALUES ('8c06604b-d3eb-4cd4-bc36-4943badea463', 'b9c4aa49-e966-438e-b7a7-3308795f7394', '(() => {\r\n  \r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function () {\r\n				\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const ip = `//${window.uploader_ip}/api/v1/tool/upload`\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'path\', \'/upload/\' + file.filename)\r\n				return {\r\n					url: \"ip\",\r\n					method: \"post\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '(() => {\r\n  console.log(window.uploader_ip)\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function () {\r\n				\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n				return {\r\n					url: \"\",\r\n					method: \"\",\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2023-03-07 02:57:02', '2023-03-07 02:57:02', '1.0.0', '1.0.0', '11');
INSERT INTO `bucketsourcehistory` VALUES ('902b1c61-11f0-494f-b39e-f6d206c596ef', '2b25ef86-1b8a-4c7c-806c-b59a0d196ca8', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      fileToBase64: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          //  + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            // Authorization: \'OSS ${config.accessKeyId}:\' + res.data.data.token,\r\n            // Date: new Date().toUTCString(),\r\n            // \'Content-Type\': \'image/png\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename,\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      fileToBase64: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          //  + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            // Authorization: \'OSS ${config.accessKeyId}:\' + res.data.data.token,\r\n            // Date: new Date().toUTCString(),\r\n            // \'Content-Type\': \'image/png\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 04:57:46', '2022-12-12 04:57:46', '1.0.4', '1.0.4', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('908c18ce-6953-4f98-816b-b88ece97b0e4', '1c471b96-6ddd-454e-97f1-7414ca122008', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"username\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function () {\r\n				const json = {\r\n          \"key\": \"\"\r\n        }\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n				return {\r\n					url: \"\",\r\n					method: \"\",\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"username\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function () {\r\n				\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n				return {\r\n					url: \"\",\r\n					method: \"\",\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2022-12-14 09:32:04', '2022-12-14 09:32:04', '1.0.1', '1.0.1', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('91abec3f-91d2-42b8-b12f-e440b1de0ee2', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名\r\n      getSign: function (options) {\r\n        const data = []\r\n        for (let key in options) {\r\n          if (options[key]) {\r\n            data.push(options[key])\r\n          }\r\n        }\r\n        // 签名\r\n        const sign = this.hmacsha1(\'${config.password}\', data.join(\'&\'))\r\n        return \'UPYUN ${config.operator}:\' + sign\r\n      },\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        const date = new Date().toGMTString()\r\n        const sign = this.getSign({\r\n          method: \'PUT\',\r\n          path: \'picture-demo/2015.png\',\r\n          date: date,\r\n          policy: \'\',\r\n          contentMd5: \'asdas24ass1d2a4sd\'\r\n        })\r\n        console.log(sign)\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        const spark = new this.sparkMd5.ArrayBuffer()\r\n        spark.append(arrayBufferData)\r\n        const md5 = spark.end()\r\n        const res = await this.beforeEach(file, md5)\r\n        const signature = res.data.data\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: signature.signature,\r\n            // Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名\r\n      getSign: function (options) {\r\n        const {method, path} = options\r\n        const data = [method, path]\r\n        [\'date\', \'policy\', \'contentMd5\'].forEach(item => {\r\n          if (options[item]) {\r\n            data.push(options[item])\r\n          }\r\n        })\r\n        // 签名\r\n        const sign = this.hmacsha1(\'${config.password}\', data.join(\'&\'))\r\n        return \'UPYUN ${config.operator}:\' + sign\r\n      },\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        const date = new Date().toGMTString()\r\n        const sign = this.getSign({\r\n          method: \'PUT\',\r\n          path: \'picture-demo/2015.png\',\r\n          date: date,\r\n          policy: \'\',\r\n          contentMd5: \'asdas24ass1d2a4sd\'\r\n        })\r\n        console.log(sign)\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        const spark = new this.sparkMd5.ArrayBuffer()\r\n        spark.append(arrayBufferData)\r\n        const md5 = spark.end()\r\n        const res = await this.beforeEach(file, md5)\r\n        const signature = res.data.data\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: signature.signature,\r\n            // Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-14 07:42:34', '2022-12-14 07:42:34', '1.0.3', '1.0.3', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('92875bc8-7f79-4c85-90a8-3380b2089510', '1c471b96-6ddd-454e-97f1-7414ca122008', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				// const json = {\r\n        //   \"key\": \"${config.path}\" + file.filename,\r\n        //   \"redirect\": \"${config.redirect}\"\r\n        // }\r\n        // console.log(json)\r\n        // const policy = window.btoa(JSON.stringify(json))\r\n        // // const policy = window.btoa(json)\r\n        // const signature = this.crypto.HmacSHA256(\'${config.secret_access_key}\', policy).toString()\r\n        // console.log(signature.toString())\r\n        // return {\r\n        //   signature,\r\n        //   policy\r\n        // }\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/qyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            access_key_id: \'${config.access_key_id}\',\r\n            secret_access_key: \'${config.secret_access_key}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            redirect: \'${config.redirect}\',\r\n            storage_type: \'${config.storage_type}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        const formData = new FormData()\r\n        formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        formData.append(\'redirect\', \'${config.redirect}\')\r\n        formData.append(\'file\', file.file)\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"POST\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				const json = {\r\n          \"key\": \"${config.path}\" + file.filename,\r\n          \"redirect\": \"${config.redirect}\"\r\n        }\r\n        console.log(json)\r\n        const policy = window.btoa(JSON.stringify(json))\r\n        // const policy = window.btoa(json)\r\n        const signature = this.crypto.HmacSHA256(\'${config.secret_access_key}\', policy).toString()\r\n        console.log(signature.toString())\r\n        return {\r\n          signature,\r\n          policy\r\n        }\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'policy\', res.policy)\r\n        formData.append(\'signature\', res.signature)\r\n        formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        formData.append(\'redirect\', \'${config.redirect}\')\r\n        formData.append(\'file\', file.file)\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"POST\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2022-12-19 03:01:53', '2022-12-19 03:01:53', '1.0.3', '1.0.2', '111');
INSERT INTO `bucketsourcehistory` VALUES ('95267508-26d6-47f1-965d-c625b2cf2a91', '2b25ef86-1b8a-4c7c-806c-b59a0d196ca8', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-13 10:00:34', '2022-12-13 10:00:34', '1.0.6', '1.0.5', '修改后台环境地址');
INSERT INTO `bucketsourcehistory` VALUES ('9e070f9b-c494-44b1-847e-5dcabeb4bf50', '1c471b96-6ddd-454e-97f1-7414ca122008', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"username\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function () {\r\n				\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n				return {\r\n					url: \"\",\r\n					method: \"\",\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定用户名\",\r\n				\"field\":\"username\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入用户名\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function () {\r\n				\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n				return {\r\n					url: \"\",\r\n					method: \"\",\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2022-12-14 09:29:56', '2022-12-14 09:29:56', '1.0.1', '1.0.0', '配置config列表');
INSERT INTO `bucketsourcehistory` VALUES ('a2047c62-d439-4e7e-8212-366b76d07504', '1c471b96-6ddd-454e-97f1-7414ca122008', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				const json = {\r\n          \"key\": \"${config.path}\" + file.filename,\r\n          \"redirect\": \"${config.redirect}\"\r\n        }\r\n        // const policy = window.btoa(JSON.stringify(json))\r\n        const policy = window.btoa(json)\r\n        const signature = this.crypto.HmacSHA256(\'${config.secret_access_key}\', policy).toString()\r\n        console.log(signature.toString())\r\n        return {\r\n          signature,\r\n          policy\r\n        }\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'policy\', res.policy)\r\n        formData.append(\'signature\', res.signature)\r\n        formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        formData.append(\'redirect\', \'${config.redirect}\')\r\n        formData.append(\'file\', file.file)\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"POST\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				const json = {\r\n          \"key\": \"${config.path}\" + file.filename,\r\n          \"redirect\": \"${config.redirect}\"\r\n        }\r\n        const policy = window.btoa(JSON.stringify(json))\r\n        const signature = this.crypto.HmacSHA256(\'${config.secret_access_key}\', policy).toString()\r\n        console.log(signature.toString())\r\n        return {\r\n          signature,\r\n          policy\r\n        }\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'policy\', res.policy)\r\n        formData.append(\'signature\', res.signature)\r\n        formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        formData.append(\'redirect\', \'${config.redirect}\')\r\n        formData.append(\'file\', file.file)\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"POST\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2022-12-19 02:39:32', '2022-12-19 02:39:32', '1.0.2', '1.0.2', '11');
INSERT INTO `bucketsourcehistory` VALUES ('a28f16af-e3d6-44e7-b432-46090aa0ac79', '2b25ef86-1b8a-4c7c-806c-b59a0d196ca8', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      fileToBase64: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          //  + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            // Authorization: \'OSS ${config.accessKeyId}:\' + res.data.data.token,\r\n            // Date: new Date().toUTCString(),\r\n            // \'Content-Type\': \'image/png\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      fileToBase64: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + ffile.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          //  + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            // Authorization: \'OSS ${config.accessKeyId}:\' + res.data.data.token,\r\n            // Date: new Date().toUTCString(),\r\n            // \'Content-Type\': \'image/png\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 04:52:02', '2022-12-12 04:52:02', '1.0.4', '1.0.4', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('a86d89d9-0a19-47ce-a871-ee98dac1702c', 'f4fe0250-e404-4b27-891e-49d2b67e5e3e', '(() => {\r\n	return {\r\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#gitee\',\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"用户名\",\r\n        \"field\":\"username\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入Gitee用户名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"仓库名称\",\r\n        \"field\":\"repo\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入仓库名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"分支\",\r\n        \"field\":\"branch\",\r\n        \"default\":\"master\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入分支名称\"\r\n      },\r\n      {\r\n        \"type\":\"password\",\r\n        \"label\":\"私人令牌\",\r\n        \"field\":\"token\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入私人令牌\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"存储路径\",\r\n        \"field\":\"path\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入存储路径\"\r\n      },\r\n      {\r\n        \"type\":\"option\",\r\n        \"label\":\"自定义路径\",\r\n        \"field\":\"customPath\",\r\n        \"default\":\"default\",\r\n        \"required\":false,\r\n        \"options\": [\r\n          { label: \"默认\", value: \"default\" },\r\n          { label: \"年\", value: \"year\" },\r\n          { label: \"年月\", value: \"year-month\" },\r\n          { label: \"年月日\", value: \"year-month-day\" }\r\n        ],\r\n        \"placeholder\":\"请选择自定义路径\"\r\n      },\r\n      {\r\n        \"tips\":\"${filename} - 文件名占位符<br/>${createdAt} - 创建时间\",\r\n        \"type\":\"string\",\r\n        \"label\":\"提交内容\",\r\n        \"field\":\"commit_messages\",\r\n        \"default\":\"upload ${file.filename} by pic bed\",\r\n        \"required\":false,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"请输入提交内容\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\":\"baseUrl\",\r\n        \"hidden\":true,\r\n        \"default\":\"https://gitee.com/${config.username}/${config.repo}/raw/${config.branch}/\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://gitee.com/api/v5/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        const formData = new FormData()\r\n        formData.append(\'branch\', \'${config.branch}\')\r\n        formData.append(\'content\', content)\r\n        formData.append(\'access_token\', \'${config.token}\')\r\n        formData.append(\'message\', tmp)\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"用户名\",\r\n        \"field\":\"username\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入Gitee用户名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"仓库名称\",\r\n        \"field\":\"repo\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入仓库名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"分支\",\r\n        \"field\":\"branch\",\r\n        \"default\":\"master\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入分支名称\"\r\n      },\r\n      {\r\n        \"type\":\"password\",\r\n        \"label\":\"私人令牌\",\r\n        \"field\":\"token\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入私人令牌\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"存储路径\",\r\n        \"field\":\"path\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入存储路径\"\r\n      },\r\n      {\r\n        \"type\":\"option\",\r\n        \"label\":\"自定义路径\",\r\n        \"field\":\"customPath\",\r\n        \"default\":\"default\",\r\n        \"required\":false,\r\n        \"options\": [\r\n          { label: \"默认\", value: \"default\" },\r\n          { label: \"年\", value: \"year\" },\r\n          { label: \"年月\", value: \"year-month\" },\r\n          { label: \"年月日\", value: \"year-month-day\" }\r\n        ],\r\n        \"placeholder\":\"请选择自定义路径\"\r\n      },\r\n      {\r\n        \"tips\":\"${filename} - 文件名占位符<br/>${createdAt} - 创建时间\",\r\n        \"type\":\"string\",\r\n        \"label\":\"提交内容\",\r\n        \"field\":\"commit_messages\",\r\n        \"default\":\"upload ${file.filename} by pic bed\",\r\n        \"required\":false,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"请输入提交内容\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\":\"baseUrl\",\r\n        \"hidden\":true,\r\n        \"default\":\"https://gitee.com/${config.username}/${config.repo}/raw/${config.branch}/\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://gitee.com/api/v5/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        const formData = new FormData()\r\n        formData.append(\'branch\', \'${config.branch}\')\r\n        formData.append(\'content\', content)\r\n        formData.append(\'access_token\', \'${config.token}\')\r\n        formData.append(\'message\', tmp)\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n		}\r\n	}\r\n})()', '2023-02-23 05:30:07', '2023-02-23 05:30:07', '1.0.4', '1.0.3', '添加文档地址');
INSERT INTO `bucketsourcehistory` VALUES ('a99db820-61b8-40c9-99a9-65092b6dfb02', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名\r\n      getSign: function (options) {\r\n        // const data = [\'PUT\']\r\n        // data.push(options[\'path\'])\r\n        // data.push(options[\'date\'])\r\n        // // 签名\r\n        // const md5Pwd = this.md5(\'${config.password}\')\r\n        // const sign = this.hmacsha1(md5Pwd, data.join(\'&\'))\r\n        // return \'UPYUN ${config.operator}:\' + sign\r\n\r\n        const md5Pwd = this.md5(\'${config.password}\')\r\n        const operator = \'${config.operator}\'\r\n        const sign = this.hmacsha1(operator + \':\' + md5Pwd)\r\n        return sign\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const date = new Date().toUTCString()\r\n        const sign = this.getSign({\r\n          path: \'/${config.bucket}/${config.path}\' + file.filename,\r\n          date: date\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: sign,\r\n            \'X-Date\': date,\r\n            Date: date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名\r\n      getSign: function (options) {\r\n        const data = [\'PUT\']\r\n        data.push(options[\'path\'])\r\n        data.push(options[\'date\'])\r\n        // 签名\r\n        const md5Pwd = this.md5(\'${config.password}\')\r\n        const sign = this.hmacsha1(md5Pwd, data.join(\'&\'))\r\n        return \'UPYUN ${config.operator}:\' + sign\r\n      },\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        // const blobFile = new Blob([file.file], {\r\n        //   type: \'text/plain\'\r\n        // })\r\n        // const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        // const spark = new this.sparkMd5.ArrayBuffer()\r\n        // spark.append(arrayBufferData)\r\n        // const md5 = spark.end()\r\n        // const res = await this.beforeEach(file, md5)\r\n        // const signature = res.data.data\r\n        const date = new Date().toUTCString()\r\n        const sign = this.getSign({\r\n          path: \'/${config.bucket}/${config.path}\' + file.filename,\r\n          date: date\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: sign,\r\n            \'X-Date\': date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-14 08:44:57', '2022-12-14 08:44:57', '1.0.3', '1.0.3', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('aa78fbdd-0641-4a20-b129-d78d9369e167', '2b25ef86-1b8a-4c7c-806c-b59a0d196ca8', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: tmp\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '[{\"type\": \"string\", \"label\": \"AppID\", \"value\": \"appId\", \"default\": \"\", \"required\": true, \"placeholder\": \"请输入leancloud的appid\"}, {\"type\": \"string\", \"label\": \"appkey\", \"value\": \"appkey\", \"default\": \"123\", \"required\": false, \"placeholder\": \"请输入leancloud的appid\"}, {\"type\": \"string\", \"label\": \"访问前缀\", \"value\": \"baseUrl\", \"hidden\": true, \"default\": \"https://raw.githubusercontent.com/${username}/${repo}\", \"required\": false, \"placeholder\": \"请输入baseUrl\"}]', '2022-12-11 06:20:08', '2022-12-11 06:20:08', '1.0.1', '1.0.0', '更新插件的config配置');
INSERT INTO `bucketsourcehistory` VALUES ('abbd7615-4dab-4098-9f32-c2bcb6eda6d4', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: file.file\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '[{\"type\": \"string\", \"label\": \"AppID\", \"value\": \"appId\", \"default\": \"\", \"required\": true, \"placeholder\": \"请输入leancloud的appid\"}, {\"type\": \"string\", \"label\": \"appkey\", \"value\": \"appkey\", \"default\": \"123\", \"required\": false, \"placeholder\": \"请输入leancloud的appid\"}, {\"type\": \"string\", \"label\": \"访问前缀\", \"value\": \"baseUrl\", \"hidden\": true, \"default\": \"https://raw.githubusercontent.com/${username}/${repo}\", \"required\": false, \"placeholder\": \"请输入baseUrl\"}]', '2022-12-12 09:49:48', '2022-12-12 09:49:48', '1.0.0', '1.0.0', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('b01511e5-5ffa-44ff-a25f-809a65ea187e', '1c471b96-6ddd-454e-97f1-7414ca122008', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				// const json = {\r\n        //   \"key\": \"${config.path}\" + file.filename,\r\n        //   \"redirect\": \"${config.redirect}\"\r\n        // }\r\n        // console.log(json)\r\n        // const policy = window.btoa(JSON.stringify(json))\r\n        // // const policy = window.btoa(json)\r\n        // const signature = this.crypto.HmacSHA256(\'${config.secret_access_key}\', policy).toString()\r\n        // console.log(signature.toString())\r\n        // return {\r\n        //   signature,\r\n        //   policy\r\n        // }\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/qyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            access_key_id: \'${config.access_key_id}\',\r\n            secret_access_key: \'${config.secret_access_key}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            redirect: \'${config.redirect}\',\r\n            storage_type: \'${config.storage_type}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        // console.log(res)\r\n        // const formData = new FormData()\r\n        // formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        // formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        // formData.append(\'policy\', res.data.data.policy)\r\n        // formData.append(\'signature\', res.data.data.signature)\r\n        // formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        // formData.append(\'redirect\', \'${config.redirect}\')\r\n        // formData.append(\'charset\', \'UTF-8\')\r\n        // formData.append(\'Upload\', \'Upload to QingStor\')\r\n        // formData.append(\'file\', file.file)\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"PUT\",\r\n          data: file.file,\r\n          headers: {\r\n            // Host: \'${config.area}.${config.host}\',\r\n            Authorization: res.data.data.signature,\r\n            Date: new Date().toUTCString(),\r\n            \'User-Agent\': \'picgo_plugin_qingstor\',\r\n            \'Content-Type\': \'application/octet-stream\',\r\n          }\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				// const json = {\r\n        //   \"key\": \"${config.path}\" + file.filename,\r\n        //   \"redirect\": \"${config.redirect}\"\r\n        // }\r\n        // console.log(json)\r\n        // const policy = window.btoa(JSON.stringify(json))\r\n        // // const policy = window.btoa(json)\r\n        // const signature = this.crypto.HmacSHA256(\'${config.secret_access_key}\', policy).toString()\r\n        // console.log(signature.toString())\r\n        // return {\r\n        //   signature,\r\n        //   policy\r\n        // }\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/qyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            access_key_id: \'${config.access_key_id}\',\r\n            secret_access_key: \'${config.secret_access_key}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            redirect: \'${config.redirect}\',\r\n            storage_type: \'${config.storage_type}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        // console.log(res)\r\n        // const formData = new FormData()\r\n        // formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        // formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        // formData.append(\'policy\', res.data.data.policy)\r\n        // formData.append(\'signature\', res.data.data.signature)\r\n        // formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        // formData.append(\'redirect\', \'${config.redirect}\')\r\n        // formData.append(\'charset\', \'UTF-8\')\r\n        // formData.append(\'Upload\', \'Upload to QingStor\')\r\n        // formData.append(\'file\', file.file)\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"PUT\",\r\n          data: file.file,\r\n          headers: {\r\n            // Host: \'${config.area}.${config.host}\',\r\n            Authorization: res.data.data.signature,\r\n            Date: new Date().toUTCString(),\r\n            \'User-Agent\': UserAgent,\r\n            \'Content-Type\': \'application/octet-stream\',\r\n          }\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2022-12-19 06:22:15', '2022-12-19 06:22:15', '1.0.3', '1.0.3', '123');
INSERT INTO `bucketsourcehistory` VALUES ('b169791c-9969-46be-a270-337aa060bddf', 'b9c4aa49-e966-438e-b7a7-3308795f7394', '(() => {\r\n  console.log(window.uploader_ip)\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function () {\r\n				\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n				return {\r\n					url: \"\",\r\n					method: \"\",\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function () {\r\n				\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n				return {\r\n					url: \"\",\r\n					method: \"\",\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2023-03-07 02:54:29', '2023-03-07 02:54:29', '1.0.0', '1.0.0', 'aaa');
INSERT INTO `bucketsourcehistory` VALUES ('b214f394-bb20-4161-848b-9e52131fdb5e', '607eb9fe-5f38-4beb-86c0-84b4b97aeba1', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      useFileToBase64: function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            console.log(reader.result)\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            reject(error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: await this.useFileToBase64(file.file, true)\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      useFileToBase64: function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            reject(error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: await this.useFileToBase64(file.file, true)\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 08:12:51', '2022-12-12 08:12:51', '1.0.2', '1.0.2', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('b2f4adaf-6f80-4884-b623-4aeac3fcdece', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名\r\n      getSign: function (options) {\r\n        // const data = [\'PUT\']\r\n        // data.push(options[\'path\'])\r\n        // data.push(options[\'date\'])\r\n        // // 签名\r\n        // const md5Pwd = this.md5(\'${config.password}\')\r\n        // const sign = this.hmacsha1(md5Pwd, data.join(\'&\'))\r\n        // return \'UPYUN ${config.operator}:\' + sign\r\n\r\n        console.log(\'${config.operator}:${config.password}\')\r\n        const sign = window.btoa(\'${config.operator}:${config.password}\')\r\n        return sign\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const date = new Date().toUTCString()\r\n        const sign = this.getSign({\r\n          path: \'/${config.bucket}/${config.path}\' + file.filename,\r\n          date: date\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: \'Basic \' + sign,\r\n            \'X-Date\': date,\r\n            Date: date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名\r\n      getSign: function (options) {\r\n        // const data = [\'PUT\']\r\n        // data.push(options[\'path\'])\r\n        // data.push(options[\'date\'])\r\n        // // 签名\r\n        // const md5Pwd = this.md5(\'${config.password}\')\r\n        // const sign = this.hmacsha1(md5Pwd, data.join(\'&\'))\r\n        // return \'UPYUN ${config.operator}:\' + sign\r\n\r\n        const sign = window.btoa(\'${config.operator}:${config.password}\')\r\n        return sign\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const date = new Date().toUTCString()\r\n        const sign = this.getSign({\r\n          path: \'/${config.bucket}/${config.path}\' + file.filename,\r\n          date: date\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: \'Basic \' + sign,\r\n            \'X-Date\': date,\r\n            Date: date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-14 08:50:04', '2022-12-14 08:50:04', '1.0.3', '1.0.3', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('b5ca4f59-01db-4aea-9c49-f5a4c977626d', '607eb9fe-5f38-4beb-86c0-84b4b97aeba1', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      useFileToBase64: function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            console.log(reader.result)\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            reject(error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename,\r\n            base64: await this.useFileToBase64(file.file)\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: signature.base64\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      useFileToBase64: function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            console.log(reader.result)\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            reject(error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          const content = await this.useFileToBase64(file.file)\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: window.btoa(encodeURI(content))\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 08:41:04', '2022-12-12 08:41:04', '1.0.2', '1.0.2', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('b82b76f5-79ac-4e39-b31c-d022fab7fa60', '607eb9fe-5f38-4beb-86c0-84b4b97aeba1', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      useFileToBase64: function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            reject(error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: await this.useFileToBase64(file.file, true)\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      useFileToBase64: function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            reject(error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: await this.useFileToBase64(file.file)\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 08:09:17', '2022-12-12 08:09:17', '1.0.2', '1.0.2', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('b910f85c-c09f-4e92-8568-e97b99be12cc', 'f4fe0250-e404-4b27-891e-49d2b67e5e3e', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"用户名\",\r\n        \"field\":\"username\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入Gitee用户名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"仓库地址\",\r\n        \"field\":\"repo\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入仓库名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"分支\",\r\n        \"field\":\"branch\",\r\n        \"default\":\"master\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入分支名称\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"私人令牌\",\r\n        \"field\":\"token\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入私人令牌\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"存储路径\",\r\n        \"field\":\"path\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入存储路径\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"自定义路径\",\r\n        \"field\":\"customPath\",\r\n        \"default\":\"default\",\r\n        \"required\":false,\r\n        \"optios\": [\r\n          { label: \"默认\", value: \"default\" },\r\n          { label: \"年\", value: \"year\" },\r\n          { label: \"年月\", value: \"year-month\" },\r\n          { label: \"年月日\", value: \"year-month-day\" }\r\n        ],\r\n        \"placeholder\":\"请选择自定义路径\"\r\n      },\r\n      {\r\n        \"tips\":\"${filename} - 文件名占位符<br/>${createdAt} - 创建时间\",\r\n        \"type\":\"string\",\r\n        \"label\":\"提交内容\",\r\n        \"field\":\"commit_messages\",\r\n        \"default\":\"upload ${filename} by pic bed\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入提交内容\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\":\"baseUrl\",\r\n        \"hidden\":true,\r\n        \"default\":\"https://gitee.com/${username}/${repo}/raw/${branch}/\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://gitee.com/api/v5/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        const formData = new FormData()\r\n        formData.append(\'branch\', \'${config.branch}\')\r\n        formData.append(\'content\', content)\r\n        formData.append(\'access_token\', \'${config.token}\')\r\n        formData.append(\'message\', tmp)\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"用户名\",\r\n        \"field\":\"username\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入Gitee用户名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"仓库地址\",\r\n        \"field\":\"repo\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入仓库名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"分支\",\r\n        \"field\":\"branch\",\r\n        \"default\":\"master\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入分支名称\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"私人令牌\",\r\n        \"field\":\"token\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入私人令牌\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"存储路径\",\r\n        \"field\":\"path\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入存储路径\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"自定义路径\",\r\n        \"field\":\"customPath\",\r\n        \"default\":\"default\",\r\n        \"required\":false,\r\n        \"optios\": [\r\n          { label: \"默认\", value: \"default\" },\r\n          { label: \"年\", value: \"year\" },\r\n          { label: \"年月\", value: \"year-month\" },\r\n          { label: \"年月日\", value: \"year-month-day\" }\r\n        ],\r\n        \"placeholder\":\"请选择自定义路径\"\r\n      },\r\n      {\r\n        \"tips\":\"${filename} - 文件名占位符<br/>${createdAt} - 创建时间\",\r\n        \"type\":\"string\",\r\n        \"label\":\"提交内容\",\r\n        \"field\":\"commit_messages\",\r\n        \"default\":\"upload ${filename} by pic bed\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入提交内容\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\":\"baseUrl\",\r\n        \"hidden\":true,\r\n        \"default\":\"https://gitee.com/${username}/${repo}/raw/${branch}/\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function () {\r\n				\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n				return {\r\n					url: \"\",\r\n					method: \"\",\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2022-12-10 06:32:21', '2022-12-10 06:32:21', '1.0.1', '1.0.0', '完善request请求配置');
INSERT INTO `bucketsourcehistory` VALUES ('bc38d61a-8205-4a2a-b1da-272f5f81c342', '607eb9fe-5f38-4beb-86c0-84b4b97aeba1', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#腾讯云-cos\',\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: file.file\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: file.file\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2023-02-23 05:32:26', '2023-02-23 05:32:26', '1.0.4', '1.0.3', '添加文档地址');
INSERT INTO `bucketsourcehistory` VALUES ('c034bc4d-fd4c-4c6b-be60-3bd928ecc9cd', 'f68dd625-c5ce-4ef2-a3ca-5a843baf76fa', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: \'${config.commit_messages}\'\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: \'${config.commit_messages}\'\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-09 08:33:21', '2022-12-09 08:33:21', '1.0.2', '1.0.1', '更新版本：添加request返回说明');
INSERT INTO `bucketsourcehistory` VALUES ('c173c245-c608-4aa2-abb8-e4fa9a21cc18', 'f4fe0250-e404-4b27-891e-49d2b67e5e3e', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"用户名\",\r\n        \"field\":\"username\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入Gitee用户名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"仓库名称\",\r\n        \"field\":\"repo\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入仓库名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"分支\",\r\n        \"field\":\"branch\",\r\n        \"default\":\"master\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入分支名称\"\r\n      },\r\n      {\r\n        \"type\":\"password\",\r\n        \"label\":\"私人令牌\",\r\n        \"field\":\"token\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入私人令牌\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"存储路径\",\r\n        \"field\":\"path\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入存储路径\"\r\n      },\r\n      {\r\n        \"type\":\"option\",\r\n        \"label\":\"自定义路径\",\r\n        \"field\":\"customPath\",\r\n        \"default\":\"default\",\r\n        \"required\":false,\r\n        \"options\": [\r\n          { label: \"默认\", value: \"default\" },\r\n          { label: \"年\", value: \"year\" },\r\n          { label: \"年月\", value: \"year-month\" },\r\n          { label: \"年月日\", value: \"year-month-day\" }\r\n        ],\r\n        \"placeholder\":\"请选择自定义路径\"\r\n      },\r\n      {\r\n        \"tips\":\"${filename} - 文件名占位符<br/>${createdAt} - 创建时间\",\r\n        \"type\":\"string\",\r\n        \"label\":\"提交内容\",\r\n        \"field\":\"commit_messages\",\r\n        \"default\":\"upload ${file.filename} by pic bed\",\r\n        \"required\":false,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"请输入提交内容\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\":\"baseUrl\",\r\n        \"hidden\":true,\r\n        \"default\":\"https://gitee.com/${config.username}/${config.repo}/raw/${config.branch}/\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://gitee.com/api/v5/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        const formData = new FormData()\r\n        formData.append(\'branch\', \'${config.branch}\')\r\n        formData.append(\'content\', content)\r\n        formData.append(\'access_token\', \'${config.token}\')\r\n        formData.append(\'message\', tmp)\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"用户名\",\r\n        \"field\":\"username\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入Gitee用户名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"仓库地址\",\r\n        \"field\":\"repo\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入仓库名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"分支\",\r\n        \"field\":\"branch\",\r\n        \"default\":\"master\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入分支名称\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"私人令牌\",\r\n        \"field\":\"token\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入私人令牌\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"存储路径\",\r\n        \"field\":\"path\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入存储路径\"\r\n      },\r\n      {\r\n        \"type\":\"option\",\r\n        \"label\":\"自定义路径\",\r\n        \"field\":\"customPath\",\r\n        \"default\":\"default\",\r\n        \"required\":false,\r\n        \"options\": [\r\n          { label: \"默认\", value: \"default\" },\r\n          { label: \"年\", value: \"year\" },\r\n          { label: \"年月\", value: \"year-month\" },\r\n          { label: \"年月日\", value: \"year-month-day\" }\r\n        ],\r\n        \"placeholder\":\"请选择自定义路径\"\r\n      },\r\n      {\r\n        \"tips\":\"${filename} - 文件名占位符<br/>${createdAt} - 创建时间\",\r\n        \"type\":\"string\",\r\n        \"label\":\"提交内容\",\r\n        \"field\":\"commit_messages\",\r\n        \"default\":\"upload ${file.filename} by pic bed\",\r\n        \"required\":false,\r\n        \"hidden\": true,\r\n        \"placeholder\":\"请输入提交内容\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\":\"baseUrl\",\r\n        \"hidden\":true,\r\n        \"default\":\"https://gitee.com/${config.username}/${config.repo}/raw/${config.branch}/\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://gitee.com/api/v5/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        const formData = new FormData()\r\n        formData.append(\'branch\', \'${config.branch}\')\r\n        formData.append(\'content\', content)\r\n        formData.append(\'access_token\', \'${config.token}\')\r\n        formData.append(\'message\', tmp)\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n		}\r\n	}\r\n})()', '2023-02-23 05:03:59', '2023-02-23 05:03:59', '1.0.3', '1.0.2', '修改仓库地址为仓库名称，以及私人令牌类型改为password');
INSERT INTO `bucketsourcehistory` VALUES ('c17d9aee-4299-49e5-8c7b-9dad096fdf59', '1c471b96-6ddd-454e-97f1-7414ca122008', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				const json = {\r\n          \"key\": \"${config.path}\" + file.filename,\r\n          \"redirect\": \"${config.redirect}\"\r\n        }\r\n        const policy = window.btoa(JSON.stringify(json))\r\n        const signature = this.hmacsha1(\'${config.secret_access_key}\', policy)\r\n        return {\r\n          signature,\r\n          policy\r\n        }\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'policy\', res.policy)\r\n        formData.append(\'signature\', res.signature)\r\n        formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        formData.append(\'redirect\', \'${config.redirect}\')\r\n        formData.append(\'file\', file.file)\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"POST\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				const json = {\r\n          \"key\": \"${config.path}\" + file.filename,\r\n          \"redirect\": \"${config.redirect}\"\r\n        }\r\n        const policy = window.btoa(JSON.stringify(json))\r\n        const signature = this.hmacsha1(\'${config.secret_access_key}\', policy)\r\n        return {\r\n          signature,\r\n          policy\r\n        }\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'policy\', res.policy)\r\n        formData.append(\'signature\', res.signature)\r\n        formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        formData.append(\'redirect\', \'${config.redirect}\')\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"POST\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2022-12-14 09:44:52', '2022-12-14 09:44:52', '1.0.2', '1.0.2', '11');
INSERT INTO `bucketsourcehistory` VALUES ('c1c7949d-1893-4931-a1e1-c3ebc5910c70', '2b25ef86-1b8a-4c7c-806c-b59a0d196ca8', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        return {\r\n          url: \'https://${config.bucket}.${options.area}.aliyuncs.com/${encodeURI(options.path)}${encodeURI(fileName)}\',\r\n          method: \'PUT\',\r\n          data: {},\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            Authorization: signature,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': mime.lookup(fileName)\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: tmp\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 01:42:08', '2022-12-12 01:42:08', '1.0.2', '1.0.2', 'aaa');
INSERT INTO `bucketsourcehistory` VALUES ('c34d6697-5252-4979-a4a4-d4ef2576107f', '2b25ef86-1b8a-4c7c-806c-b59a0d196ca8', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\' + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'PUT\',\r\n          data: \'123asd4as2dasd\',\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            Authorization: \'OSS ${config.accessKeyId}:\' + res.data.data.token,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': \'image/png\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        return {\r\n          url: \'https://${config.bucket}.${options.area}.aliyuncs.com/\' + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'PUT\',\r\n          data: \'123asd4as2dasd\',\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            Authorization: \'OSS ${options.accessKeyId}:\' + res.data.data.token,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': \'image/png\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 03:30:41', '2022-12-12 03:30:41', '1.0.4', '1.0.4', 'ss');
INSERT INTO `bucketsourcehistory` VALUES ('c45fd4c6-c862-4bd1-bc52-a8a72bda527b', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名\r\n      getSign: function (options) {\r\n        const {method, path} = options\r\n        const data = [method, path]\r\n        [\'date\', \'policy\', \'contentMd5\'].forEach(item => {\r\n          if (options[item]) {\r\n            data.push(options[item])\r\n          }\r\n        })\r\n        // 签名\r\n        const sign = this.hmacsha1(\'${config.password}\', data.join(\'&\'))\r\n        return \'UPYUN ${config.operator}:\' + sign\r\n      },\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        const date = new Date().toGMTString()\r\n        const sign = this.getSign({\r\n          method: \'PUT\',\r\n          path: \'picture-demo/2015.png\',\r\n          date: date,\r\n          policy: \'\',\r\n          contentMd5: \'asdas24ass1d2a4sd\'\r\n        })\r\n        console.log(sign)\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        const spark = new this.sparkMd5.ArrayBuffer()\r\n        spark.append(arrayBufferData)\r\n        const md5 = spark.end()\r\n        const res = await this.beforeEach(file, md5)\r\n        const signature = res.data.data\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: signature.signature,\r\n            // Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        const spark = new this.sparkMd5.ArrayBuffer()\r\n        spark.append(arrayBufferData)\r\n        const md5 = spark.end()\r\n        const res = await this.beforeEach(file, md5)\r\n        const signature = res.data.data\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: signature.signature,\r\n            // Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-14 07:37:51', '2022-12-14 07:37:51', '1.0.3', '1.0.3', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('ca032f8a-d74e-4863-8d32-5a217e6d796d', '1c471b96-6ddd-454e-97f1-7414ca122008', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				const json = {\r\n          \"key\": \"${config.path}\" + file.filename,\r\n          \"redirect\": \"${config.redirect}\"\r\n        }\r\n        console.log(json)\r\n        const policy = window.btoa(JSON.stringify(json))\r\n        // const policy = window.btoa(json)\r\n        const signature = this.crypto.HmacSHA256(\'${config.secret_access_key}\', policy).toString()\r\n        console.log(signature.toString())\r\n        return {\r\n          signature,\r\n          policy\r\n        }\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'policy\', res.policy)\r\n        formData.append(\'signature\', res.signature)\r\n        formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        formData.append(\'redirect\', \'${config.redirect}\')\r\n        formData.append(\'file\', file.file)\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"POST\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				const json = {\r\n          \"key\": \"${config.path}\" + file.filename,\r\n          \"redirect\": \"${config.redirect}\"\r\n        }\r\n        // const policy = window.btoa(JSON.stringify(json))\r\n        const policy = window.btoa(json)\r\n        const signature = this.crypto.HmacSHA256(\'${config.secret_access_key}\', policy).toString()\r\n        console.log(signature.toString())\r\n        return {\r\n          signature,\r\n          policy\r\n        }\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'policy\', res.policy)\r\n        formData.append(\'signature\', res.signature)\r\n        formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        formData.append(\'redirect\', \'${config.redirect}\')\r\n        formData.append(\'file\', file.file)\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"POST\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2022-12-19 02:41:54', '2022-12-19 02:41:54', '1.0.2', '1.0.2', '12');
INSERT INTO `bucketsourcehistory` VALUES ('cac206d4-6e5b-4979-bab5-2eaa537fe37a', '607eb9fe-5f38-4beb-86c0-84b4b97aeba1', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      useFileToBase64: function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            reject(error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: await this.useFileToBase64(file.file)\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      useFileToBase64: function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            reject(error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: await this.useFileToBase64(file.file)\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 07:07:44', '2022-12-12 07:07:44', '1.0.2', '1.0.2', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('cb09f08f-fae2-4ddf-9d95-a6bdd76782e1', '1c471b96-6ddd-454e-97f1-7414ca122008', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				const json = {\r\n          \"key\": \"${config.path}\" + file.filename,\r\n          \"redirect\": \"${config.redirect}\"\r\n        }\r\n        const policy = window.btoa(JSON.stringify(json))\r\n        const signature = this.hmacsha1(\'${config.secret_access_key}\', policy)\r\n        return {\r\n          signature,\r\n          policy\r\n        }\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'policy\', res.policy)\r\n        formData.append(\'signature\', res.signature)\r\n        formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        formData.append(\'redirect\', \'${config.redirect}\')\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"POST\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				const json = {\r\n          \"key\": \"${config.path}\" + file.filename,\r\n          \"redirect\": \"${config.redirect}\"\r\n        }\r\n        const policy = window.btoa(JSON.stringify(json))\r\n        const signature = this.hmacsha1(\'${config.secret_access_key}\', policy)\r\n        return {\r\n          signature,\r\n          policy\r\n        }\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'policy\', res.policy)\r\n        formData.append(\'signature\', res.signature)\r\n        formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        formData.append(\'redirect\', \'${config.redirect}\')\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"POST\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2022-12-14 09:43:33', '2022-12-14 09:43:33', '1.0.2', '1.0.2', '11');
INSERT INTO `bucketsourcehistory` VALUES ('cd540671-a9b8-47ae-8aa4-113308245101', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        const signature = res.data.data\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        const spark = new this.sparkMd5.ArrayBuffer()\r\n        spark.append(arrayBufferData)\r\n        const md5 = spark.end()\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: signature.signature,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        const signature = res.data.data\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        const spark = new SparkMD5.ArrayBuffer()\r\n        spark.append(arrayBufferData)\r\n        const md5 = spark.end()\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: signature.signature,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\',\r\n            \'Content-MD5\': md5\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-13 02:29:00', '2022-12-13 02:29:00', '1.0.2', '1.0.2', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('d18d4046-e78e-4e38-8e34-11d95e007072', '607eb9fe-5f38-4beb-86c0-84b4b97aeba1', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#腾讯云-cos\',\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({\r\n          url: \'http://\' + window.uploader_ip + \'/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: file.file\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#腾讯云-cos\',\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: file.file\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2023-03-07 03:12:12', '2023-03-07 03:12:12', '1.0.4', '1.0.4', '将写死的ip地址替换成当前服务所用后端ip');
INSERT INTO `bucketsourcehistory` VALUES ('d1fe30e8-5fc1-4ed7-82fc-c5b5e6a43afb', '2b25ef86-1b8a-4c7c-806c-b59a0d196ca8', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      fileToBase64: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\' + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'PUT\',\r\n          data: await this.fileToBase64(file.file),\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            Authorization: \'OSS ${config.accessKeyId}:\' + res.data.data.token,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': \'image/png\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\' + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'PUT\',\r\n          data: \'123asd4as2dasd\',\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            Authorization: \'OSS ${config.accessKeyId}:\' + res.data.data.token,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': \'image/png\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 03:36:46', '2022-12-12 03:36:46', '1.0.4', '1.0.4', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('d2184f40-b470-4855-994d-f20ab258bd1e', '607eb9fe-5f38-4beb-86c0-84b4b97aeba1', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        // const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          const formData = new FormData()\r\n          formData.append(\'key\', \'${config.path}\' + file.filename)\r\n          formData.append(\'file\', file.file)\r\n          return {\r\n            method: \'POST\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/\',\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              // \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: formData\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      useFileToBase64: function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            reject(error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: await this.useFileToBase64(file.file, true)\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 07:22:29', '2022-12-12 07:22:29', '1.0.2', '1.0.2', '改成post');
INSERT INTO `bucketsourcehistory` VALUES ('d52d6997-3365-4df6-8804-d8cf5481d104', '9449c07e-514a-456f-a781-31e2c06f3af1', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#七牛云-kodo\',\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AccessKey\",\r\n          \"field\":\"accessKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入AccessKey\"\r\n      },\r\n      {\r\n        \"type\":\"password\",\r\n        \"label\":\"设定SecretKey\",\r\n        \"field\":\"secretKey\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入SecretKey\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket_name\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入自定义域名\",\r\n          \"tips\": \"以http://或https://开头，末尾无需斜杠\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"设定存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"qiniu.region.z0\",\r\n          \"required\":true,\r\n          \"options\": [\r\n            {\r\n              \"label\": \"华东区域\",\r\n              \"value\": \"qiniu.region.z0\"\r\n            },\r\n            {\r\n              \"label\": \"华北区域\",\r\n              \"value\": \"qiniu.region.z1\"\r\n            },\r\n            {\r\n              \"label\": \"华南区域\",\r\n              \"value\": \"qiniu.region.z2\"\r\n            },\r\n            {\r\n              \"label\": \"北美区域\",\r\n              \"value\": \"qiniu.region.na0\"\r\n            },\r\n            {\r\n              \"label\": \"新加坡区域\",\r\n              \"value\": \"qiniu.region.as0\"\r\n            }\r\n          ],\r\n          \"placeholder\":\"请选择存储区域\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定网址后缀\",\r\n          \"field\":\"suffix\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如: imageView2/0/q/75|watermark/2/text/6ZuF5bGF5peF5ri45rCR5a6_/font/5a6L5L2T/fontsize/360/fill/I0ZBRkFGQQ==/dissolve/100/gravity/SouthEast/dx/15/dy/15|imageslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如: img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"访问前缀\",\r\n          \"field\":\"baseUrl\",\r\n          \"hidden\":true,\r\n          \"default\":\"${config.domain}\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      beforeEach: async function (file) {\r\n        return await this.axios({\r\n          url: \'http://124.222.54.192:3002/api/v1/tool/qiniuSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKey: \'${config.accessKey}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket_name}\',\r\n            expires: 7200\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'token\', res.data.data.token)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'fname\', file.filename)\r\n        return {\r\n          url: \'https://upload.qiniup.com/\',\r\n          method: \'post\',\r\n          data: formData\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data\r\n        return {\r\n          img_url: tmp.key,\r\n          hash: tmp.hash\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AccessKey\",\r\n          \"field\":\"accessKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入AccessKey\"\r\n      },\r\n      {\r\n        \"type\":\"password\",\r\n        \"label\":\"设定SecretKey\",\r\n        \"field\":\"secretKey\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入SecretKey\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket_name\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入自定义域名\",\r\n          \"tips\": \"以http://或https://开头，末尾无需斜杠\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"设定存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"qiniu.region.z0\",\r\n          \"required\":true,\r\n          \"options\": [\r\n            {\r\n              \"label\": \"华东区域\",\r\n              \"value\": \"qiniu.region.z0\"\r\n            },\r\n            {\r\n              \"label\": \"华北区域\",\r\n              \"value\": \"qiniu.region.z1\"\r\n            },\r\n            {\r\n              \"label\": \"华南区域\",\r\n              \"value\": \"qiniu.region.z2\"\r\n            },\r\n            {\r\n              \"label\": \"北美区域\",\r\n              \"value\": \"qiniu.region.na0\"\r\n            },\r\n            {\r\n              \"label\": \"新加坡区域\",\r\n              \"value\": \"qiniu.region.as0\"\r\n            }\r\n          ],\r\n          \"placeholder\":\"请选择存储区域\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定网址后缀\",\r\n          \"field\":\"suffix\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如: imageView2/0/q/75|watermark/2/text/6ZuF5bGF5peF5ri45rCR5a6_/font/5a6L5L2T/fontsize/360/fill/I0ZBRkFGQQ==/dissolve/100/gravity/SouthEast/dx/15/dy/15|imageslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如: img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"访问前缀\",\r\n          \"field\":\"baseUrl\",\r\n          \"hidden\":true,\r\n          \"default\":\"${config.domain}\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      beforeEach: async function (file) {\r\n        return await this.axios({\r\n          url: \'http://124.222.54.192:3002/api/v1/tool/qiniuSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKey: \'${config.accessKey}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket_name}\',\r\n            expires: 7200\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'token\', res.data.data.token)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'fname\', file.filename)\r\n        return {\r\n          url: \'https://upload.qiniup.com/\',\r\n          method: \'post\',\r\n          data: formData\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data\r\n        return {\r\n          img_url: tmp.key,\r\n          hash: tmp.hash\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2023-02-23 05:31:30', '2023-02-23 05:31:30', '1.0.3', '1.0.2', '添加文档地址');
INSERT INTO `bucketsourcehistory` VALUES ('d574be5c-e1ee-4218-afda-e7e786b1b7d6', 'f68dd625-c5ce-4ef2-a3ca-5a843baf76fa', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${file.filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        const tmp = \'${config.commit_messages}\'\r\n        console.log(tmp)\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        console.log(tmp)\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: tmp\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${file.filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        const tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: tmp\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-09 10:01:07', '2022-12-09 10:01:07', '1.0.3', '1.0.3', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('d70bf287-44e0-4de4-8108-e8d623cf63f8', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名\r\n      getSign: function (options) {\r\n        const data = [\'PUT\']\r\n        data.push(options[\'path\'])\r\n        data.push(options[\'date\'])\r\n        console.log(data)\r\n        // 签名\r\n        const md5Pwd = this.md5(\'${config.password}\')\r\n        console.log(md5Pwd)\r\n        const sign = this.hmacsha1(md5Pwd, data.join(\'&\'))\r\n        return \'UPYUN ${config.operator}:\' + sign\r\n      },\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        // const spark = new this.sparkMd5.ArrayBuffer()\r\n        // spark.append(arrayBufferData)\r\n        // const md5 = spark.end()\r\n        // const res = await this.beforeEach(file, md5)\r\n        // const signature = res.data.data\r\n        const date = new Date().toUTCString()\r\n        const sign = this.getSign({\r\n          path: \'/${config.bucket}/${config.path}\' + file.filename,\r\n          date: date\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: sign,\r\n            \'X-Date\': date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名\r\n      getSign: function (options) {\r\n        const data = []\r\n        for (let key in options) {\r\n          if (options[key]) {\r\n            data.push(options[key])\r\n          }\r\n        }\r\n        // 签名\r\n        const md5Pwd = this.md5(\'${config.password}\')\r\n        const sign = this.hmacsha1(md5Pwd, data.join(\'&\'))\r\n        return \'UPYUN ${config.operator}:\' + sign\r\n      },\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        // const spark = new this.sparkMd5.ArrayBuffer()\r\n        // spark.append(arrayBufferData)\r\n        // const md5 = spark.end()\r\n        // const res = await this.beforeEach(file, md5)\r\n        // const signature = res.data.data\r\n        const date = new Date().toGMTString()\r\n        const sign = this.getSign({\r\n          method: \'PUT\',\r\n          path: \'/${config.bucket}/${config.path}\' + file.filename,\r\n          date: date,\r\n          policy: \'\',\r\n          // contentMd5: this.md5()\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: sign,\r\n            \'X-Date\': date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-14 08:05:33', '2022-12-14 08:05:33', '1.0.3', '1.0.3', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('d761897f-23cf-473e-9afd-4950024c9276', '607eb9fe-5f38-4beb-86c0-84b4b97aeba1', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      useFileToBase64: function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            console.log(reader.result)\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            reject(error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename,\r\n            base64: await this.useFileToBase64(file.file, true)\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: signature.base64\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      useFileToBase64: function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            console.log(reader.result)\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            reject(error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename,\r\n            base64: await this.useFileToBase64(file.file)\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: signature.base64\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 08:42:52', '2022-12-12 08:42:52', '1.0.2', '1.0.2', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('d94c1926-c272-4ce3-84c8-5c3de5272c2b', 'f68dd625-c5ce-4ef2-a3ca-5a843baf76fa', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}/${config.branch}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${file.filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: tmp\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${file.filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: tmp\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-09 14:26:29', '2022-12-09 14:26:29', '1.0.4', '1.0.3', '更新插件地址配置');
INSERT INTO `bucketsourcehistory` VALUES ('d9ca8314-9707-41f3-ab26-c7b3fa455fd8', '2b25ef86-1b8a-4c7c-806c-b59a0d196ca8', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        console.log(this.mime.lookup(file.filename))\r\n        return {\r\n          url: \'https://${config.bucket}.${options.area}.aliyuncs.com/\' + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'PUT\',\r\n          data: \'123asd4as2dasd\',\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            Authorization: \'OSS ${options.accessKeyId}:\' + res.data.data.token,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': \'image/png\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        console.log(this.mime.lookup(file.filename))\r\n        return {\r\n          url: \'https://${config.bucket}.${options.area}.aliyuncs.com/\' + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'PUT\',\r\n          data: {},\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            Authorization: \'OSS ${options.accessKeyId}:\' + res.data.data.token,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': \'png\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 03:27:14', '2022-12-12 03:27:14', '1.0.4', '1.0.4', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('dafc4f0c-c905-447a-8f6e-a729882fdbe0', '1c471b96-6ddd-454e-97f1-7414ca122008', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				// const json = {\r\n        //   \"key\": \"${config.path}\" + file.filename,\r\n        //   \"redirect\": \"${config.redirect}\"\r\n        // }\r\n        // console.log(json)\r\n        // const policy = window.btoa(JSON.stringify(json))\r\n        // // const policy = window.btoa(json)\r\n        // const signature = this.crypto.HmacSHA256(\'${config.secret_access_key}\', policy).toString()\r\n        // console.log(signature.toString())\r\n        // return {\r\n        //   signature,\r\n        //   policy\r\n        // }\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/qyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            access_key_id: \'${config.access_key_id}\',\r\n            secret_access_key: \'${config.secret_access_key}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            redirect: \'${config.redirect}\',\r\n            storage_type: \'${config.storage_type}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        // console.log(res)\r\n        // const formData = new FormData()\r\n        // formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        // formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        // formData.append(\'policy\', res.data.data.policy)\r\n        // formData.append(\'signature\', res.data.data.signature)\r\n        // formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        // formData.append(\'redirect\', \'${config.redirect}\')\r\n        // formData.append(\'charset\', \'UTF-8\')\r\n        // formData.append(\'Upload\', \'Upload to QingStor\')\r\n        // formData.append(\'file\', file.file)\r\n				return {\r\n          // ${url.protocol}://${options.zone}.${url.host}/${options.bucket}${path}/${encodeURI(fileName)}\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com/${config.path}\" + file.filename,\r\n					method: \"PUT\",\r\n          data: file.file,\r\n          headers: {\r\n            // Host: \'${config.area}.${config.host}\',\r\n            Authorization: res.data.data.signature,\r\n            // Date: new Date().toUTCString(),\r\n            \'X-QS-Date\': new Date((new Date().getTime() + 300000)).toUTCString(),\r\n            \'User-Agent\': \'picgo_plugin_qingstor\',\r\n            \'Content-Type\': \'application/octet-stream\',\r\n          }\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				// const json = {\r\n        //   \"key\": \"${config.path}\" + file.filename,\r\n        //   \"redirect\": \"${config.redirect}\"\r\n        // }\r\n        // console.log(json)\r\n        // const policy = window.btoa(JSON.stringify(json))\r\n        // // const policy = window.btoa(json)\r\n        // const signature = this.crypto.HmacSHA256(\'${config.secret_access_key}\', policy).toString()\r\n        // console.log(signature.toString())\r\n        // return {\r\n        //   signature,\r\n        //   policy\r\n        // }\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/qyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            access_key_id: \'${config.access_key_id}\',\r\n            secret_access_key: \'${config.secret_access_key}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            redirect: \'${config.redirect}\',\r\n            storage_type: \'${config.storage_type}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        // console.log(res)\r\n        // const formData = new FormData()\r\n        // formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        // formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        // formData.append(\'policy\', res.data.data.policy)\r\n        // formData.append(\'signature\', res.data.data.signature)\r\n        // formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        // formData.append(\'redirect\', \'${config.redirect}\')\r\n        // formData.append(\'charset\', \'UTF-8\')\r\n        // formData.append(\'Upload\', \'Upload to QingStor\')\r\n        // formData.append(\'file\', file.file)\r\n				return {\r\n          // ${url.protocol}://${options.zone}.${url.host}/${options.bucket}${path}/${encodeURI(fileName)}\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com/${config.path}\" + file.filename,\r\n					method: \"PUT\",\r\n          data: file.file,\r\n          headers: {\r\n            // Host: \'${config.area}.${config.host}\',\r\n            Authorization: res.data.data.signature,\r\n            // Date: new Date().toUTCString(),\r\n            Date: new Date((new Date().getTime() + 300000)).toUTCString(),\r\n            \'User-Agent\': \'picgo_plugin_qingstor\',\r\n            \'Content-Type\': \'application/octet-stream\',\r\n          }\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2022-12-19 06:30:35', '2022-12-19 06:30:35', '1.0.4', '1.0.4', '123');
INSERT INTO `bucketsourcehistory` VALUES ('db44dcf5-1112-49f6-84a9-4fd106fd1d15', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名\r\n      getSign: function (options) {\r\n        // const data = [\'PUT\']\r\n        // data.push(options[\'path\'])\r\n        // data.push(options[\'date\'])\r\n        // // 签名\r\n        // const md5Pwd = this.md5(\'${config.password}\')\r\n        // const sign = this.hmacsha1(md5Pwd, data.join(\'&\'))\r\n        // return \'UPYUN ${config.operator}:\' + sign\r\n\r\n        // const md5Pwd = this.md5(\'${config.password}\')\r\n        const sign = window.btoa(\'${config.operator}:${config.password}\')\r\n        return sign\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const date = new Date().toUTCString()\r\n        const sign = this.getSign({\r\n          path: \'/${config.bucket}/${config.path}\' + file.filename,\r\n          date: date\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: \'Basic \' + sign,\r\n            \'X-Date\': date,\r\n            Date: date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名\r\n      getSign: function (options) {\r\n        // const data = [\'PUT\']\r\n        // data.push(options[\'path\'])\r\n        // data.push(options[\'date\'])\r\n        // // 签名\r\n        // const md5Pwd = this.md5(\'${config.password}\')\r\n        // const sign = this.hmacsha1(md5Pwd, data.join(\'&\'))\r\n        // return \'UPYUN ${config.operator}:\' + sign\r\n\r\n        const md5Pwd = this.md5(\'${config.password}\')\r\n        const sign = window.btoa(\'${config.operator}:\' + md5Pwd)\r\n        return sign\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const date = new Date().toUTCString()\r\n        const sign = this.getSign({\r\n          path: \'/${config.bucket}/${config.path}\' + file.filename,\r\n          date: date\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: \'Basic \' + sign,\r\n            \'X-Date\': date,\r\n            Date: date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-14 08:54:15', '2022-12-14 08:54:15', '1.0.3', '1.0.3', '11');
INSERT INTO `bucketsourcehistory` VALUES ('dbed7163-0abd-4270-aa3f-8f6accb2d393', '2b25ef86-1b8a-4c7c-806c-b59a0d196ca8', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        return {\r\n          url: \'https://${config.bucket}.${options.area}.aliyuncs.com/\' + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'PUT\',\r\n          data: {},\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            Authorization: this.beforeEach(file),\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': \'png\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({\r\n          method: \'post\',\r\n          url: \'http://124.222.54.192/api/v1/tool/aliSign\',\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        return {\r\n          url: \'https://${config.bucket}.${options.area}.aliyuncs.com/\' + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'PUT\',\r\n          data: {},\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            Authorization: this.beforeEach(file),\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': \'png\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 03:21:28', '2022-12-12 03:21:28', '1.0.4', '1.0.4', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('dc548b90-d46a-45df-899a-ebf0d400ddde', '607eb9fe-5f38-4beb-86c0-84b4b97aeba1', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: file.file\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.cos.${config.area}.myqcloud.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      useFileToBase64: function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            console.log(reader.result)\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            reject(error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename,\r\n            base64: await this.useFileToBase64(file.file, true)\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            // signature.base64\r\n            data: file.file\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 08:48:26', '2022-12-12 08:48:26', '1.0.2', '1.0.2', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('dc6199be-12ac-4525-aaf4-d08fec93c930', '2b25ef86-1b8a-4c7c-806c-b59a0d196ca8', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      fileToBase64: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          //  + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            // Authorization: \'OSS ${config.accessKeyId}:\' + res.data.data.token,\r\n            // Date: new Date().toUTCString(),\r\n            // \'Content-Type\': \'image/png\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename,\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      fileToBase64: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          //  + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            // Authorization: \'OSS ${config.accessKeyId}:\' + res.data.data.token,\r\n            // Date: new Date().toUTCString(),\r\n            // \'Content-Type\': \'image/png\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename,\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 05:00:40', '2022-12-12 05:00:40', '1.0.4', '1.0.4', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('dcf015dc-d710-4810-897e-9e5ae61aafb5', 'f4fe0250-e404-4b27-891e-49d2b67e5e3e', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"用户名\",\r\n        \"field\":\"username\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入Gitee用户名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"仓库地址\",\r\n        \"field\":\"repo\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入仓库名\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"分支\",\r\n        \"field\":\"branch\",\r\n        \"default\":\"master\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入分支名称\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"私人令牌\",\r\n        \"field\":\"token\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入私人令牌\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"存储路径\",\r\n        \"field\":\"path\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入存储路径\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"自定义路径\",\r\n        \"field\":\"customPath\",\r\n        \"default\":\"default\",\r\n        \"required\":false,\r\n        \"optios\": [\r\n          { label: \"默认\", value: \"default\" },\r\n          { label: \"年\", value: \"year\" },\r\n          { label: \"年月\", value: \"year-month\" },\r\n          { label: \"年月日\", value: \"year-month-day\" }\r\n        ],\r\n        \"placeholder\":\"请选择自定义路径\"\r\n      },\r\n      {\r\n        \"tips\":\"${filename} - 文件名占位符<br/>${createdAt} - 创建时间\",\r\n        \"type\":\"string\",\r\n        \"label\":\"提交内容\",\r\n        \"field\":\"commit_messages\",\r\n        \"default\":\"upload ${filename} by pic bed\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入提交内容\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"访问前缀\",\r\n        \"field\":\"baseUrl\",\r\n        \"hidden\":true,\r\n        \"default\":\"https://gitee.com/${username}/${repo}/raw/${branch}/\",\r\n        \"required\":false,\r\n        \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function () {\r\n				\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n				return {\r\n					url: \"\",\r\n					method: \"\",\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '[{\"type\": \"string\", \"label\": \"用户名\", \"value\": \"username\", \"default\": \"\", \"required\": true, \"placeholder\": \"请输入Gitee用户名\"}, {\"type\": \"string\", \"label\": \"仓库地址\", \"value\": \"repo\", \"default\": \"\", \"required\": true, \"placeholder\": \"请输入仓库名\"}, {\"type\": \"string\", \"label\": \"分支\", \"value\": \"branch\", \"default\": \"master\", \"required\": true, \"placeholder\": \"请输入分支名称\"}, {\"type\": \"string\", \"label\": \"私人令牌\", \"value\": \"token\", \"default\": \"\", \"required\": true, \"placeholder\": \"请输入私人令牌\"}, {\"type\": \"string\", \"label\": \"存储路径\", \"value\": \"path\", \"default\": \"\", \"required\": false, \"placeholder\": \"请输入存储路径\"}, {\"type\": \"string\", \"label\": \"自定义路径\", \"value\": \"customPath\", \"default\": \"default\", \"required\": false, \"listOptions\": \"gitee_custompath\", \"placeholder\": \"请选择自定义路径\"}, {\"tips\": \"${filename} - 文件名占位符<br/>${createdAt} - 创建时间\", \"type\": \"string\", \"label\": \"提交内容\", \"value\": \"commit_messages\", \"default\": \"upload ${filename} by pic bed\", \"required\": false, \"placeholder\": \"请输入提交内容\"}, {\"type\": \"string\", \"label\": \"访问前缀\", \"value\": \"baseUrl\", \"hidden\": true, \"default\": \"https://gitee.com/${username}/${repo}/raw/${branch}/\", \"required\": false, \"placeholder\": \"请输入baseUrl\"}]', '2022-12-09 09:40:47', '2022-12-09 09:40:47', '1.0.0', '1.0.0', 'feat: 更新插件config用户表单内容');
INSERT INTO `bucketsourcehistory` VALUES ('de8a1aaa-d5ca-4467-8352-bd7795a55fe9', '2b25ef86-1b8a-4c7c-806c-b59a0d196ca8', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      fileToBase64: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          //  + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            // Authorization: \'OSS ${config.accessKeyId}:\' + res.data.data.token,\r\n            // Date: new Date().toUTCString(),\r\n            // \'Content-Type\': \'image/png\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename,\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      fileToBase64: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          //  + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            // Authorization: \'OSS ${config.accessKeyId}:\' + res.data.data.token,\r\n            // Date: new Date().toUTCString(),\r\n            // \'Content-Type\': \'image/png\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename,\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 05:36:00', '2022-12-12 05:36:00', '1.0.5', '1.0.5', '新增自定义域名说明');
INSERT INTO `bucketsourcehistory` VALUES ('e025437f-2ed2-4f1d-a7d7-4af5d1a12e9f', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名\r\n      getSign: function (options) {\r\n        // const data = [\'PUT\']\r\n        // data.push(options[\'path\'])\r\n        // data.push(options[\'date\'])\r\n        // // 签名\r\n        // const md5Pwd = this.md5(\'${config.password}\')\r\n        // const sign = this.hmacsha1(md5Pwd, data.join(\'&\'))\r\n        // return \'UPYUN ${config.operator}:\' + sign\r\n\r\n        const md5Pwd = this.md5(\'${config.password}\')\r\n        const sign = window.btoa(\'${config.operator}:\' + md5Pwd)\r\n        return sign\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const date = new Date().toUTCString()\r\n        const sign = this.getSign({\r\n          path: \'/${config.bucket}/${config.path}\' + file.filename,\r\n          date: date\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: \'Basic \' + sign,\r\n            \'X-Date\': date,\r\n            Date: date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名\r\n      getSign: function (options) {\r\n        // const data = [\'PUT\']\r\n        // data.push(options[\'path\'])\r\n        // data.push(options[\'date\'])\r\n        // // 签名\r\n        // const md5Pwd = this.md5(\'${config.password}\')\r\n        // const sign = this.hmacsha1(md5Pwd, data.join(\'&\'))\r\n        // return \'UPYUN ${config.operator}:\' + sign\r\n\r\n        console.log(\'${config.operator}:${config.password}\')\r\n        const sign = window.btoa(\'${config.operator}:${config.password}\')\r\n        return sign\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const date = new Date().toUTCString()\r\n        const sign = this.getSign({\r\n          path: \'/${config.bucket}/${config.path}\' + file.filename,\r\n          date: date\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: \'Basic \' + sign,\r\n            \'X-Date\': date,\r\n            Date: date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-14 08:50:56', '2022-12-14 08:50:56', '1.0.3', '1.0.3', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('e7803980-d066-4060-b7be-ab76660d597f', '9449c07e-514a-456f-a781-31e2c06f3af1', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AccessKey\",\r\n          \"field\":\"accessKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入AccessKey\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"设定SecretKey\",\r\n        \"field\":\"secretKey\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入SecretKey\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket_name\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入自定义域名\",\r\n          \"tips\": \"以http://或https://开头，末尾无需斜杠\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"设定存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"qiniu.region.z0\",\r\n          \"required\":true,\r\n          \"options\": [\r\n            {\r\n              \"label\": \"华东区域\",\r\n              \"value\": \"qiniu.region.z0\"\r\n            },\r\n            {\r\n              \"label\": \"华北区域\",\r\n              \"value\": \"qiniu.region.z1\"\r\n            },\r\n            {\r\n              \"label\": \"华南区域\",\r\n              \"value\": \"qiniu.region.z2\"\r\n            },\r\n            {\r\n              \"label\": \"北美区域\",\r\n              \"value\": \"qiniu.region.na0\"\r\n            },\r\n            {\r\n              \"label\": \"新加坡区域\",\r\n              \"value\": \"qiniu.region.as0\"\r\n            }\r\n          ],\r\n          \"placeholder\":\"请选择存储区域\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定网址后缀\",\r\n          \"field\":\"suffix\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如: imageView2/0/q/75|watermark/2/text/6ZuF5bGF5peF5ri45rCR5a6_/font/5a6L5L2T/fontsize/360/fill/I0ZBRkFGQQ==/dissolve/100/gravity/SouthEast/dx/15/dy/15|imageslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如: img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"访问前缀\",\r\n          \"field\":\"baseUrl\",\r\n          \"hidden\":true,\r\n          \"default\":\"${config.domain}\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      beforeEach: async function (file) {\r\n        return await this.axios({\r\n          url: \'http://124.222.54.192:3002/api/v1/tool/qiniuSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKey: \'${config.accessKey}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket_name}\',\r\n            expires: 7200\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'token\', res.data.data.token)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'fname\', file.filename)\r\n        return {\r\n          url: \'https://upload.qiniup.com/\',\r\n          method: \'post\',\r\n          data: formData\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data\r\n        return {\r\n          img_url: tmp.key,\r\n          hash: tmp.hash\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AccessKey\",\r\n          \"field\":\"accessKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入AccessKey\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"设定SecretKey\",\r\n        \"field\":\"secretKey\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入SecretKey\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket_name\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定访问网址\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入访问网址\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"设定存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"qiniu.region.z0\",\r\n          \"required\":true,\r\n          \"options\": [\r\n            {\r\n              \"label\": \"华东区域\",\r\n              \"value\": \"qiniu.region.z0\"\r\n            },\r\n            {\r\n              \"label\": \"华北区域\",\r\n              \"value\": \"qiniu.region.z1\"\r\n            },\r\n            {\r\n              \"label\": \"华南区域\",\r\n              \"value\": \"qiniu.region.z2\"\r\n            },\r\n            {\r\n              \"label\": \"北美区域\",\r\n              \"value\": \"qiniu.region.na0\"\r\n            },\r\n            {\r\n              \"label\": \"新加坡区域\",\r\n              \"value\": \"qiniu.region.as0\"\r\n            }\r\n          ],\r\n          \"placeholder\":\"请选择存储区域\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定网址后缀\",\r\n          \"field\":\"suffix\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如: imageView2/0/q/75|watermark/2/text/6ZuF5bGF5peF5ri45rCR5a6_/font/5a6L5L2T/fontsize/360/fill/I0ZBRkFGQQ==/dissolve/100/gravity/SouthEast/dx/15/dy/15|imageslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如: img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"访问前缀\",\r\n          \"field\":\"baseUrl\",\r\n          \"hidden\":true,\r\n          \"default\":\"${config.domain}\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      beforeEach: async function (file) {\r\n        return await this.axios({\r\n          url: \'http://124.222.54.192:3002/api/v1/tool/qiniuSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKey: \'${config.accessKey}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket_name}\',\r\n            expires: 7200\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'token\', res.data.data.token)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'fname\', file.filename)\r\n        return {\r\n          url: \'https://upload.qiniup.com/\',\r\n          method: \'post\',\r\n          data: formData\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data\r\n        return {\r\n          img_url: tmp.key,\r\n          hash: tmp.hash\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2023-02-23 03:39:05', '2023-02-23 03:39:05', '1.0.1', '1.0.0', '更改自定义域名描述');
INSERT INTO `bucketsourcehistory` VALUES ('e8ecb0c5-beac-404f-88e2-5e2f7ed51882', '9449c07e-514a-456f-a781-31e2c06f3af1', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#七牛云-kodo\',\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AccessKey\",\r\n          \"field\":\"accessKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入AccessKey\"\r\n      },\r\n      {\r\n        \"type\":\"password\",\r\n        \"label\":\"设定SecretKey\",\r\n        \"field\":\"secretKey\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入SecretKey\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket_name\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入自定义域名\",\r\n          \"tips\": \"以http://或https://开头，末尾无需斜杠\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"设定存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"qiniu.region.z0\",\r\n          \"required\":true,\r\n          \"options\": [\r\n            {\r\n              \"label\": \"华东区域\",\r\n              \"value\": \"qiniu.region.z0\"\r\n            },\r\n            {\r\n              \"label\": \"华北区域\",\r\n              \"value\": \"qiniu.region.z1\"\r\n            },\r\n            {\r\n              \"label\": \"华南区域\",\r\n              \"value\": \"qiniu.region.z2\"\r\n            },\r\n            {\r\n              \"label\": \"北美区域\",\r\n              \"value\": \"qiniu.region.na0\"\r\n            },\r\n            {\r\n              \"label\": \"新加坡区域\",\r\n              \"value\": \"qiniu.region.as0\"\r\n            }\r\n          ],\r\n          \"placeholder\":\"请选择存储区域\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定网址后缀\",\r\n          \"field\":\"suffix\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如: imageView2/0/q/75|watermark/2/text/6ZuF5bGF5peF5ri45rCR5a6_/font/5a6L5L2T/fontsize/360/fill/I0ZBRkFGQQ==/dissolve/100/gravity/SouthEast/dx/15/dy/15|imageslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如: img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"访问前缀\",\r\n          \"field\":\"baseUrl\",\r\n          \"hidden\":true,\r\n          \"default\":\"${config.domain}\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      beforeEach: async function (file) {\r\n        return await this.axios({\r\n          url: \'http://\' + window.uploader_ip + \'/api/v1/tool/qiniuSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKey: \'${config.accessKey}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket_name}\',\r\n            expires: 7200\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'token\', res.data.data.token)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'fname\', file.filename)\r\n        return {\r\n          url: \'https://upload.qiniup.com/\',\r\n          method: \'post\',\r\n          data: formData\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data\r\n        return {\r\n          img_url: tmp.key,\r\n          hash: tmp.hash\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#七牛云-kodo\',\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AccessKey\",\r\n          \"field\":\"accessKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入AccessKey\"\r\n      },\r\n      {\r\n        \"type\":\"password\",\r\n        \"label\":\"设定SecretKey\",\r\n        \"field\":\"secretKey\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入SecretKey\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket_name\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入自定义域名\",\r\n          \"tips\": \"以http://或https://开头，末尾无需斜杠\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"设定存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"qiniu.region.z0\",\r\n          \"required\":true,\r\n          \"options\": [\r\n            {\r\n              \"label\": \"华东区域\",\r\n              \"value\": \"qiniu.region.z0\"\r\n            },\r\n            {\r\n              \"label\": \"华北区域\",\r\n              \"value\": \"qiniu.region.z1\"\r\n            },\r\n            {\r\n              \"label\": \"华南区域\",\r\n              \"value\": \"qiniu.region.z2\"\r\n            },\r\n            {\r\n              \"label\": \"北美区域\",\r\n              \"value\": \"qiniu.region.na0\"\r\n            },\r\n            {\r\n              \"label\": \"新加坡区域\",\r\n              \"value\": \"qiniu.region.as0\"\r\n            }\r\n          ],\r\n          \"placeholder\":\"请选择存储区域\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定网址后缀\",\r\n          \"field\":\"suffix\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如: imageView2/0/q/75|watermark/2/text/6ZuF5bGF5peF5ri45rCR5a6_/font/5a6L5L2T/fontsize/360/fill/I0ZBRkFGQQ==/dissolve/100/gravity/SouthEast/dx/15/dy/15|imageslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如: img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"访问前缀\",\r\n          \"field\":\"baseUrl\",\r\n          \"hidden\":true,\r\n          \"default\":\"${config.domain}\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      beforeEach: async function (file) {\r\n        return await this.axios({\r\n          url: \'http://124.222.54.192:3002/api/v1/tool/qiniuSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKey: \'${config.accessKey}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket_name}\',\r\n            expires: 7200\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'token\', res.data.data.token)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'fname\', file.filename)\r\n        return {\r\n          url: \'https://upload.qiniup.com/\',\r\n          method: \'post\',\r\n          data: formData\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data\r\n        return {\r\n          img_url: tmp.key,\r\n          hash: tmp.hash\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2023-03-07 03:13:08', '2023-03-07 03:13:08', '1.0.3', '1.0.3', '将写死的ip地址替换成当前服务所用后端ip');
INSERT INTO `bucketsourcehistory` VALUES ('ed73d09f-f863-46c9-b184-4fd98fdab3c1', 'f68dd625-c5ce-4ef2-a3ca-5a843baf76fa', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${file.filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        const tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: tmp\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${file.filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        const tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: tmp\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-09 09:59:27', '2022-12-09 09:59:27', '1.0.3', '1.0.2', '更新版本号');
INSERT INTO `bucketsourcehistory` VALUES ('eed6b89e-f87d-4c12-adc4-e8ed52299d31', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名\r\n      getSign: function (options) {\r\n        const data = []\r\n        for (let key in options) {\r\n          if (options[key]) {\r\n            data.push(options[key])\r\n          }\r\n        }\r\n        // 签名\r\n        const md5Pwd = this.md5(\'${config.password}\')\r\n        const sign = this.hmacsha1(md5Pwd, data.join(\'&\'))\r\n        return \'UPYUN ${config.operator}:\' + sign\r\n      },\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        // const spark = new this.sparkMd5.ArrayBuffer()\r\n        // spark.append(arrayBufferData)\r\n        // const md5 = spark.end()\r\n        // const res = await this.beforeEach(file, md5)\r\n        // const signature = res.data.data\r\n        const date = new Date().toGMTString()\r\n        const sign = this.getSign({\r\n          method: \'PUT\',\r\n          path: \'/${config.bucket}/${config.path}\' + file.filename,\r\n          date: date,\r\n          policy: \'\',\r\n          // contentMd5: this.md5()\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: sign,\r\n            \'X-Date\': date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 获取签名\r\n      getSign: function (options) {\r\n        const data = []\r\n        for (let key in options) {\r\n          if (options[key]) {\r\n            data.push(options[key])\r\n          }\r\n        }\r\n        // 签名\r\n        const sign = this.hmacsha1(\'${config.password}\', data.join(\'&\'))\r\n        return \'UPYUN ${config.operator}:\' + sign\r\n      },\r\n      toBlob: function (base64Data) {\r\n        let byteString = base64Data\r\n        if (base64Data.split(\',\')[0].indexOf(\'base64\') >= 0) {\r\n          byteString = atob(base64Data.split(\',\')[1]) // base64 解码\r\n        } else {\r\n          byteString = unescape(base64Data.split(\',\')[1])\r\n        }\r\n        // 获取文件类型\r\n        const mimeString = base64Data.split(\';\')[0].split(\':\')[1] // mime类型\r\n        const uintArr = new Uint8Array(byteString.length) // 创建视图\r\n        for (let i = 0; i < byteString.length; i++) {\r\n          uintArr[i] = byteString.charCodeAt(i)\r\n        }\r\n        // 生成blob\r\n        const blob = new Blob([uintArr], {\r\n          type: mimeString\r\n        })\r\n        // 使用 Blob 创建一个指向类型化数组的URL, URL.createObjectURL是new Blob文件的方法,可以生成一个普通的url,可以直接使用,比如用在img.src上\r\n        return blob\r\n      },\r\n      toDataURL: function (file) {\r\n        return new Promise(function (resolve, reject) {\r\n          // 准备上传\r\n          const reader = new FileReader()\r\n          reader.readAsDataURL(file)\r\n          reader.onloadend = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      toArrayBuffer: function (value) {\r\n        const self = this\r\n        return new Promise(function (resolve, reject) {\r\n          // base64转blob\r\n          const blob = self.toBlob(value)\r\n          // blob转arrayBuffer\r\n          const reader2 = new FileReader()\r\n          reader2.readAsArrayBuffer(blob)\r\n          reader2.onload = function (e) {\r\n            resolve(e.target.result)\r\n          }\r\n        })\r\n      },\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, md5) {\r\n        return await this.axios({url: \'http://124.222.54.192:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename,\r\n            md5: md5\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const blobFile = new Blob([file.file], {\r\n          type: \'text/plain\'\r\n        })\r\n        const arrayBufferData = await this.toArrayBuffer(await this.toDataURL(blobFile))\r\n        // const spark = new this.sparkMd5.ArrayBuffer()\r\n        // spark.append(arrayBufferData)\r\n        // const md5 = spark.end()\r\n        // const res = await this.beforeEach(file, md5)\r\n        // const signature = res.data.data\r\n        const date = new Date().toGMTString()\r\n        const sign = this.getSign({\r\n          method: \'PUT\',\r\n          path: \'/${config.path}\' + file.filename,\r\n          date: date,\r\n          policy: \'\',\r\n          // contentMd5: this.md5()\r\n        })\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: sign,\r\n            \'X-Date\': date,\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-14 08:01:43', '2022-12-14 08:01:43', '1.0.3', '1.0.3', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('ef449a33-b01c-4bbc-b321-dbd8066dca3b', 'f68dd625-c5ce-4ef2-a3ca-5a843baf76fa', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: \'${config.commit_messages}\'\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: \'${config.commit_messages}\'\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-09 07:07:02', '2022-12-09 07:07:02', '1.0.2', '1.0.1', '更新版本号');
INSERT INTO `bucketsourcehistory` VALUES ('f2f2bc96-87b1-4009-8bae-5abba70eca8c', '2b25ef86-1b8a-4c7c-806c-b59a0d196ca8', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: tmp\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n          const keys = key.split(\'.\')\r\n          if (keys[0] === \'file\') {\r\n            return file[keys[1]]\r\n          }\r\n        })\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: tmp\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-11 06:34:17', '2022-12-11 06:34:17', '1.0.2', '1.0.1', '新增成都区域');
INSERT INTO `bucketsourcehistory` VALUES ('f3527a10-80ec-4c26-a31d-f9c6754e46c3', '9449c07e-514a-456f-a781-31e2c06f3af1', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AccessKey\",\r\n          \"field\":\"accessKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入AccessKey\"\r\n      },\r\n      {\r\n        \"type\":\"password\",\r\n        \"label\":\"设定SecretKey\",\r\n        \"field\":\"secretKey\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入SecretKey\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket_name\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入自定义域名\",\r\n          \"tips\": \"以http://或https://开头，末尾无需斜杠\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"设定存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"qiniu.region.z0\",\r\n          \"required\":true,\r\n          \"options\": [\r\n            {\r\n              \"label\": \"华东区域\",\r\n              \"value\": \"qiniu.region.z0\"\r\n            },\r\n            {\r\n              \"label\": \"华北区域\",\r\n              \"value\": \"qiniu.region.z1\"\r\n            },\r\n            {\r\n              \"label\": \"华南区域\",\r\n              \"value\": \"qiniu.region.z2\"\r\n            },\r\n            {\r\n              \"label\": \"北美区域\",\r\n              \"value\": \"qiniu.region.na0\"\r\n            },\r\n            {\r\n              \"label\": \"新加坡区域\",\r\n              \"value\": \"qiniu.region.as0\"\r\n            }\r\n          ],\r\n          \"placeholder\":\"请选择存储区域\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定网址后缀\",\r\n          \"field\":\"suffix\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如: imageView2/0/q/75|watermark/2/text/6ZuF5bGF5peF5ri45rCR5a6_/font/5a6L5L2T/fontsize/360/fill/I0ZBRkFGQQ==/dissolve/100/gravity/SouthEast/dx/15/dy/15|imageslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如: img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"访问前缀\",\r\n          \"field\":\"baseUrl\",\r\n          \"hidden\":true,\r\n          \"default\":\"${config.domain}\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      beforeEach: async function (file) {\r\n        return await this.axios({\r\n          url: \'http://124.222.54.192:3002/api/v1/tool/qiniuSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKey: \'${config.accessKey}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket_name}\',\r\n            expires: 7200\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'token\', res.data.data.token)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'fname\', file.filename)\r\n        return {\r\n          url: \'https://upload.qiniup.com/\',\r\n          method: \'post\',\r\n          data: formData\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data\r\n        return {\r\n          img_url: tmp.key,\r\n          hash: tmp.hash\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    version: \'1.0.0\',\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AccessKey\",\r\n          \"field\":\"accessKey\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入AccessKey\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"设定SecretKey\",\r\n        \"field\":\"secretKey\",\r\n        \"default\":\"\",\r\n        \"required\":true,\r\n        \"placeholder\":\"请输入SecretKey\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket_name\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入自定义域名\",\r\n          \"tips\": \"以http://或https://开头，末尾无需斜杠\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"设定存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"qiniu.region.z0\",\r\n          \"required\":true,\r\n          \"options\": [\r\n            {\r\n              \"label\": \"华东区域\",\r\n              \"value\": \"qiniu.region.z0\"\r\n            },\r\n            {\r\n              \"label\": \"华北区域\",\r\n              \"value\": \"qiniu.region.z1\"\r\n            },\r\n            {\r\n              \"label\": \"华南区域\",\r\n              \"value\": \"qiniu.region.z2\"\r\n            },\r\n            {\r\n              \"label\": \"北美区域\",\r\n              \"value\": \"qiniu.region.na0\"\r\n            },\r\n            {\r\n              \"label\": \"新加坡区域\",\r\n              \"value\": \"qiniu.region.as0\"\r\n            }\r\n          ],\r\n          \"placeholder\":\"请选择存储区域\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定网址后缀\",\r\n          \"field\":\"suffix\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如: imageView2/0/q/75|watermark/2/text/6ZuF5bGF5peF5ri45rCR5a6_/font/5a6L5L2T/fontsize/360/fill/I0ZBRkFGQQ==/dissolve/100/gravity/SouthEast/dx/15/dy/15|imageslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如: img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"访问前缀\",\r\n          \"field\":\"baseUrl\",\r\n          \"hidden\":true,\r\n          \"default\":\"${config.domain}\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请输入baseUrl\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      beforeEach: async function (file) {\r\n        return await this.axios({\r\n          url: \'http://124.222.54.192:3002/api/v1/tool/qiniuSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKey: \'${config.accessKey}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket_name}\',\r\n            expires: 7200\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'file\', file.file)\r\n        formData.append(\'token\', res.data.data.token)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'fname\', file.filename)\r\n        return {\r\n          url: \'https://upload.qiniup.com/\',\r\n          method: \'post\',\r\n          data: formData\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data\r\n        return {\r\n          img_url: tmp.key,\r\n          hash: tmp.hash\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2023-02-23 04:12:47', '2023-02-23 04:12:47', '1.0.2', '1.0.1', '将secretey设为密码框');
INSERT INTO `bucketsourcehistory` VALUES ('f67ca46a-b465-4ab1-ae74-0cb7d95b3ec2', '2b25ef86-1b8a-4c7c-806c-b59a0d196ca8', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        return {\r\n          url: \'https://${config.bucket}.${options.area}.aliyuncs.com/\' + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'PUT\',\r\n          data: \'123asd4as2dasd\',\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            Authorization: \'OSS ${options.accessKeyId}:\' + res.data.data.token,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': \'image/png\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        console.log(this.mime.lookup(file.filename))\r\n        return {\r\n          url: \'https://${config.bucket}.${options.area}.aliyuncs.com/\' + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'PUT\',\r\n          data: \'123asd4as2dasd\',\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            Authorization: \'OSS ${options.accessKeyId}:\' + res.data.data.token,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': \'image/png\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 03:29:40', '2022-12-12 03:29:40', '1.0.4', '1.0.4', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('f6f3f8ac-4b07-40d7-8f20-8de4729cefb8', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/upyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            operator: \'${config.operator}\',\r\n            password: \'${config.password}\',\r\n            bucket: \'${config.bucket}\',\r\n            domain: \'${config.domain}\',\r\n            path: \'${config.path}\',\r\n            suffix: \'${config.suffix}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        const signature = res.data.data\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Authorization: signature.signature,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        const signature = res.data.data\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n            Authorization: signature.signature,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-13 02:04:29', '2022-12-13 02:04:29', '1.0.2', '1.0.1', '完善request');
INSERT INTO `bucketsourcehistory` VALUES ('f70adeee-9bc0-4e93-bf86-dc303170e55a', '607eb9fe-5f38-4beb-86c0-84b4b97aeba1', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId \",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey \",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        console.log(suffix, version)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = {}\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              contentType: mimeTypes[suffix]\r\n            },\r\n            body: \'asdasdasd\',\r\n            resolveWithFullResponse: true\r\n          }\r\n        }\r\n        // const res = await this.beforeEach(file)\r\n        // const formData = new FormData()\r\n        // formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        // formData.append(\'policy\', res.data.data.policy)\r\n        // formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        // formData.append(\'success_action_status\', 200)\r\n        // formData.append(\'signature\', res.data.data.signature)\r\n        // formData.append(\'file\', file.file)\r\n        // return {\r\n        //   url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n        //   method: \'POST\',\r\n        //   data: formData,\r\n        //   headers: {\r\n        //     Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n        //     \'Content-Type\': \'multipart/form-data;\'\r\n        //   },\r\n        // }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"choice\",\r\n          \"label\":\"COS版本\",\r\n          \"field\":\"version\",\r\n          \"default\":\"v5\",\r\n          \"required\":false,\r\n          \"placeholder\":\"请选择cos版本\",\r\n          \"choices\": {\r\n            active: {\r\n              label: \"v5\",\r\n              value: \"v5\"\r\n            },\r\n            inactive: {\r\n              label: \"v4\",\r\n              value: \"v4\"\r\n            }\r\n          }\r\n          // [\r\n          //   { label: \'v5\', value: \'v5\', active: true },\r\n          //   { label: \'v4\', value: \'v4\', active: false }\r\n          // ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定SecretId\",\r\n          \"field\":\"secretId \",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定SecretKey \",\r\n          \"field\":\"secretKey \",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入secretKey \"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定AppID\",\r\n          \"field\":\"appId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如1234567890\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"南京\", value: \"ap-nanjing\" },\r\n            { label: \"成都\", value: \"ap-chengdu\" },\r\n            { label: \"北京\", value: \"ap-beijing\" },\r\n            { label: \"广州\", value: \"ap-guangzhou\" },\r\n            { label: \"上海\", value: \"ap-shanghai\" },\r\n            { label: \"重庆\", value: \"ap-chongqing\" },\r\n            { label: \"香港\", value: \"ap-hongkong\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\",\r\n          \"tips\": \"可以使用${config.xxx}即代表使用该配置中的某属性，例如:${config.bucket}-代表使用填写的存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = useGetSuffix(file.filename)\r\n        console.log(suffix, version)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = {}\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              contentType: mimeTypes[suffix]\r\n            },\r\n            body: \'asdasdasd\',\r\n            resolveWithFullResponse: true\r\n          }\r\n        }\r\n        // const res = await this.beforeEach(file)\r\n        // const formData = new FormData()\r\n        // formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        // formData.append(\'policy\', res.data.data.policy)\r\n        // formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        // formData.append(\'success_action_status\', 200)\r\n        // formData.append(\'signature\', res.data.data.signature)\r\n        // formData.append(\'file\', file.file)\r\n        // return {\r\n        //   url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n        //   method: \'POST\',\r\n        //   data: formData,\r\n        //   headers: {\r\n        //     Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n        //     \'Content-Type\': \'multipart/form-data;\'\r\n        //   },\r\n        // }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 06:31:32', '2022-12-12 06:31:32', '1.0.2', '1.0.2', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('f7525ba9-8b0e-4499-8f30-cdb42821eaea', '1c471b96-6ddd-454e-97f1-7414ca122008', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				// const json = {\r\n        //   \"key\": \"${config.path}\" + file.filename,\r\n        //   \"redirect\": \"${config.redirect}\"\r\n        // }\r\n        // console.log(json)\r\n        // const policy = window.btoa(JSON.stringify(json))\r\n        // // const policy = window.btoa(json)\r\n        // const signature = this.crypto.HmacSHA256(\'${config.secret_access_key}\', policy).toString()\r\n        // console.log(signature.toString())\r\n        // return {\r\n        //   signature,\r\n        //   policy\r\n        // }\r\n        return await this.axios({\r\n          url: \'http://\' + window.uploader_ip + \'/api/v1/tool/qyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            access_key_id: \'${config.access_key_id}\',\r\n            secret_access_key: \'${config.secret_access_key}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            redirect: \'${config.redirect}\',\r\n            storage_type: \'${config.storage_type}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        const formData = new FormData()\r\n        formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        formData.append(\'redirect\', \'${config.redirect}\')\r\n        formData.append(\'file\', file.file)\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"POST\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '(() => {\r\n	return {\r\n		// 用户视图能看见什么样的表单\r\n		config: [\r\n			{\r\n				\"type\":\"string\",\r\n				\"label\":\"设定空间名\",\r\n				\"field\":\"bucket\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入Bucket空间名\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定AccessKeyId\",\r\n				\"field\":\"access_key_id\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入access key id\"\r\n			},\r\n      {\r\n				\"type\":\"password\",\r\n				\"label\":\"设定AccessKey\",\r\n				\"field\":\"secret_access_key\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请输入AccessKey\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定区域\",\r\n				\"field\":\"area\",\r\n				\"default\":\"\",\r\n				\"required\":true,\r\n				\"placeholder\":\"请选择区域\",\r\n        \"options\": [\r\n          { label: \"北京3区-A\", value: \"pek3a\" },\r\n          { label: \"北京3区\", value: \"pek3b\" },\r\n          { label: \"上海1区\", value: \"sh1a\" },\r\n          { label: \"广东2区\", value: \"gd2\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"指定存储路径\",\r\n				\"field\":\"path\",\r\n				\"default\":\"\",\r\n				\"required\":false,\r\n				\"placeholder\":\"例如img/\"\r\n			},\r\n      {\r\n				\"type\":\"option\",\r\n				\"label\":\"设定存储级别\",\r\n				\"field\":\"storage_type\",\r\n				\"default\":\"STANDARD\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入用户名\",\r\n        \"options\": [\r\n          { label: \"标准存储\", value: \"STANDARD\" },\r\n          { label: \"低频存储\", value: \"STANDARD_IA\" }\r\n        ]\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定重定向\",\r\n				\"field\":\"redirect\",\r\n				\"default\":\"http://.com/callback\",\r\n				\"required\":false,\r\n				\"placeholder\":\"请输入重定向地址\"\r\n			},\r\n      {\r\n				\"type\":\"string\",\r\n				\"label\":\"设定基地址\",\r\n				\"field\":\"baseUrl\",\r\n				\"default\":\"https://${config.bucket}.${config.area}.qingstor.com/\",\r\n				\"required\":false,\r\n        \"hidden\": true,\r\n				\"placeholder\":\"请输入基地址\"\r\n			}\r\n		],\r\n		// 上传配置\r\n		uploader: {\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\r\n			beforeEach: async function (file) {\r\n				// const json = {\r\n        //   \"key\": \"${config.path}\" + file.filename,\r\n        //   \"redirect\": \"${config.redirect}\"\r\n        // }\r\n        // console.log(json)\r\n        // const policy = window.btoa(JSON.stringify(json))\r\n        // // const policy = window.btoa(json)\r\n        // const signature = this.crypto.HmacSHA256(\'${config.secret_access_key}\', policy).toString()\r\n        // console.log(signature.toString())\r\n        // return {\r\n        //   signature,\r\n        //   policy\r\n        // }\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/qyunSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            access_key_id: \'${config.access_key_id}\',\r\n            secret_access_key: \'${config.secret_access_key}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            redirect: \'${config.redirect}\',\r\n            storage_type: \'${config.storage_type}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\r\n			request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        console.log(res)\r\n        const formData = new FormData()\r\n        formData.append(\'x-qs-storage-clas\', \'${config.storage_type}\')\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'access_key_id\', \'${config.access_key_id}\')\r\n        formData.append(\'redirect\', \'${config.redirect}\')\r\n        formData.append(\'file\', file.file)\r\n				return {\r\n					url: \"http://${config.bucket}.${config.area}.qingstor.com\",\r\n					method: \"POST\",\r\n          data: formData\r\n				}\r\n			},\r\n			// 注意：不要使用箭头函数，否则会改变this的指向\r\n			// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \"\", hash: \"\" }格式\r\n			response: function (res) {\r\n				return {\r\n					img_url: \"\",\r\n					hash: \"\"\r\n				}\r\n			}\r\n		}\r\n	}\r\n})()', '2023-03-07 03:13:57', '2023-03-07 03:13:57', '1.0.3', '1.0.3', '将写死的ip地址替换成当前服务所用后端ip');
INSERT INTO `bucketsourcehistory` VALUES ('f8ae5a0e-f68b-49c4-9e98-52d42a1b8aa9', '2b25ef86-1b8a-4c7c-806c-b59a0d196ca8', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      fileToBase64: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + ffile.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          //  + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            // Authorization: \'OSS ${config.accessKeyId}:\' + res.data.data.token,\r\n            // Date: new Date().toUTCString(),\r\n            // \'Content-Type\': \'image/png\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      fileToBase64: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.accessKeyId}\')\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\' + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            // Authorization: \'OSS ${config.accessKeyId}:\' + res.data.data.token,\r\n            // Date: new Date().toUTCString(),\r\n            // \'Content-Type\': \'image/png\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 04:51:27', '2022-12-12 04:51:27', '1.0.4', '1.0.4', 'aa');
INSERT INTO `bucketsourcehistory` VALUES ('fce1851f-b82c-4b27-9165-7f07d56be654', '2b25ef86-1b8a-4c7c-806c-b59a0d196ca8', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如?x-oss-process=xxx\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"domain\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      fileToBase64: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          //  + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            // Authorization: \'OSS ${config.accessKeyId}:\' + res.data.data.token,\r\n            // Date: new Date().toUTCString(),\r\n            // \'Content-Type\': \'image/png\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename,\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  // mine-types类型列表\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定KeyId\",\r\n          \"field\":\"accessKeyId\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeyId\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定KeySecret\",\r\n          \"field\":\"accessKeySecret\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入KeySecret\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名(Bucket)\"\r\n      },\r\n      {\r\n          \"type\":\"option\",\r\n          \"label\":\"存储区域\",\r\n          \"field\":\"area\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储区域\",\r\n          \"options\": [\r\n            { label: \"华东1(杭州)\", value: \"oss-cn-hangzhou\" },\r\n            { label: \"华东2(上海)\", value: \"oss-cn-shanghai\" },\r\n            { label: \"华东5(南京)\", value: \"oss-cn-nanjing\" },\r\n            { label: \"华东6(福州)\", value: \"oss-cn-fuzhou\" },\r\n            { label: \"华北1(青岛)\", value: \"oss-cn-qingdao\" },\r\n            { label: \"华北2(北京)\", value: \"oss-cn-beijing\" },\r\n            { label: \"华北3(张家口)\", value: \"oss-cn-zhangjiakou\" },\r\n            { label: \"华北5(呼伦浩特)\", value: \"oss-cn-huhehaote\" },\r\n            { label: \"华北6(乌兰察布)\", value: \"oss-cn-wulanchabu\" },\r\n            { label: \"华南1(深圳)\", value: \"oss-cn-shenzhen\" },\r\n            { label: \"华南2(河源)\", value: \"oss-cn-heyuan\" },\r\n            { label: \"华南3(广州)\", value: \"oss-cn-guangzhou\" },\r\n            { label: \"西南1(成都)\", value: \"oss-cn-chengdu\" }\r\n          ]\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"https://${config.bucket}.${config.area}.aliyuncs.com/\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      fileToBase64: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/aliSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            accessKeyId: \'${config.accessKeyId}\',\r\n            accessKeySecret: \'${config.accessKeySecret}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const res = await this.beforeEach(file)\r\n        const formData = new FormData()\r\n        formData.append(\'OSSAccessKeyId\', \'${config.accessKeyId}\')\r\n        formData.append(\'policy\', res.data.data.policy)\r\n        formData.append(\'key\', \'${config.path}\' + file.filename)\r\n        formData.append(\'success_action_status\', 200)\r\n        formData.append(\'signature\', res.data.data.signature)\r\n        formData.append(\'file\', file.file)\r\n        return {\r\n          url: \'https://${config.bucket}.${config.area}.aliyuncs.com/\',\r\n          //  + encodeURI(\'${config.path}\') + encodeURI(file.filename),\r\n          method: \'POST\',\r\n          data: formData,\r\n          headers: {\r\n            Host: \'${config.bucket}.${config.area}.aliyuncs.com\',\r\n            // Authorization: \'OSS ${config.accessKeyId}:\' + res.data.data.token,\r\n            // Date: new Date().toUTCString(),\r\n            // \'Content-Type\': \'image/png\',\r\n            \'Content-Type\': \'multipart/form-data;\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename,\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 05:33:50', '2022-12-12 05:33:50', '1.0.5', '1.0.4', '添加网址后缀以及自定义域名');
INSERT INTO `bucketsourcehistory` VALUES ('fdd30462-f4fc-408e-a24e-40aadfe3c3c1', '6b668061-79f4-4dc7-9d0e-7eb7a9d21884', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        const signature = res.data.data\r\n        return {\r\n          method: \'PUT\',\r\n          url: \'https://v0.api.upyun.com/${config.bucket}/${config.path}\' + file.filename,\r\n          headers: {\r\n            Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n            Authorization: signature.signature,\r\n            Date: new Date().toUTCString(),\r\n            \'Content-Type\': mimeTypes[suffix] || \'application/octet-stream\'\r\n          },\r\n          data: file.file\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  const mimeTypes = {\r\n    gif: \'image/gif\',\r\n    jpeg: \'image/jpeg\',\r\n    jpg: \'image/jpeg\',\r\n    jp2: \'image/jp2\',\r\n    jpe: \'image/jpeg\',\r\n    png: \'image/png\',\r\n    webp: \'image/webp\',\r\n    ico: \'image/x-icon\',\r\n    tif: \'image/tiff\',\r\n    tiff: \'image/tiff\',\r\n    wbmp: \'image/vnd.wap.wbmp\',\r\n    jng: \'image/x-jng\',\r\n    bmp: \'image/x-ms-bmp\',\r\n    svg: \'image/svg+xml\',\r\n    svgz: \'image/svg+xml\',\r\n    cgm: \'image/cgm\',\r\n    djv: \'image/vnd.djvu\',\r\n    djvu: \'image/vnd.djvu\',\r\n    ief: \'image/ief\',\r\n    mac: \'image/x-macpaint\',\r\n    pct: \'image/pict\',\r\n  }\r\n  return {\r\n    config: [\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定存储空间名\",\r\n          \"field\":\"bucket\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入存储空间名\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定操作员\",\r\n          \"field\":\"operator\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员，例如: me\"\r\n      },\r\n      {\r\n          \"type\":\"password\",\r\n          \"label\":\"设定操作员密码\",\r\n          \"field\":\"password\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"请输入操作员密码\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定加速域名\",\r\n          \"field\":\"domain\",\r\n          \"default\":\"\",\r\n          \"required\":true,\r\n          \"placeholder\":\"例如http:/xxx.test.upcdn.net/\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"指定存储路径\",\r\n          \"field\":\"path\",\r\n          \"default\":\"\",\r\n          \"required\":false,\r\n          \"placeholder\":\"例如img/\"\r\n      },\r\n      {\r\n        \"type\":\"string\",\r\n        \"label\":\"网址后缀\",\r\n        \"field\":\"suffix\",\r\n        \"default\":\"\",\r\n        \"required\":false,\r\n        \"placeholder\":\"例如!imgslim\"\r\n      },\r\n      {\r\n          \"type\":\"string\",\r\n          \"label\":\"设定自定义域名\",\r\n          \"field\":\"baseUrl\",\r\n          \"default\": \"${config.domain}\",\r\n          \"required\":false,\r\n          \"hidden\": true,\r\n          \"placeholder\":\"例如https://xxxx.com\"\r\n      }\r\n    ],\r\n    uploader: {\r\n      useGetSuffix: function (filePath, identify = \'.\') {\r\n        // 获取以identify为标识符的位置\r\n        var index = filePath.lastIndexOf(identify);\r\n        // 获取后缀\r\n        var value = filePath.substr(index + 1);\r\n        return value;\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file) {\r\n        return await this.axios({url: \'http://127.0.0.1:3002/api/v1/tool/tencentSign\',\r\n          method: \"POST\",\r\n          headers: {\r\n            authorization: localStorage.getItem(\'token\')\r\n          },\r\n          data: {\r\n            version: \'${config.version}\',\r\n            secretId: \'${config.secretId}\',\r\n            secretKey: \'${config.secretKey}\',\r\n            bucket: \'${config.bucket}\',\r\n            path: \'${config.path}\',\r\n            area: \'${config.area}\',\r\n            filename: file.filename\r\n          }\r\n        })\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const version = \'${config.version}\'\r\n        const suffix = this.useGetSuffix(file.filename)\r\n        const res = await this.beforeEach(file)\r\n        if (version === \'v4\') {\r\n          \r\n        } else {\r\n          const signature = res.data.data\r\n          return {\r\n            method: \'PUT\',\r\n            url: \'http://${config.bucket}.cos.${config.area}.myqcloud.com/${config.path}\' + file.filename,\r\n            headers: {\r\n              Host: \'${config.bucket}.cos.${config.area}.myqcloud.com\',\r\n              Authorization: \'q-sign-algorithm=sha1&q-ak=${config.secretId}&q-sign-time=\' + signature.signTime + \'&q-key-time=\' + signature.signTime + \'&q-header-list=host&q-url-param-list=&q-signature=\' + signature.signature,\r\n              \'Content-Type\': mimeTypes[suffix]\r\n            },\r\n            data: file.file\r\n          }\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res, file) {\r\n        const tmp = res.data.content\r\n        return {\r\n          // img_url: tmp.path,\r\n          // hash: tmp.sha\r\n          img_url: \'${config.path}\' + file.filename + \'${config.suffix}\',\r\n          hash: \'${config.path}\' + file.filename\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-12 09:57:12', '2022-12-12 09:57:12', '1.0.1', '1.0.0', '配置request内容');
INSERT INTO `bucketsourcehistory` VALUES ('fea97222-0c11-4e4b-9870-10ffd01da5a8', 'f68dd625-c5ce-4ef2-a3ca-5a843baf76fa', '(() => {\r\n  return {\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}@${config.branch}/${config.repo}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${file.filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        // tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n        //   const keys = key.split(\'.\')\r\n        //   if (keys[0] === \'file\') {\r\n        //     return file[keys[1]]\r\n        //   }\r\n        // })\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: tmp\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '(() => {\r\n  return {\r\n    config: [\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定用户名\",\r\n            \"field\":\"username\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github用户名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定仓库名\",\r\n            \"field\":\"repo\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"分支\",\r\n            \"field\":\"branch\",\r\n            \"default\":\"main\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github仓库分支名\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"私人令牌\",\r\n            \"field\":\"token\",\r\n            \"default\":\"\",\r\n            \"required\":true,\r\n            \"placeholder\":\"请输入github token\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"指定存储路径\",\r\n            \"field\":\"path\",\r\n            \"default\":\"\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如img/\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"设定自定义域名\",\r\n            \"field\":\"domain\",\r\n            \"default\":\"https://cdn.jsdelivr.net/gh/${config.username}/${config.repo}/\",\r\n            \"required\":false,\r\n            \"hidden\": true,\r\n            \"placeholder\":\"例如https://xxxx.com\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"提交说明\",\r\n            \"field\":\"commit_messages\",\r\n            \"default\":\"upload ${file.filename}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"例如 upload test\"\r\n        },\r\n        {\r\n            \"type\":\"string\",\r\n            \"label\":\"访问前缀\",\r\n            \"field\":\"baseUrl\",\r\n            \"hidden\":true,\r\n            // https://raw.githubusercontent.com/${config.username}/${config.repo}/${config.branch}/\r\n            \"default\":\"${config.domain}\",\r\n            \"required\":false,\r\n            \"placeholder\":\"请输入baseUrl\"\r\n        }\r\n    ],\r\n    uploader: {\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 前置操作：例如数据处理或者获取token等操作\r\n      beforeEach: async function (file, prefix = false) {\r\n        return new Promise((resolve, reject) => {\r\n          const reader = new FileReader();\r\n          reader.readAsDataURL(file);\r\n          reader.onload = () => {\r\n            const result = reader.result\r\n            if (prefix) {\r\n              resolve(result)\r\n            } else {\r\n              resolve(result.split(\",\").pop())\r\n            }\r\n          };\r\n          reader.onerror = (error) => {\r\n            // reject(error)\r\n            console.log(\'123\', error)\r\n          };\r\n        });\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      // 需要返回axios的RequestConfig请求配置\r\n      request: async function (file) {\r\n        const baseUrl = \'https://api.github.com/repos/\'\r\n        const content = await this.beforeEach(file.file)\r\n        // 替换config中的commit_messages\r\n        let tmp = \'${config.commit_messages}\'\r\n        // tmp = tmp.replace(/\\$\\{((file).*?)\\}/g, (v, key) => {\r\n        //   const keys = key.split(\'.\')\r\n        //   if (keys[0] === \'file\') {\r\n        //     return file[keys[1]]\r\n        //   }\r\n        // })\r\n        return {\r\n          url: baseUrl + \'${config.username}/${config.repo}/contents/${config.path}\' + file.filename,\r\n          method: \'PUT\',\r\n          data: {\r\n            branch: \'${config.branch}\',\r\n            content,\r\n            message: tmp\r\n          },\r\n          headers: {\r\n            Authorization: \'token ${config.token}\',\r\n            Accept: \'application/vnd.github.v3+json\'\r\n          },\r\n        }\r\n      },\r\n      // 注意：不要使用箭头函数，否则会改变this的指向\r\n      response: function (res) {\r\n        const tmp = res.data.content\r\n        return {\r\n          img_url: tmp.path,\r\n          hash: tmp.sha\r\n        }\r\n      }\r\n    }\r\n  }\r\n})()', '2022-12-09 14:22:41', '2022-12-09 14:22:41', '1.0.4', '1.0.3', '更新domain生成规则，添加@branch配置');

-- ----------------------------
-- Table structure for dict
-- ----------------------------
DROP TABLE IF EXISTS `dict`;
CREATE TABLE `dict`  (
  `id` char(36) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL COMMENT 'uuid',
  `createdAt` datetime(0) NOT NULL,
  `updatedAt` datetime(0) NOT NULL,
  `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '字典名称',
  `code` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '字典编码：唯一',
  `values` json NOT NULL COMMENT '字典内容',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of dict
-- ----------------------------
INSERT INTO `dict` VALUES ('23c2dbd8-7635-4125-ab49-1eeb6b46cdc2', '2022-10-24 02:16:50', '2022-11-01 02:45:53', ' 性别', 'user_gender', '[{\"label\": \"男\", \"value\": \"男\"}, {\"label\": \"女\", \"value\": \"女\"}, {\"label\": \"阴阳人\", \"value\": \"阴阳人\"}, {\"label\": \"保密\", \"value\": \"保密\"}]');
INSERT INTO `dict` VALUES ('47bbd2d9-956d-4f62-bc46-26728a405e77', '2022-10-24 02:15:34', '2022-12-13 09:17:53', '存储源', 'bucket_source', '[{\"label\": \"本地存储桶\", \"value\": \"local\"}, {\"label\": \"七牛云 KODO\", \"value\": \"qiniu\"}, {\"label\": \"gitee\", \"value\": \"gitee\"}, {\"label\": \"github\", \"value\": \"github\"}, {\"label\": \"Leancloud\", \"value\": \"leancloud\"}, {\"label\": \"腾讯COS\", \"value\": \"cos\"}, {\"label\": \"阿里云OSS\", \"value\": \"oss\"}, {\"label\": \"又拍云USS\", \"value\": \"uss\"}, {\"label\": \"华为云OBS\", \"value\": \"obs\"}, {\"label\": \"NextCloud网盘\", \"value\": \"nextcloud\"}, {\"label\": \"天翼云\", \"value\": \"oos\"}, {\"label\": \"青云\", \"value\": \"qingstor\"}]');
INSERT INTO `dict` VALUES ('88aeab7a-1ada-4fb9-8f2f-e9fba603aeb9', '2022-10-24 02:14:44', '2022-10-27 07:09:46', '用户职业', 'user_major', '[{\"label\": \"程序猿\", \"value\": \"程序猿\"}, {\"label\": \"程序媛\", \"value\": \"程序媛\"}, {\"label\": \"设计师\", \"value\": \"设计师\"}, {\"label\": \"开发者\", \"value\": \"开发者\"}, {\"label\": \"学生\", \"value\": \"学生\"}, {\"label\": \"其他\", \"value\": \"其他\"}]');
INSERT INTO `dict` VALUES ('9c91a16d-59a8-4a5a-bda3-5be49c749853', '2022-11-23 01:56:47', '2022-11-24 01:27:14', '相册标签', 'album_tag', '[{\"label\": \"连载\", \"value\": \"连载\"}, {\"label\": \"已完结\", \"value\": \"已完结\"}, {\"label\": \"每周一\", \"value\": \"每周一\"}, {\"label\": \"每周二\", \"value\": \"每周二\"}, {\"label\": \"每周三\", \"value\": \"每周三\"}, {\"label\": \"每周四\", \"value\": \"每周四\"}, {\"label\": \"每周五\", \"value\": \"每周五\"}, {\"label\": \"每周六\", \"value\": \"每周六\"}, {\"label\": \"每周日\", \"value\": \"每周日\"}, {\"label\": \"10:00\", \"value\": \"10:00\"}, {\"label\": \"12:00\", \"value\": \"12:00\"}]');
INSERT INTO `dict` VALUES ('b48c33b6-ab62-4cb0-a9a7-ae58f1c0c21e', '2022-10-24 02:15:19', '2022-12-13 09:51:09', ' 存储源图标', 'bucket_source_icon', '[{\"color\": \"#3fcaff\", \"label\": \"qiniu\", \"value\": \"bed-qiniu\"}, {\"color\": \"rgb(199, 29, 35)\", \"label\": \"gitee\", \"value\": \"bed-gitee\"}, {\"color\": \"#24292f\", \"label\": \"github\", \"value\": \"bed-github\"}, {\"color\": \"#18768b\", \"label\": \"local\", \"value\": \"bed-localyun\"}, {\"color\": \"#2c97e8\", \"label\": \"leancloud\", \"value\": \"bed-leancloud\"}, {\"color\": \"#e6221b\", \"label\": \"obs\", \"value\": \"bed-huawei\"}, {\"color\": \"#ff6a00\", \"label\": \"oss\", \"value\": \"bed-aliyun\"}, {\"color\": \"#0fa8ff\", \"label\": \"cos\", \"value\": \"bed-tengxunyun\"}, {\"color\": \"#6bcfed\", \"label\": \"uss\", \"value\": \"bed-upyun\"}, {\"color\": \"#0f9ae6\", \"label\": \"nextcloud\", \"value\": \"bed-nextcloud\"}, {\"color\": \"#de0629\", \"label\": \"oos\", \"value\": \"bed-tyun\"}, {\"color\": \"rgb(3, 189, 97)\", \"label\": \"qingstor\", \"value\": \"bed-qingyun\"}]');
INSERT INTO `dict` VALUES ('b6470946-d96d-4135-9904-76422125cac8', '2022-10-21 07:29:01', '2022-11-01 02:51:57', '角色', 'user_role', '[{\"label\": \"管理员\", \"value\": 10}, {\"label\": \"普通用户\", \"value\": 1}]');
INSERT INTO `dict` VALUES ('f5dbac3d-be67-498c-8795-485b8ff3ef27', '2022-10-24 02:16:34', '2022-10-24 02:16:34', '显示状态', 'show_status', '[{\"label\": \"显示\", \"value\": true}, {\"label\": \"不显示\", \"value\": false}]');

-- ----------------------------
-- Table structure for habits
-- ----------------------------
DROP TABLE IF EXISTS `habits`;
CREATE TABLE `habits`  (
  `id` char(36) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL COMMENT 'uuid',
  `uid` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '用户id',
  `shortKey` json NOT NULL COMMENT '快捷键',
  `showUpdateTip` tinyint(1) NOT NULL DEFAULT 1 COMMENT '上传成功提示',
  `showCopyTip` tinyint(1) NOT NULL DEFAULT 1 COMMENT '复制成功提示',
  `showDeleteTip` tinyint(1) NOT NULL DEFAULT 1 COMMENT '删除成功提示',
  `pasteStyle` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'url' COMMENT '上传后自动复制图片地址类型，支持：url、markdown',
  `autoPaste` tinyint(1) NOT NULL DEFAULT 0 COMMENT '上传后自动复制图片地址',
  `current` json NULL COMMENT '当前使用图床',
  `link_format` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '![]($url)' COMMENT '链接格式，默认是 ![]($url)',
  `createdAt` datetime(0) NOT NULL,
  `updatedAt` datetime(0) NOT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of habits
-- ----------------------------
INSERT INTO `habits` VALUES ('13a7df3c-feb6-4173-8865-272b6920329c', '67b5ff47-c78e-4f13-8808-791a5690e4e9', '[{\"id\": 1, \"key\": \"快捷上传\", \"label\": \"点击快捷键自动上传粘贴板中的图片\", \"value\": \"Command + K\"}, {\"id\": 2, \"key\": \"帮助中心\", \"label\": \"点击快捷键自动打开帮助中心窗口\", \"value\": \"Command + H\"}, {\"id\": 3, \"key\": \"个人中心\", \"label\": \"点击快捷键自动进入个人中心\", \"value\": \"Command + P + C\"}, {\"id\": 4, \"key\": \"上传网络图片\", \"label\": \"点击快捷键自动上传粘贴板中的网络图片\", \"value\": \"Command + P + C\"}, {\"id\": 5, \"key\": \"快捷退出\", \"label\": \"点击快捷键自动退出登录\", \"value\": \"Command + P + C\"}]', 1, 1, 1, 'url', 1, '{}', '![${filename}](${url})', '2023-03-03 08:21:24', '2023-03-03 08:21:24');
INSERT INTO `habits` VALUES ('2b2b5d80-8c89-4049-aaa3-0d76f44d79f5', 'd5a0a7b5-3655-48d2-b42c-2db94e83ce0d', '[{\"id\": 1, \"key\": \"快捷上传\", \"label\": \"点击快捷键自动上传粘贴板中的图片\", \"value\": \"Command + K\"}, {\"id\": 2, \"key\": \"帮助中心\", \"label\": \"点击快捷键自动打开帮助中心窗口\", \"value\": \"Command + H\"}, {\"id\": 3, \"key\": \"个人中心\", \"label\": \"点击快捷键自动进入个人中心\", \"value\": \"Command + P + C\"}, {\"id\": 4, \"key\": \"上传网络图片\", \"label\": \"点击快捷键自动上传粘贴板中的网络图片\", \"value\": \"Command + P + C\"}, {\"id\": 5, \"key\": \"快捷退出\", \"label\": \"点击快捷键自动退出登录\", \"value\": \"Command + P + C\"}]', 1, 1, 1, 'url', 1, '{}', '![${filename}](${url})', '2022-11-04 06:22:19', '2022-11-04 06:22:19');
INSERT INTO `habits` VALUES ('3340ae08-0451-447c-bcb0-c2fedab4526a', 'c1803cf0-bd6e-4459-a9d1-1832bb50db18', '[{\"id\": 1, \"key\": \"快捷上传\", \"label\": \"点击快捷键自动上传粘贴板中的图片\", \"value\": \"Command + K\"}, {\"id\": 2, \"key\": \"帮助中心\", \"label\": \"点击快捷键自动打开帮助中心窗口\", \"value\": \"Command + H\"}, {\"id\": 3, \"key\": \"个人中心\", \"label\": \"点击快捷键自动进入个人中心\", \"value\": \"Command + P + C\"}, {\"id\": 4, \"key\": \"上传网络图片\", \"label\": \"点击快捷键自动上传粘贴板中的网络图片\", \"value\": \"Command + P + C\"}, {\"id\": 5, \"key\": \"快捷退出\", \"label\": \"点击快捷键自动退出登录\", \"value\": \"Command + P + C\"}]', 1, 1, 1, 'custom', 1, '{}', '![${filename}](${url})', '2023-03-05 10:40:24', '2023-03-05 10:41:09');
INSERT INTO `habits` VALUES ('36585c29-6e84-4fba-a3d0-91645060fb75', '29dcb279-24d4-4252-80cb-9a299faacc76', '[{\"id\": 1, \"key\": \"快捷上传\", \"label\": \"点击快捷键自动上传粘贴板中的图片\", \"value\": \"Command + K\"}, {\"id\": 2, \"key\": \"帮助中心\", \"label\": \"点击快捷键自动打开帮助中心窗口\", \"value\": \"Command + H\"}, {\"id\": 3, \"key\": \"个人中心\", \"label\": \"点击快捷键自动进入个人中心\", \"value\": \"Command + P + C\"}, {\"id\": 4, \"key\": \"上传网络图片\", \"label\": \"点击快捷键自动上传粘贴板中的网络图片\", \"value\": \"Command + P + C\"}, {\"id\": 5, \"key\": \"快捷退出\", \"label\": \"点击快捷键自动退出登录\", \"value\": \"Command + P + C\"}]', 1, 1, 1, 'url', 1, '{\"id\": \"e40ab1d0-1408-4469-a37f-97e873128dbb\", \"tag\": \"本地存储桶\", \"name\": \"Y-pic\", \"type\": \"local\", \"config\": \"{\\\"accessKey\\\":\\\"mVGmIkaYxQTAdr2OVQrlxZVTUMMZHPl1DfCSCusn\\\",\\\"secretKey\\\":\\\"okkbqh5DaceVTr1AVfOCnH6XLi_xynQo7DlA2SQM\\\",\\\"bucket_name\\\":\\\"yaju\\\",\\\"domain\\\":\\\"http://img.itchenliang.club/\\\",\\\"area\\\":\\\"qiniu.region.z0\\\",\\\"suffix\\\":\\\"\\\",\\\"path\\\":\\\"picture-ped-img/\\\",\\\"baseUrl\\\":\\\"${config.domain}\\\"}\", \"plugin\": \"(() => {\\r\\n  return {\\r\\n    version: \'1.0.0\',\\r\\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#本地存储桶\',\\r\\n    config: [\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定AccessKey\\\",\\r\\n        \\\"field\\\":\\\"accessKey\\\",\\r\\n        \\\"default\\\":\\\"mVGmIkaYxQTAdr2OVQrlxZVTUMMZHPl1DfCSCusn\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入AccessKey\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定SecretKey\\\",\\r\\n        \\\"field\\\":\\\"secretKey\\\",\\r\\n        \\\"default\\\":\\\"okkbqh5DaceVTr1AVfOCnH6XLi_xynQo7DlA2SQM\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入SecretKey\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定存储空间名\\\",\\r\\n        \\\"field\\\":\\\"bucket_name\\\",\\r\\n        \\\"default\\\":\\\"yaju\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入存储空间名\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定访问网址\\\",\\r\\n        \\\"field\\\":\\\"domain\\\",\\r\\n        \\\"default\\\":\\\"http://img.itchenliang.club/\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入访问网址\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"option\\\",\\r\\n        \\\"label\\\":\\\"设定存储区域\\\",\\r\\n        \\\"field\\\":\\\"area\\\",\\r\\n        \\\"default\\\":\\\"qiniu.region.z0\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"options\\\": [\\r\\n          {\\r\\n            \\\"label\\\": \\\"华东区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.z0\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"华北区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.z1\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"华南区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.z2\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"北美区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.na0\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"新加坡区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.as0\\\"\\r\\n          }\\r\\n        ],\\r\\n        \\\"placeholder\\\":\\\"请选择存储区域\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定网址后缀\\\",\\r\\n        \\\"field\\\":\\\"suffix\\\",\\r\\n        \\\"default\\\":\\\"\\\",\\r\\n        \\\"required\\\":false,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"例如: imageView2/0/q/75|watermark/2/text/6ZuF5bGF5peF5ri45rCR5a6_/font/5a6L5L2T/fontsize/360/fill/I0ZBRkFGQQ==/dissolve/100/gravity/SouthEast/dx/15/dy/15|imageslim\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"指定存储路径\\\",\\r\\n        \\\"field\\\":\\\"path\\\",\\r\\n        \\\"default\\\":\\\"picture-ped-img/\\\",\\r\\n        \\\"required\\\":false,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"例如: img/\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"访问前缀\\\",\\r\\n        \\\"field\\\":\\\"baseUrl\\\",\\r\\n        \\\"hidden\\\":true,\\r\\n        \\\"default\\\":\\\"${config.domain}\\\",\\r\\n        \\\"required\\\":false,\\r\\n        \\\"placeholder\\\":\\\"请输入baseUrl\\\"\\r\\n      }\\r\\n    ],\\r\\n    uploader: {\\r\\n      // 注意：不要使用箭头函数，否则会改变this的指向\\r\\n      beforeEach: async function (file) {\\r\\n        return await this.axios({\\r\\n          url: \'http://124.222.54.192:3002/api/v1/tool/qiniuSign\',\\r\\n          method: \\\"POST\\\",\\r\\n          headers: {\\r\\n            authorization: localStorage.getItem(\'token\')\\r\\n          },\\r\\n          data: {\\r\\n            accessKey: \'${config.accessKey}\',\\r\\n            secretKey: \'${config.secretKey}\',\\r\\n            bucket: \'${config.bucket_name}\',\\r\\n            expires: 7200\\r\\n          }\\r\\n        })\\r\\n      },\\r\\n      // 注意：不要使用箭头函数，否则会改变this的指向\\r\\n      request: async function (file) {\\r\\n        const res = await this.beforeEach(file)\\r\\n        const formData = new FormData()\\r\\n        formData.append(\'file\', file.file)\\r\\n        formData.append(\'token\', res.data.data.token)\\r\\n        formData.append(\'key\', \'${config.path}\' + file.filename)\\r\\n        formData.append(\'fname\', file.filename)\\r\\n        return {\\r\\n          url: \'https://upload.qiniup.com/\',\\r\\n          method: \'post\',\\r\\n          data: formData\\r\\n        }\\r\\n      },\\r\\n      // 注意：不要使用箭头函数，否则会改变this的指向\\r\\n      response: function (res) {\\r\\n        const tmp = res.data\\r\\n        return {\\r\\n          img_url: tmp.key,\\r\\n          hash: tmp.hash\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n})()\", \"config_baseUrl\": \"http://img.itchenliang.club/\"}', '![${filename}](${url})', '2023-03-03 06:08:20', '2023-03-03 06:12:09');
INSERT INTO `habits` VALUES ('453ae06f-8706-41d0-8965-24e70168d02a', '6a7a4a31-2e6d-4e8d-ab98-63d90cd2284c', '[{\"id\": 1, \"key\": \"快捷上传\", \"label\": \"点击快捷键自动上传粘贴板中的图片\", \"value\": \"Control + Shift + k\"}, {\"id\": 2, \"key\": \"帮助中心\", \"label\": \"点击快捷键自动打开帮助中心窗口\", \"value\": \"Control + h\"}, {\"id\": 3, \"key\": \"个人中心\", \"label\": \"点击快捷键自动进入个人中心\", \"value\": \"Control + Shift + p\"}, {\"id\": 4, \"key\": \"上传网络图片\", \"label\": \"点击快捷键自动上传粘贴板中的网络图片\", \"value\": \"Control + Shift + U\"}, {\"id\": 5, \"key\": \"快捷退出\", \"label\": \"点击快捷键自动退出登录\", \"value\": \"Control + Shift + U\"}]', 1, 1, 1, 'url', 1, '{\"id\": \"97026000-ae03-4ef0-b74d-a25690c93f56\", \"tag\": \"本地存储桶\", \"name\": \"本地演示\", \"type\": \"local\", \"config\": \"{\\\"path\\\":\\\"upload/\\\",\\\"baseUrl\\\":\\\"http://124.222.54.192:3001\\\"}\", \"plugin\": \"(() => {\\r\\n\\treturn {\\r\\n\\t\\t// 用户视图能看见什么样的表单\\r\\n\\t\\tconfig: [\\r\\n      {\\r\\n        \\\"type\\\": \\\"string\\\",\\r\\n        \\\"label\\\":\\\"指定存储路径\\\",\\r\\n        \\\"field\\\": \\\"path\\\",\\r\\n        \\\"default\\\": \\\"\\\",\\r\\n        \\\"required\\\": true,\\r\\n        \\\"placeholder\\\":\\\"例如: upload/\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\": \\\"string\\\",\\r\\n        \\\"label\\\":\\\"访问前缀\\\",\\r\\n        \\\"field\\\": \\\"baseUrl\\\",\\r\\n        \\\"default\\\": \'http://\' + window.uploader_ip,\\r\\n        \\\"hidden\\\":true,\\r\\n        \\\"required\\\": true,\\r\\n        \\\"placeholder\\\":\\\"例如: upload/\\\"\\r\\n      },\\r\\n    ],\\r\\n\\t\\t// 上传配置\\r\\n\\t\\tuploader: {\\r\\n\\t\\t\\t// 注意：不要使用箭头函数，否则会改变this的指向\\r\\n\\t\\t\\t// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\\r\\n\\t\\t\\tbeforeEach: async function () {\\r\\n\\t\\t\\t\\t\\r\\n\\t\\t\\t},\\r\\n\\t\\t\\t// 注意：不要使用箭头函数，否则会改变this的指向\\r\\n\\t\\t\\t// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\\r\\n\\t\\t\\trequest: async function (file) {\\r\\n        const ip = `http://${window.uploader_ip}/api/v1/tool/upload`\\r\\n        const formData = new FormData()\\r\\n        formData.append(\'file\', file.file)\\r\\n        formData.append(\'path\', \'${config.path}\' + file.filename)\\r\\n\\t\\t\\t\\treturn {\\r\\n\\t\\t\\t\\t\\turl: ip,\\r\\n\\t\\t\\t\\t\\tmethod: \\\"post\\\",\\r\\n          data: formData\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t},\\r\\n\\t\\t\\t// 注意：不要使用箭头函数，否则会改变this的指向\\r\\n\\t\\t\\t// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \\\"\\\", hash: \\\"\\\" }格式\\r\\n\\t\\t\\tresponse: function (res) {\\r\\n        const tmp = res.data\\r\\n\\t\\t\\t\\treturn {\\r\\n\\t\\t\\t\\t\\timg_url: tmp.data.img_url,\\r\\n\\t\\t\\t\\t\\thash: tmp.data.hash\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t}\\r\\n})()\", \"config_baseUrl\": \"http://124.222.54.192:3001\"}', '[${filename}](${url})', '2022-10-26 06:16:35', '2023-03-07 03:16:00');
INSERT INTO `habits` VALUES ('4941d5f7-23e1-4950-9853-5a2e9484e363', '2b40d721-c895-436a-9dbd-0461f007f34c', '[{\"id\": 1, \"key\": \"快捷上传\", \"label\": \"点击快捷键自动上传粘贴板中的图片\", \"value\": \"Command + K\"}, {\"id\": 2, \"key\": \"帮助中心\", \"label\": \"点击快捷键自动打开帮助中心窗口\", \"value\": \"Command + H\"}, {\"id\": 3, \"key\": \"个人中心\", \"label\": \"点击快捷键自动进入个人中心\", \"value\": \"Command + P + C\"}, {\"id\": 4, \"key\": \"上传网络图片\", \"label\": \"点击快捷键自动上传粘贴板中的网络图片\", \"value\": \"Command + P + C\"}, {\"id\": 5, \"key\": \"快捷退出\", \"label\": \"点击快捷键自动退出登录\", \"value\": \"Command + P + C\"}]', 1, 1, 1, 'markdown', 1, '{\"id\": \"50aedc53-57f5-454c-b347-385f94545f3e\", \"tag\": \"本地存储桶\", \"name\": \"我的存储\", \"type\": \"local\", \"config\": \"{\\\"accessKey\\\":\\\"mVGmIkaYxQTAdr2OVQrlxZVTUMMZHPl1DfCSCusn\\\",\\\"secretKey\\\":\\\"okkbqh5DaceVTr1AVfOCnH6XLi_xynQo7DlA2SQM\\\",\\\"bucket_name\\\":\\\"yaju\\\",\\\"domain\\\":\\\"https://imgs.itchenliang.club/\\\",\\\"area\\\":\\\"qiniu.region.z0\\\",\\\"suffix\\\":\\\"\\\",\\\"path\\\":\\\"picture-ped-img/\\\",\\\"baseUrl\\\":\\\"${config.domain}\\\"}\", \"plugin\": \"(() => {\\r\\n  return {\\r\\n    version: \'1.0.0\',\\r\\n    config: [\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定AccessKey\\\",\\r\\n        \\\"field\\\":\\\"accessKey\\\",\\r\\n        \\\"default\\\":\\\"mVGmIkaYxQTAdr2OVQrlxZVTUMMZHPl1DfCSCusn\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入AccessKey\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定SecretKey\\\",\\r\\n        \\\"field\\\":\\\"secretKey\\\",\\r\\n        \\\"default\\\":\\\"okkbqh5DaceVTr1AVfOCnH6XLi_xynQo7DlA2SQM\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入SecretKey\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定存储空间名\\\",\\r\\n        \\\"field\\\":\\\"bucket_name\\\",\\r\\n        \\\"default\\\":\\\"yaju\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入存储空间名\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定访问网址\\\",\\r\\n        \\\"field\\\":\\\"domain\\\",\\r\\n        \\\"default\\\":\\\"https://imgs.itchenliang.club/\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入访问网址\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"option\\\",\\r\\n        \\\"label\\\":\\\"设定存储区域\\\",\\r\\n        \\\"field\\\":\\\"area\\\",\\r\\n        \\\"default\\\":\\\"qiniu.region.z0\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"options\\\": [\\r\\n          {\\r\\n            \\\"label\\\": \\\"华东区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.z0\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"华北区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.z1\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"华南区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.z2\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"北美区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.na0\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"新加坡区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.as0\\\"\\r\\n          }\\r\\n        ],\\r\\n        \\\"placeholder\\\":\\\"请选择存储区域\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定网址后缀\\\",\\r\\n        \\\"field\\\":\\\"suffix\\\",\\r\\n        \\\"default\\\":\\\"\\\",\\r\\n        \\\"required\\\":false,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"例如: imageView2/0/q/75|watermark/2/text/6ZuF5bGF5peF5ri45rCR5a6_/font/5a6L5L2T/fontsize/360/fill/I0ZBRkFGQQ==/dissolve/100/gravity/SouthEast/dx/15/dy/15|imageslim\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"指定存储路径\\\",\\r\\n        \\\"field\\\":\\\"path\\\",\\r\\n        \\\"default\\\":\\\"picture-ped-img/\\\",\\r\\n        \\\"required\\\":false,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"例如: img/\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"访问前缀\\\",\\r\\n        \\\"field\\\":\\\"baseUrl\\\",\\r\\n        \\\"hidden\\\":true,\\r\\n        \\\"default\\\":\\\"${config.domain}\\\",\\r\\n        \\\"required\\\":false,\\r\\n        \\\"placeholder\\\":\\\"请输入baseUrl\\\"\\r\\n      }\\r\\n    ],\\r\\n    uploader: {\\r\\n      // 注意：不要使用箭头函数，否则会改变this的指向\\r\\n      beforeEach: async function (file) {\\r\\n        return await this.axios({\\r\\n          url: \'http://124.222.54.192:3002/api/v1/tool/qiniuSign\',\\r\\n          method: \\\"POST\\\",\\r\\n          headers: {\\r\\n            authorization: localStorage.getItem(\'token\')\\r\\n          },\\r\\n          data: {\\r\\n            accessKey: \'${config.accessKey}\',\\r\\n            secretKey: \'${config.secretKey}\',\\r\\n            bucket: \'${config.bucket_name}\',\\r\\n            expires: 7200\\r\\n          }\\r\\n        })\\r\\n      },\\r\\n      // 注意：不要使用箭头函数，否则会改变this的指向\\r\\n      request: async function (file) {\\r\\n        const res = await this.beforeEach(file)\\r\\n        const formData = new FormData()\\r\\n        formData.append(\'file\', file.file)\\r\\n        formData.append(\'token\', res.data.data.token)\\r\\n        formData.append(\'key\', \'${config.path}\' + file.filename)\\r\\n        formData.append(\'fname\', file.filename)\\r\\n        return {\\r\\n          url: \'https://upload.qiniup.com/\',\\r\\n          method: \'post\',\\r\\n          data: formData\\r\\n        }\\r\\n      },\\r\\n      // 注意：不要使用箭头函数，否则会改变this的指向\\r\\n      response: function (res) {\\r\\n        const tmp = res.data\\r\\n        return {\\r\\n          img_url: tmp.key,\\r\\n          hash: tmp.hash\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n})()\", \"config_baseUrl\": \"https://imgs.itchenliang.club/\"}', '![]($url)', '2022-10-31 02:52:53', '2023-02-20 16:13:07');
INSERT INTO `habits` VALUES ('50c6579f-31ca-48de-865e-02638ddc5d4f', 'e894c81a-43e1-4eb3-96e1-1a810a9346e1', '[{\"id\": 1, \"key\": \"快捷上传\", \"label\": \"点击快捷键自动上传粘贴板中的图片\", \"value\": \"Command + K\"}, {\"id\": 2, \"key\": \"帮助中心\", \"label\": \"点击快捷键自动打开帮助中心窗口\", \"value\": \"Command + H\"}, {\"id\": 3, \"key\": \"个人中心\", \"label\": \"点击快捷键自动进入个人中心\", \"value\": \"Command + P + C\"}, {\"id\": 4, \"key\": \"上传网络图片\", \"label\": \"点击快捷键自动上传粘贴板中的网络图片\", \"value\": \"Command + P + C\"}, {\"id\": 5, \"key\": \"快捷退出\", \"label\": \"点击快捷键自动退出登录\", \"value\": \"Command + P + C\"}]', 1, 1, 1, 'url', 1, '{\"id\": \"8f78ef3c-d14b-48b7-ba86-ee0f39b4e04b\", \"tag\": \"本地存储桶\", \"name\": \"演示存储桶\", \"type\": \"local\", \"config\": \"{\\\"accessKey\\\":\\\"mVGmIkaYxQTAdr2OVQrlxZVTUMMZHPl1DfCSCusn\\\",\\\"secretKey\\\":\\\"okkbqh5DaceVTr1AVfOCnH6XLi_xynQo7DlA2SQM\\\",\\\"bucket_name\\\":\\\"yaju\\\",\\\"domain\\\":\\\"https://imgs.itchenliang.club/\\\",\\\"area\\\":\\\"qiniu.region.z0\\\",\\\"suffix\\\":\\\"\\\",\\\"path\\\":\\\"picture-ped-img/\\\",\\\"baseUrl\\\":\\\"${config.domain}\\\"}\", \"plugin\": \"(() => {\\r\\n  return {\\r\\n    version: \'1.0.0\',\\r\\n    config: [\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定AccessKey\\\",\\r\\n        \\\"field\\\":\\\"accessKey\\\",\\r\\n        \\\"default\\\":\\\"mVGmIkaYxQTAdr2OVQrlxZVTUMMZHPl1DfCSCusn\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入AccessKey\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定SecretKey\\\",\\r\\n        \\\"field\\\":\\\"secretKey\\\",\\r\\n        \\\"default\\\":\\\"okkbqh5DaceVTr1AVfOCnH6XLi_xynQo7DlA2SQM\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入SecretKey\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定存储空间名\\\",\\r\\n        \\\"field\\\":\\\"bucket_name\\\",\\r\\n        \\\"default\\\":\\\"yaju\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入存储空间名\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定访问网址\\\",\\r\\n        \\\"field\\\":\\\"domain\\\",\\r\\n        \\\"default\\\":\\\"https://imgs.itchenliang.club/\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入访问网址\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"option\\\",\\r\\n        \\\"label\\\":\\\"设定存储区域\\\",\\r\\n        \\\"field\\\":\\\"area\\\",\\r\\n        \\\"default\\\":\\\"qiniu.region.z0\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"options\\\": [\\r\\n          {\\r\\n            \\\"label\\\": \\\"华东区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.z0\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"华北区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.z1\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"华南区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.z2\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"北美区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.na0\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"新加坡区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.as0\\\"\\r\\n          }\\r\\n        ],\\r\\n        \\\"placeholder\\\":\\\"请选择存储区域\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定网址后缀\\\",\\r\\n        \\\"field\\\":\\\"suffix\\\",\\r\\n        \\\"default\\\":\\\"\\\",\\r\\n        \\\"required\\\":false,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"例如: imageView2/0/q/75|watermark/2/text/6ZuF5bGF5peF5ri45rCR5a6_/font/5a6L5L2T/fontsize/360/fill/I0ZBRkFGQQ==/dissolve/100/gravity/SouthEast/dx/15/dy/15|imageslim\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"指定存储路径\\\",\\r\\n        \\\"field\\\":\\\"path\\\",\\r\\n        \\\"default\\\":\\\"picture-ped-img/\\\",\\r\\n        \\\"required\\\":false,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"例如: img/\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"访问前缀\\\",\\r\\n        \\\"field\\\":\\\"baseUrl\\\",\\r\\n        \\\"hidden\\\":true,\\r\\n        \\\"default\\\":\\\"${config.domain}\\\",\\r\\n        \\\"required\\\":false,\\r\\n        \\\"placeholder\\\":\\\"请输入baseUrl\\\"\\r\\n      }\\r\\n    ],\\r\\n    uploader: {\\r\\n      // 注意：不要使用箭头函数，否则会改变this的指向\\r\\n      beforeEach: async function (file) {\\r\\n        return await this.axios({\\r\\n          url: \'http://124.222.54.192:3002/api/v1/tool/qiniuSign\',\\r\\n          method: \\\"POST\\\",\\r\\n          headers: {\\r\\n            authorization: localStorage.getItem(\'token\')\\r\\n          },\\r\\n          data: {\\r\\n            accessKey: \'${config.accessKey}\',\\r\\n            secretKey: \'${config.secretKey}\',\\r\\n            bucket: \'${config.bucket_name}\',\\r\\n            expires: 7200\\r\\n          }\\r\\n        })\\r\\n      },\\r\\n      // 注意：不要使用箭头函数，否则会改变this的指向\\r\\n      request: async function (file) {\\r\\n        const res = await this.beforeEach(file)\\r\\n        const formData = new FormData()\\r\\n        formData.append(\'file\', file.file)\\r\\n        formData.append(\'token\', res.data.data.token)\\r\\n        formData.append(\'key\', \'${config.path}\' + file.filename)\\r\\n        formData.append(\'fname\', file.filename)\\r\\n        return {\\r\\n          url: \'https://upload.qiniup.com/\',\\r\\n          method: \'post\',\\r\\n          data: formData\\r\\n        }\\r\\n      },\\r\\n      // 注意：不要使用箭头函数，否则会改变this的指向\\r\\n      response: function (res) {\\r\\n        const tmp = res.data\\r\\n        return {\\r\\n          img_url: tmp.key,\\r\\n          hash: tmp.hash\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n})()\", \"config_baseUrl\": \"https://imgs.itchenliang.club/\"}', '![${filename}](${url})', '2023-02-23 02:56:55', '2023-02-23 03:29:32');
INSERT INTO `habits` VALUES ('5bf4aa5d-e469-4a5f-af30-b311cbeab6f8', '38143ddb-7c7b-4807-95af-fda58a56b7e5', '[{\"id\": 1, \"key\": \"快捷上传\", \"label\": \"点击快捷键自动上传粘贴板中的图片\", \"value\": \"Command + K\"}, {\"id\": 2, \"key\": \"帮助中心\", \"label\": \"点击快捷键自动打开帮助中心窗口\", \"value\": \"Command + H\"}, {\"id\": 3, \"key\": \"个人中心\", \"label\": \"点击快捷键自动进入个人中心\", \"value\": \"Command + P + C\"}, {\"id\": 4, \"key\": \"上传网络图片\", \"label\": \"点击快捷键自动上传粘贴板中的网络图片\", \"value\": \"Command + P + C\"}, {\"id\": 5, \"key\": \"快捷退出\", \"label\": \"点击快捷键自动退出登录\", \"value\": \"Command + P + C\"}]', 1, 1, 1, 'ubb', 1, '{}', '![${filename}](${url})', '2023-03-03 01:43:34', '2023-03-03 01:46:04');
INSERT INTO `habits` VALUES ('60e9823f-5530-43d1-aa57-78f8734d729e', 'ac92782d-5e7e-4831-8843-bc2ace52ff90', '[{\"id\": 1, \"key\": \"快捷上传\", \"label\": \"点击快捷键自动上传粘贴板中的图片\", \"value\": \"Command + K\"}, {\"id\": 2, \"key\": \"帮助中心\", \"label\": \"点击快捷键自动打开帮助中心窗口\", \"value\": \"Command + H\"}, {\"id\": 3, \"key\": \"个人中心\", \"label\": \"点击快捷键自动进入个人中心\", \"value\": \"Command + P + C\"}, {\"id\": 4, \"key\": \"上传网络图片\", \"label\": \"点击快捷键自动上传粘贴板中的网络图片\", \"value\": \"Command + P + C\"}, {\"id\": 5, \"key\": \"快捷退出\", \"label\": \"点击快捷键自动退出登录\", \"value\": \"Command + P + C\"}]', 1, 1, 1, 'ubb', 1, '{}', '![${filename}](${url})', '2023-03-03 00:42:10', '2023-03-03 00:42:37');
INSERT INTO `habits` VALUES ('61330615-8ce7-47dc-9445-8e0578767c1d', '1134c1b7-5b4e-42e4-9378-9d7513d2dcda', '[{\"id\": 1, \"key\": \"快捷上传\", \"label\": \"点击快捷键自动上传粘贴板中的图片\", \"value\": \"Command + K\"}, {\"id\": 2, \"key\": \"帮助中心\", \"label\": \"点击快捷键自动打开帮助中心窗口\", \"value\": \"Command + H\"}, {\"id\": 3, \"key\": \"个人中心\", \"label\": \"点击快捷键自动进入个人中心\", \"value\": \"Command + P + C\"}, {\"id\": 4, \"key\": \"上传网络图片\", \"label\": \"点击快捷键自动上传粘贴板中的网络图片\", \"value\": \"Command + P + C\"}, {\"id\": 5, \"key\": \"快捷退出\", \"label\": \"点击快捷键自动退出登录\", \"value\": \"Command + P + C\"}]', 1, 1, 1, 'url', 1, '{}', '![${filename}](${url})', '2023-03-04 11:59:48', '2023-03-04 11:59:48');
INSERT INTO `habits` VALUES ('6d75ae9f-d39e-467d-ae17-21be8fe8f8de', '653ebfe3-62ed-4cf9-a735-7c4fc3c8a363', '[{\"id\": 1, \"key\": \"快捷上传\", \"label\": \"点击快捷键自动上传粘贴板中的图片\", \"value\": \"Command + K\"}, {\"id\": 2, \"key\": \"帮助中心\", \"label\": \"点击快捷键自动打开帮助中心窗口\", \"value\": \"Command + H\"}, {\"id\": 3, \"key\": \"个人中心\", \"label\": \"点击快捷键自动进入个人中心\", \"value\": \"Command + P + C\"}, {\"id\": 4, \"key\": \"上传网络图片\", \"label\": \"点击快捷键自动上传粘贴板中的网络图片\", \"value\": \"Command + P + C\"}, {\"id\": 5, \"key\": \"快捷退出\", \"label\": \"点击快捷键自动退出登录\", \"value\": \"Command + P + C\"}]', 1, 1, 1, 'url', 1, '{}', '![${filename}](${url})', '2023-02-26 08:15:06', '2023-02-26 08:15:06');
INSERT INTO `habits` VALUES ('76607c8f-0b6b-4385-957f-5f9e47e1bbd2', '09990b74-83de-49d9-a9b7-d9dee6de7818', '[{\"id\": 1, \"key\": \"快捷上传\", \"label\": \"点击快捷键自动上传粘贴板中的图片\", \"value\": \"Command + K\"}, {\"id\": 2, \"key\": \"帮助中心\", \"label\": \"点击快捷键自动打开帮助中心窗口\", \"value\": \"Command + H\"}, {\"id\": 3, \"key\": \"个人中心\", \"label\": \"点击快捷键自动进入个人中心\", \"value\": \"Command + P + C\"}, {\"id\": 4, \"key\": \"上传网络图片\", \"label\": \"点击快捷键自动上传粘贴板中的网络图片\", \"value\": \"Command + P + C\"}, {\"id\": 5, \"key\": \"快捷退出\", \"label\": \"点击快捷键自动退出登录\", \"value\": \"Command + P + C\"}]', 1, 1, 1, 'custom', 1, '{}', '![](${url})', '2022-11-01 03:40:37', '2022-11-01 03:44:49');
INSERT INTO `habits` VALUES ('805b2da0-1b16-4b8c-9d44-61a88ffa4ea0', '30c9808c-15e3-4f1b-a1af-5f285419f800', '[{\"id\": 1, \"key\": \"快捷上传\", \"label\": \"点击快捷键自动上传粘贴板中的图片\", \"value\": \"Command + K\"}, {\"id\": 2, \"key\": \"帮助中心\", \"label\": \"点击快捷键自动打开帮助中心窗口\", \"value\": \"Command + H\"}, {\"id\": 3, \"key\": \"个人中心\", \"label\": \"点击快捷键自动进入个人中心\", \"value\": \"Command + P + C\"}, {\"id\": 4, \"key\": \"上传网络图片\", \"label\": \"点击快捷键自动上传粘贴板中的网络图片\", \"value\": \"Command + P + C\"}, {\"id\": 5, \"key\": \"快捷退出\", \"label\": \"点击快捷键自动退出登录\", \"value\": \"Command + P + C\"}]', 1, 1, 1, 'url', 1, '{}', '![${filename}](${url})', '2023-03-03 01:20:50', '2023-03-03 01:20:50');
INSERT INTO `habits` VALUES ('847ce5f3-d9e1-4bb8-9de7-cac455cb5d23', 'b62b9e4d-0af6-42c6-8168-3c89ba0a4226', '[{\"id\": 1, \"key\": \"快捷上传\", \"label\": \"点击快捷键自动上传粘贴板中的图片\", \"value\": \"Command + K\"}, {\"id\": 2, \"key\": \"帮助中心\", \"label\": \"点击快捷键自动打开帮助中心窗口\", \"value\": \"Command + H\"}, {\"id\": 3, \"key\": \"个人中心\", \"label\": \"点击快捷键自动进入个人中心\", \"value\": \"Command + P + C\"}, {\"id\": 4, \"key\": \"上传网络图片\", \"label\": \"点击快捷键自动上传粘贴板中的网络图片\", \"value\": \"Command + P + C\"}, {\"id\": 5, \"key\": \"快捷退出\", \"label\": \"点击快捷键自动退出登录\", \"value\": \"Command + P + C\"}]', 1, 1, 1, 'url', 1, '{}', '![${filename}](${url})', '2023-02-24 07:51:32', '2023-02-24 07:51:32');
INSERT INTO `habits` VALUES ('90ca45c7-f8f3-463c-a00e-a80a243cccda', '6c7967cc-8467-4bc1-9faf-01d5458f61a0', '[{\"id\": 1, \"key\": \"快捷上传\", \"label\": \"点击快捷键自动上传粘贴板中的图片\", \"value\": \"Command + K\"}, {\"id\": 2, \"key\": \"帮助中心\", \"label\": \"点击快捷键自动打开帮助中心窗口\", \"value\": \"Command + H\"}, {\"id\": 3, \"key\": \"个人中心\", \"label\": \"点击快捷键自动进入个人中心\", \"value\": \"Command + P + C\"}, {\"id\": 4, \"key\": \"上传网络图片\", \"label\": \"点击快捷键自动上传粘贴板中的网络图片\", \"value\": \"Command + P + C\"}, {\"id\": 5, \"key\": \"快捷退出\", \"label\": \"点击快捷键自动退出登录\", \"value\": \"Command + P + C\"}]', 1, 1, 1, 'url', 1, '{}', '![${filename}](${url})', '2023-02-22 15:15:36', '2023-02-22 15:16:53');
INSERT INTO `habits` VALUES ('92731c77-8922-4d81-9500-e0ffecf81609', '9629a302-05f7-4a59-99e2-ecbf9dd80b09', '[{\"id\": 1, \"key\": \"快捷上传\", \"label\": \"点击快捷键自动上传粘贴板中的图片\", \"value\": \"Command + K\"}, {\"id\": 2, \"key\": \"帮助中心\", \"label\": \"点击快捷键自动打开帮助中心窗口\", \"value\": \"Command + H\"}, {\"id\": 3, \"key\": \"个人中心\", \"label\": \"点击快捷键自动进入个人中心\", \"value\": \"Command + P + C\"}, {\"id\": 4, \"key\": \"上传网络图片\", \"label\": \"点击快捷键自动上传粘贴板中的网络图片\", \"value\": \"Command + P + C\"}, {\"id\": 5, \"key\": \"快捷退出\", \"label\": \"点击快捷键自动退出登录\", \"value\": \"Command + P + C\"}]', 1, 1, 1, 'url', 1, '{\"id\": \"46c18d49-267d-4d0a-bd31-4b46cf67f155\", \"tag\": \"本地存储桶\", \"name\": \"test\", \"type\": \"local\", \"config\": \"{\\\"accessKey\\\":\\\"mVGmIkaYxQTAdr2OVQrlxZVTUMMZHPl1DfCSCusn\\\",\\\"secretKey\\\":\\\"okkbqh5DaceVTr1AVfOCnH6XLi_xynQo7DlA2SQM\\\",\\\"bucket_name\\\":\\\"yaju\\\",\\\"domain\\\":\\\"http://img.itchenliang.club/\\\",\\\"area\\\":\\\"qiniu.region.z0\\\",\\\"suffix\\\":\\\"\\\",\\\"path\\\":\\\"picture-ped-img/\\\",\\\"baseUrl\\\":\\\"${config.domain}\\\"}\", \"plugin\": \"(() => {\\r\\n  return {\\r\\n    version: \'1.0.0\',\\r\\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#本地存储桶\',\\r\\n    config: [\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定AccessKey\\\",\\r\\n        \\\"field\\\":\\\"accessKey\\\",\\r\\n        \\\"default\\\":\\\"mVGmIkaYxQTAdr2OVQrlxZVTUMMZHPl1DfCSCusn\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入AccessKey\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定SecretKey\\\",\\r\\n        \\\"field\\\":\\\"secretKey\\\",\\r\\n        \\\"default\\\":\\\"okkbqh5DaceVTr1AVfOCnH6XLi_xynQo7DlA2SQM\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入SecretKey\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定存储空间名\\\",\\r\\n        \\\"field\\\":\\\"bucket_name\\\",\\r\\n        \\\"default\\\":\\\"yaju\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入存储空间名\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定访问网址\\\",\\r\\n        \\\"field\\\":\\\"domain\\\",\\r\\n        \\\"default\\\":\\\"http://img.itchenliang.club/\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入访问网址\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"option\\\",\\r\\n        \\\"label\\\":\\\"设定存储区域\\\",\\r\\n        \\\"field\\\":\\\"area\\\",\\r\\n        \\\"default\\\":\\\"qiniu.region.z0\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"options\\\": [\\r\\n          {\\r\\n            \\\"label\\\": \\\"华东区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.z0\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"华北区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.z1\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"华南区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.z2\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"北美区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.na0\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"新加坡区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.as0\\\"\\r\\n          }\\r\\n        ],\\r\\n        \\\"placeholder\\\":\\\"请选择存储区域\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定网址后缀\\\",\\r\\n        \\\"field\\\":\\\"suffix\\\",\\r\\n        \\\"default\\\":\\\"\\\",\\r\\n        \\\"required\\\":false,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"例如: imageView2/0/q/75|watermark/2/text/6ZuF5bGF5peF5ri45rCR5a6_/font/5a6L5L2T/fontsize/360/fill/I0ZBRkFGQQ==/dissolve/100/gravity/SouthEast/dx/15/dy/15|imageslim\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"指定存储路径\\\",\\r\\n        \\\"field\\\":\\\"path\\\",\\r\\n        \\\"default\\\":\\\"picture-ped-img/\\\",\\r\\n        \\\"required\\\":false,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"例如: img/\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"访问前缀\\\",\\r\\n        \\\"field\\\":\\\"baseUrl\\\",\\r\\n        \\\"hidden\\\":true,\\r\\n        \\\"default\\\":\\\"${config.domain}\\\",\\r\\n        \\\"required\\\":false,\\r\\n        \\\"placeholder\\\":\\\"请输入baseUrl\\\"\\r\\n      }\\r\\n    ],\\r\\n    uploader: {\\r\\n      // 注意：不要使用箭头函数，否则会改变this的指向\\r\\n      beforeEach: async function (file) {\\r\\n        return await this.axios({\\r\\n          url: \'http://124.222.54.192:3002/api/v1/tool/qiniuSign\',\\r\\n          method: \\\"POST\\\",\\r\\n          headers: {\\r\\n            authorization: localStorage.getItem(\'token\')\\r\\n          },\\r\\n          data: {\\r\\n            accessKey: \'${config.accessKey}\',\\r\\n            secretKey: \'${config.secretKey}\',\\r\\n            bucket: \'${config.bucket_name}\',\\r\\n            expires: 7200\\r\\n          }\\r\\n        })\\r\\n      },\\r\\n      // 注意：不要使用箭头函数，否则会改变this的指向\\r\\n      request: async function (file) {\\r\\n        const res = await this.beforeEach(file)\\r\\n        const formData = new FormData()\\r\\n        formData.append(\'file\', file.file)\\r\\n        formData.append(\'token\', res.data.data.token)\\r\\n        formData.append(\'key\', \'${config.path}\' + file.filename)\\r\\n        formData.append(\'fname\', file.filename)\\r\\n        return {\\r\\n          url: \'https://upload.qiniup.com/\',\\r\\n          method: \'post\',\\r\\n          data: formData\\r\\n        }\\r\\n      },\\r\\n      // 注意：不要使用箭头函数，否则会改变this的指向\\r\\n      response: function (res) {\\r\\n        const tmp = res.data\\r\\n        return {\\r\\n          img_url: tmp.key,\\r\\n          hash: tmp.hash\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n})()\", \"config_baseUrl\": \"http://img.itchenliang.club/\"}', '![${filename}](${url})', '2023-03-03 01:40:36', '2023-03-03 01:42:38');
INSERT INTO `habits` VALUES ('9b1959b2-f1bc-4a63-8f96-b68302426402', '8577d766-4b6d-4eb8-8da8-b6846904342f', '[{\"id\": 1, \"key\": \"快捷上传\", \"label\": \"点击快捷键自动上传粘贴板中的图片\", \"value\": \"Command + K\"}, {\"id\": 2, \"key\": \"帮助中心\", \"label\": \"点击快捷键自动打开帮助中心窗口\", \"value\": \"Command + H\"}, {\"id\": 3, \"key\": \"个人中心\", \"label\": \"点击快捷键自动进入个人中心\", \"value\": \"Command + P + C\"}, {\"id\": 4, \"key\": \"上传网络图片\", \"label\": \"点击快捷键自动上传粘贴板中的网络图片\", \"value\": \"Command + P + C\"}, {\"id\": 5, \"key\": \"快捷退出\", \"label\": \"点击快捷键自动退出登录\", \"value\": \"Command + P + C\"}]', 1, 1, 1, 'url', 1, '{\"id\": \"82d12c00-9a9f-42a6-ab3f-dce39f46afa6\", \"tag\": \"七牛云 KODO\", \"name\": \"images\", \"type\": \"qiniu\", \"config\": \"{\\\"accessKey\\\":\\\"_y8ja27qSyod-SC9zbpNEpQm0efSO_z2y1iunlfz\\\",\\\"secretKey\\\":\\\"7Bl63OtbRPbH1Tlgt99vnPw258lgPC1LSL2YGQqi\\\",\\\"bucket_name\\\":\\\"images\\\",\\\"domain\\\":\\\"https://cdn.aipin100.cn\\\",\\\"area\\\":\\\"qiniu.region.z0\\\",\\\"suffix\\\":\\\"\\\",\\\"path\\\":\\\"\\\",\\\"baseUrl\\\":\\\"${config.domain}\\\"}\", \"plugin\": \"(() => {\\r\\n  return {\\r\\n    version: \'1.0.0\',\\r\\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#七牛云-kodo\',\\r\\n    config: [\\r\\n      {\\r\\n          \\\"type\\\":\\\"string\\\",\\r\\n          \\\"label\\\":\\\"设定AccessKey\\\",\\r\\n          \\\"field\\\":\\\"accessKey\\\",\\r\\n          \\\"default\\\":\\\"\\\",\\r\\n          \\\"required\\\":true,\\r\\n          \\\"placeholder\\\":\\\"请输入AccessKey\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"password\\\",\\r\\n        \\\"label\\\":\\\"设定SecretKey\\\",\\r\\n        \\\"field\\\":\\\"secretKey\\\",\\r\\n        \\\"default\\\":\\\"\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"placeholder\\\":\\\"请输入SecretKey\\\"\\r\\n      },\\r\\n      {\\r\\n          \\\"type\\\":\\\"string\\\",\\r\\n          \\\"label\\\":\\\"设定存储空间名\\\",\\r\\n          \\\"field\\\":\\\"bucket_name\\\",\\r\\n          \\\"default\\\":\\\"\\\",\\r\\n          \\\"required\\\":true,\\r\\n          \\\"placeholder\\\":\\\"请输入存储空间名\\\"\\r\\n      },\\r\\n      {\\r\\n          \\\"type\\\":\\\"string\\\",\\r\\n          \\\"label\\\":\\\"设定自定义域名\\\",\\r\\n          \\\"field\\\":\\\"domain\\\",\\r\\n          \\\"default\\\":\\\"\\\",\\r\\n          \\\"required\\\":true,\\r\\n          \\\"placeholder\\\":\\\"请输入自定义域名\\\",\\r\\n          \\\"tips\\\": \\\"以http://或https://开头，末尾无需斜杠\\\"\\r\\n      },\\r\\n      {\\r\\n          \\\"type\\\":\\\"option\\\",\\r\\n          \\\"label\\\":\\\"设定存储区域\\\",\\r\\n          \\\"field\\\":\\\"area\\\",\\r\\n          \\\"default\\\":\\\"qiniu.region.z0\\\",\\r\\n          \\\"required\\\":true,\\r\\n          \\\"options\\\": [\\r\\n            {\\r\\n              \\\"label\\\": \\\"华东区域\\\",\\r\\n              \\\"value\\\": \\\"qiniu.region.z0\\\"\\r\\n            },\\r\\n            {\\r\\n              \\\"label\\\": \\\"华北区域\\\",\\r\\n              \\\"value\\\": \\\"qiniu.region.z1\\\"\\r\\n            },\\r\\n            {\\r\\n              \\\"label\\\": \\\"华南区域\\\",\\r\\n              \\\"value\\\": \\\"qiniu.region.z2\\\"\\r\\n            },\\r\\n            {\\r\\n              \\\"label\\\": \\\"北美区域\\\",\\r\\n              \\\"value\\\": \\\"qiniu.region.na0\\\"\\r\\n            },\\r\\n            {\\r\\n              \\\"label\\\": \\\"新加坡区域\\\",\\r\\n              \\\"value\\\": \\\"qiniu.region.as0\\\"\\r\\n            }\\r\\n          ],\\r\\n          \\\"placeholder\\\":\\\"请选择存储区域\\\"\\r\\n      },\\r\\n      {\\r\\n          \\\"type\\\":\\\"string\\\",\\r\\n          \\\"label\\\":\\\"设定网址后缀\\\",\\r\\n          \\\"field\\\":\\\"suffix\\\",\\r\\n          \\\"default\\\":\\\"\\\",\\r\\n          \\\"required\\\":false,\\r\\n          \\\"placeholder\\\":\\\"例如: imageView2/0/q/75|watermark/2/text/6ZuF5bGF5peF5ri45rCR5a6_/font/5a6L5L2T/fontsize/360/fill/I0ZBRkFGQQ==/dissolve/100/gravity/SouthEast/dx/15/dy/15|imageslim\\\"\\r\\n      },\\r\\n      {\\r\\n          \\\"type\\\":\\\"string\\\",\\r\\n          \\\"label\\\":\\\"指定存储路径\\\",\\r\\n          \\\"field\\\":\\\"path\\\",\\r\\n          \\\"default\\\":\\\"\\\",\\r\\n          \\\"required\\\":false,\\r\\n          \\\"placeholder\\\":\\\"例如: img/\\\"\\r\\n      },\\r\\n      {\\r\\n          \\\"type\\\":\\\"string\\\",\\r\\n          \\\"label\\\":\\\"访问前缀\\\",\\r\\n          \\\"field\\\":\\\"baseUrl\\\",\\r\\n          \\\"hidden\\\":true,\\r\\n          \\\"default\\\":\\\"${config.domain}\\\",\\r\\n          \\\"required\\\":false,\\r\\n          \\\"placeholder\\\":\\\"请输入baseUrl\\\"\\r\\n      }\\r\\n    ],\\r\\n    uploader: {\\r\\n      // 注意：不要使用箭头函数，否则会改变this的指向\\r\\n      beforeEach: async function (file) {\\r\\n        return await this.axios({\\r\\n          url: \'http://124.222.54.192:3002/api/v1/tool/qiniuSign\',\\r\\n          method: \\\"POST\\\",\\r\\n          headers: {\\r\\n            authorization: localStorage.getItem(\'token\')\\r\\n          },\\r\\n          data: {\\r\\n            accessKey: \'${config.accessKey}\',\\r\\n            secretKey: \'${config.secretKey}\',\\r\\n            bucket: \'${config.bucket_name}\',\\r\\n            expires: 7200\\r\\n          }\\r\\n        })\\r\\n      },\\r\\n      // 注意：不要使用箭头函数，否则会改变this的指向\\r\\n      request: async function (file) {\\r\\n        const res = await this.beforeEach(file)\\r\\n        const formData = new FormData()\\r\\n        formData.append(\'file\', file.file)\\r\\n        formData.append(\'token\', res.data.data.token)\\r\\n        formData.append(\'key\', \'${config.path}\' + file.filename)\\r\\n        formData.append(\'fname\', file.filename)\\r\\n        return {\\r\\n          url: \'https://upload.qiniup.com/\',\\r\\n          method: \'post\',\\r\\n          data: formData\\r\\n        }\\r\\n      },\\r\\n      // 注意：不要使用箭头函数，否则会改变this的指向\\r\\n      response: function (res) {\\r\\n        const tmp = res.data\\r\\n        return {\\r\\n          img_url: tmp.key,\\r\\n          hash: tmp.hash\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n})()\", \"config_baseUrl\": \"https://cdn.aipin100.cn\"}', '![${filename}](${url})', '2023-03-03 01:38:38', '2023-03-03 01:45:10');
INSERT INTO `habits` VALUES ('ac926862-b49a-4e52-b730-022fa325d485', 'e9d1c317-fa4d-4144-9a98-bb08cc77d9f3', '[{\"id\": 1, \"key\": \"快捷上传\", \"label\": \"点击快捷键自动上传粘贴板中的图片\", \"value\": \"Command + K\"}, {\"id\": 2, \"key\": \"帮助中心\", \"label\": \"点击快捷键自动打开帮助中心窗口\", \"value\": \"Command + H\"}, {\"id\": 3, \"key\": \"个人中心\", \"label\": \"点击快捷键自动进入个人中心\", \"value\": \"Command + P + C\"}, {\"id\": 4, \"key\": \"上传网络图片\", \"label\": \"点击快捷键自动上传粘贴板中的网络图片\", \"value\": \"Command + P + C\"}, {\"id\": 5, \"key\": \"快捷退出\", \"label\": \"点击快捷键自动退出登录\", \"value\": \"Command + P + C\"}]', 1, 1, 1, 'url', 1, '{}', '![${filename}](${url})', '2023-03-03 01:18:49', '2023-03-03 01:18:49');
INSERT INTO `habits` VALUES ('b6b7d5f0-9184-4e0e-8c21-a505adbd4ace', 'c0c09a6c-2067-4452-bfde-28ab54b5c51b', '[{\"id\": 1, \"key\": \"快捷上传\", \"label\": \"点击快捷键自动上传粘贴板中的图片\", \"value\": \"Command + K\"}, {\"id\": 2, \"key\": \"帮助中心\", \"label\": \"点击快捷键自动打开帮助中心窗口\", \"value\": \"Command + H\"}, {\"id\": 3, \"key\": \"个人中心\", \"label\": \"点击快捷键自动进入个人中心\", \"value\": \"Command + P + C\"}, {\"id\": 4, \"key\": \"上传网络图片\", \"label\": \"点击快捷键自动上传粘贴板中的网络图片\", \"value\": \"Command + P + C\"}, {\"id\": 5, \"key\": \"快捷退出\", \"label\": \"点击快捷键自动退出登录\", \"value\": \"Command + P + C\"}]', 1, 1, 1, 'url', 1, '{}', '![${filename}](${url})', '2022-11-04 03:42:03', '2022-11-04 03:42:03');
INSERT INTO `habits` VALUES ('b9244326-f32c-4fd6-9666-b2a1e42ab2a4', '1d01e0e2-2a81-4733-acb5-b4799e9b9988', '[{\"id\": 1, \"key\": \"快捷上传\", \"label\": \"点击快捷键自动上传粘贴板中的图片\", \"value\": \"Command + K\"}, {\"id\": 2, \"key\": \"帮助中心\", \"label\": \"点击快捷键自动打开帮助中心窗口\", \"value\": \"Command + H\"}, {\"id\": 3, \"key\": \"个人中心\", \"label\": \"点击快捷键自动进入个人中心\", \"value\": \"Command + P + C\"}, {\"id\": 4, \"key\": \"上传网络图片\", \"label\": \"点击快捷键自动上传粘贴板中的网络图片\", \"value\": \"Command + P + C\"}, {\"id\": 5, \"key\": \"快捷退出\", \"label\": \"点击快捷键自动退出登录\", \"value\": \"Command + P + C\"}]', 1, 1, 1, 'url', 1, '{\"id\": \"5b8f9610-8681-4058-838c-7513128f296a\", \"tag\": \"本地存储桶\", \"name\": \"中金发布月重要日程\", \"type\": \"local\", \"config\": \"{\\\"accessKey\\\":\\\"mVGmIkaYxQTAdr2OVQrlxZVTUMMZHPl1DfCSCusn\\\",\\\"secretKey\\\":\\\"okkbqh5DaceVTr1AVfOCnH6XLi_xynQo7DlA2SQM\\\",\\\"bucket_name\\\":\\\"yaju\\\",\\\"domain\\\":\\\"http://img.itchenliang.club/\\\",\\\"area\\\":\\\"qiniu.region.z0\\\",\\\"suffix\\\":\\\"\\\",\\\"path\\\":\\\"picture-ped-img/\\\",\\\"baseUrl\\\":\\\"${config.domain}\\\"}\", \"plugin\": \"(() => {\\r\\n  return {\\r\\n    version: \'1.0.0\',\\r\\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#本地存储桶\',\\r\\n    config: [\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定AccessKey\\\",\\r\\n        \\\"field\\\":\\\"accessKey\\\",\\r\\n        \\\"default\\\":\\\"mVGmIkaYxQTAdr2OVQrlxZVTUMMZHPl1DfCSCusn\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入AccessKey\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定SecretKey\\\",\\r\\n        \\\"field\\\":\\\"secretKey\\\",\\r\\n        \\\"default\\\":\\\"okkbqh5DaceVTr1AVfOCnH6XLi_xynQo7DlA2SQM\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入SecretKey\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定存储空间名\\\",\\r\\n        \\\"field\\\":\\\"bucket_name\\\",\\r\\n        \\\"default\\\":\\\"yaju\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入存储空间名\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定访问网址\\\",\\r\\n        \\\"field\\\":\\\"domain\\\",\\r\\n        \\\"default\\\":\\\"http://img.itchenliang.club/\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入访问网址\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"option\\\",\\r\\n        \\\"label\\\":\\\"设定存储区域\\\",\\r\\n        \\\"field\\\":\\\"area\\\",\\r\\n        \\\"default\\\":\\\"qiniu.region.z0\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"options\\\": [\\r\\n          {\\r\\n            \\\"label\\\": \\\"华东区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.z0\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"华北区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.z1\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"华南区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.z2\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"北美区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.na0\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"新加坡区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.as0\\\"\\r\\n          }\\r\\n        ],\\r\\n        \\\"placeholder\\\":\\\"请选择存储区域\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定网址后缀\\\",\\r\\n        \\\"field\\\":\\\"suffix\\\",\\r\\n        \\\"default\\\":\\\"\\\",\\r\\n        \\\"required\\\":false,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"例如: imageView2/0/q/75|watermark/2/text/6ZuF5bGF5peF5ri45rCR5a6_/font/5a6L5L2T/fontsize/360/fill/I0ZBRkFGQQ==/dissolve/100/gravity/SouthEast/dx/15/dy/15|imageslim\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"指定存储路径\\\",\\r\\n        \\\"field\\\":\\\"path\\\",\\r\\n        \\\"default\\\":\\\"picture-ped-img/\\\",\\r\\n        \\\"required\\\":false,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"例如: img/\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"访问前缀\\\",\\r\\n        \\\"field\\\":\\\"baseUrl\\\",\\r\\n        \\\"hidden\\\":true,\\r\\n        \\\"default\\\":\\\"${config.domain}\\\",\\r\\n        \\\"required\\\":false,\\r\\n        \\\"placeholder\\\":\\\"请输入baseUrl\\\"\\r\\n      }\\r\\n    ],\\r\\n    uploader: {\\r\\n      // 注意：不要使用箭头函数，否则会改变this的指向\\r\\n      beforeEach: async function (file) {\\r\\n        return await this.axios({\\r\\n          url: \'http://124.222.54.192:3002/api/v1/tool/qiniuSign\',\\r\\n          method: \\\"POST\\\",\\r\\n          headers: {\\r\\n            authorization: localStorage.getItem(\'token\')\\r\\n          },\\r\\n          data: {\\r\\n            accessKey: \'${config.accessKey}\',\\r\\n            secretKey: \'${config.secretKey}\',\\r\\n            bucket: \'${config.bucket_name}\',\\r\\n            expires: 7200\\r\\n          }\\r\\n        })\\r\\n      },\\r\\n      // 注意：不要使用箭头函数，否则会改变this的指向\\r\\n      request: async function (file) {\\r\\n        const res = await this.beforeEach(file)\\r\\n        const formData = new FormData()\\r\\n        formData.append(\'file\', file.file)\\r\\n        formData.append(\'token\', res.data.data.token)\\r\\n        formData.append(\'key\', \'${config.path}\' + file.filename)\\r\\n        formData.append(\'fname\', file.filename)\\r\\n        return {\\r\\n          url: \'https://upload.qiniup.com/\',\\r\\n          method: \'post\',\\r\\n          data: formData\\r\\n        }\\r\\n      },\\r\\n      // 注意：不要使用箭头函数，否则会改变this的指向\\r\\n      response: function (res) {\\r\\n        const tmp = res.data\\r\\n        return {\\r\\n          img_url: tmp.key,\\r\\n          hash: tmp.hash\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n})()\", \"config_baseUrl\": \"http://img.itchenliang.club/\"}', '![${filename}](${url})', '2023-03-04 14:05:09', '2023-03-05 09:44:21');
INSERT INTO `habits` VALUES ('b92f0fe8-41c6-49a6-a6da-7a7ed576001b', '1ea5aa53-d345-4925-83fa-681231427891', '[{\"id\": 1, \"key\": \"快捷上传\", \"label\": \"点击快捷键自动上传粘贴板中的图片\", \"value\": \"Command + K\"}, {\"id\": 2, \"key\": \"帮助中心\", \"label\": \"点击快捷键自动打开帮助中心窗口\", \"value\": \"Command + H\"}, {\"id\": 3, \"key\": \"个人中心\", \"label\": \"点击快捷键自动进入个人中心\", \"value\": \"Command + P + C\"}, {\"id\": 4, \"key\": \"上传网络图片\", \"label\": \"点击快捷键自动上传粘贴板中的网络图片\", \"value\": \"Command + P + C\"}, {\"id\": 5, \"key\": \"快捷退出\", \"label\": \"点击快捷键自动退出登录\", \"value\": \"Command + P + C\"}]', 1, 1, 1, 'url', 1, '{}', '![${filename}](${url})', '2023-03-03 05:22:20', '2023-03-03 05:22:20');
INSERT INTO `habits` VALUES ('b9b0efbd-4455-4eed-a9aa-e0179c9a848d', '84969756-0d3c-4423-a5c6-de6b6c3fbb6d', '[{\"id\": 1, \"key\": \"快捷上传\", \"label\": \"点击快捷键自动上传粘贴板中的图片\", \"value\": \"Command + K\"}, {\"id\": 2, \"key\": \"帮助中心\", \"label\": \"点击快捷键自动打开帮助中心窗口\", \"value\": \"Command + H\"}, {\"id\": 3, \"key\": \"个人中心\", \"label\": \"点击快捷键自动进入个人中心\", \"value\": \"Command + P + C\"}, {\"id\": 4, \"key\": \"上传网络图片\", \"label\": \"点击快捷键自动上传粘贴板中的网络图片\", \"value\": \"Command + P + C\"}, {\"id\": 5, \"key\": \"快捷退出\", \"label\": \"点击快捷键自动退出登录\", \"value\": \"Command + P + C\"}]', 1, 1, 1, 'custom', 1, '{\"id\": \"feb1fbd3-2987-4d71-8ba2-5af669505e9d\", \"tag\": \"本地存储桶\", \"name\": \"test001\", \"type\": \"local\", \"config\": \"{\\\"accessKey\\\":\\\"mVGmIkaYxQTAdr2OVQrlxZVTUMMZHPl1DfCSCusn\\\",\\\"secretKey\\\":\\\"okkbqh5DaceVTr1AVfOCnH6XLi_xynQo7DlA2SQM\\\",\\\"bucket_name\\\":\\\"yaju\\\",\\\"domain\\\":\\\"http://img.itchenliang.club/\\\",\\\"area\\\":\\\"qiniu.region.z0\\\",\\\"suffix\\\":\\\"\\\",\\\"path\\\":\\\"picture-ped-img/\\\",\\\"baseUrl\\\":\\\"${config.domain}\\\"}\", \"plugin\": \"(() => {\\r\\n  return {\\r\\n    version: \'1.0.0\',\\r\\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#本地存储桶\',\\r\\n    config: [\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定AccessKey\\\",\\r\\n        \\\"field\\\":\\\"accessKey\\\",\\r\\n        \\\"default\\\":\\\"mVGmIkaYxQTAdr2OVQrlxZVTUMMZHPl1DfCSCusn\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入AccessKey\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定SecretKey\\\",\\r\\n        \\\"field\\\":\\\"secretKey\\\",\\r\\n        \\\"default\\\":\\\"okkbqh5DaceVTr1AVfOCnH6XLi_xynQo7DlA2SQM\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入SecretKey\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定存储空间名\\\",\\r\\n        \\\"field\\\":\\\"bucket_name\\\",\\r\\n        \\\"default\\\":\\\"yaju\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入存储空间名\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定访问网址\\\",\\r\\n        \\\"field\\\":\\\"domain\\\",\\r\\n        \\\"default\\\":\\\"http://img.itchenliang.club/\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入访问网址\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"option\\\",\\r\\n        \\\"label\\\":\\\"设定存储区域\\\",\\r\\n        \\\"field\\\":\\\"area\\\",\\r\\n        \\\"default\\\":\\\"qiniu.region.z0\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"options\\\": [\\r\\n          {\\r\\n            \\\"label\\\": \\\"华东区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.z0\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"华北区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.z1\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"华南区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.z2\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"北美区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.na0\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"新加坡区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.as0\\\"\\r\\n          }\\r\\n        ],\\r\\n        \\\"placeholder\\\":\\\"请选择存储区域\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定网址后缀\\\",\\r\\n        \\\"field\\\":\\\"suffix\\\",\\r\\n        \\\"default\\\":\\\"\\\",\\r\\n        \\\"required\\\":false,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"例如: imageView2/0/q/75|watermark/2/text/6ZuF5bGF5peF5ri45rCR5a6_/font/5a6L5L2T/fontsize/360/fill/I0ZBRkFGQQ==/dissolve/100/gravity/SouthEast/dx/15/dy/15|imageslim\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"指定存储路径\\\",\\r\\n        \\\"field\\\":\\\"path\\\",\\r\\n        \\\"default\\\":\\\"picture-ped-img/\\\",\\r\\n        \\\"required\\\":false,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"例如: img/\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"访问前缀\\\",\\r\\n        \\\"field\\\":\\\"baseUrl\\\",\\r\\n        \\\"hidden\\\":true,\\r\\n        \\\"default\\\":\\\"${config.domain}\\\",\\r\\n        \\\"required\\\":false,\\r\\n        \\\"placeholder\\\":\\\"请输入baseUrl\\\"\\r\\n      }\\r\\n    ],\\r\\n    uploader: {\\r\\n      // 注意：不要使用箭头函数，否则会改变this的指向\\r\\n      beforeEach: async function (file) {\\r\\n        return await this.axios({\\r\\n          url: \'http://124.222.54.192:3002/api/v1/tool/qiniuSign\',\\r\\n          method: \\\"POST\\\",\\r\\n          headers: {\\r\\n            authorization: localStorage.getItem(\'token\')\\r\\n          },\\r\\n          data: {\\r\\n            accessKey: \'${config.accessKey}\',\\r\\n            secretKey: \'${config.secretKey}\',\\r\\n            bucket: \'${config.bucket_name}\',\\r\\n            expires: 7200\\r\\n          }\\r\\n        })\\r\\n      },\\r\\n      // 注意：不要使用箭头函数，否则会改变this的指向\\r\\n      request: async function (file) {\\r\\n        const res = await this.beforeEach(file)\\r\\n        const formData = new FormData()\\r\\n        formData.append(\'file\', file.file)\\r\\n        formData.append(\'token\', res.data.data.token)\\r\\n        formData.append(\'key\', \'${config.path}\' + file.filename)\\r\\n        formData.append(\'fname\', file.filename)\\r\\n        return {\\r\\n          url: \'https://upload.qiniup.com/\',\\r\\n          method: \'post\',\\r\\n          data: formData\\r\\n        }\\r\\n      },\\r\\n      // 注意：不要使用箭头函数，否则会改变this的指向\\r\\n      response: function (res) {\\r\\n        const tmp = res.data\\r\\n        return {\\r\\n          img_url: tmp.key,\\r\\n          hash: tmp.hash\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n})()\", \"config_baseUrl\": \"http://img.itchenliang.club/\"}', '![${filename}](${url})', '2023-03-03 02:30:58', '2023-03-03 02:35:03');
INSERT INTO `habits` VALUES ('c000c9dc-4226-4c8c-8647-913921485d58', 'a0f5dfcb-d2a7-491a-b3d1-5cd2e1d7170e', '[{\"id\": 1, \"key\": \"快捷上传\", \"label\": \"点击快捷键自动上传粘贴板中的图片\", \"value\": \"Command + K\"}, {\"id\": 2, \"key\": \"帮助中心\", \"label\": \"点击快捷键自动打开帮助中心窗口\", \"value\": \"Command + H\"}, {\"id\": 3, \"key\": \"个人中心\", \"label\": \"点击快捷键自动进入个人中心\", \"value\": \"Command + P + C\"}, {\"id\": 4, \"key\": \"上传网络图片\", \"label\": \"点击快捷键自动上传粘贴板中的网络图片\", \"value\": \"Command + P + C\"}, {\"id\": 5, \"key\": \"快捷退出\", \"label\": \"点击快捷键自动退出登录\", \"value\": \"Command + P + C\"}]', 1, 1, 1, 'url', 1, '{\"id\": \"3fdd1f28-4587-4cfa-ad5b-d977340c8001\", \"tag\": \"本地存储桶\", \"name\": \"111\", \"type\": \"local\", \"config\": \"{\\\"accessKey\\\":\\\"mVGmIkaYxQTAdr2OVQrlxZVTUMMZHPl1DfCSCusn\\\",\\\"secretKey\\\":\\\"okkbqh5DaceVTr1AVfOCnH6XLi_xynQo7DlA2SQM\\\",\\\"bucket_name\\\":\\\"yaju\\\",\\\"domain\\\":\\\"http://img.itchenliang.club/\\\",\\\"area\\\":\\\"qiniu.region.z0\\\",\\\"suffix\\\":\\\"\\\",\\\"path\\\":\\\"picture-ped-img/\\\",\\\"baseUrl\\\":\\\"${config.domain}\\\"}\", \"plugin\": \"(() => {\\r\\n  return {\\r\\n    version: \'1.0.0\',\\r\\n    doc: \'https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc#本地存储桶\',\\r\\n    config: [\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定AccessKey\\\",\\r\\n        \\\"field\\\":\\\"accessKey\\\",\\r\\n        \\\"default\\\":\\\"mVGmIkaYxQTAdr2OVQrlxZVTUMMZHPl1DfCSCusn\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入AccessKey\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定SecretKey\\\",\\r\\n        \\\"field\\\":\\\"secretKey\\\",\\r\\n        \\\"default\\\":\\\"okkbqh5DaceVTr1AVfOCnH6XLi_xynQo7DlA2SQM\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入SecretKey\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定存储空间名\\\",\\r\\n        \\\"field\\\":\\\"bucket_name\\\",\\r\\n        \\\"default\\\":\\\"yaju\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入存储空间名\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定访问网址\\\",\\r\\n        \\\"field\\\":\\\"domain\\\",\\r\\n        \\\"default\\\":\\\"http://img.itchenliang.club/\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"请输入访问网址\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"option\\\",\\r\\n        \\\"label\\\":\\\"设定存储区域\\\",\\r\\n        \\\"field\\\":\\\"area\\\",\\r\\n        \\\"default\\\":\\\"qiniu.region.z0\\\",\\r\\n        \\\"required\\\":true,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"options\\\": [\\r\\n          {\\r\\n            \\\"label\\\": \\\"华东区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.z0\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"华北区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.z1\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"华南区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.z2\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"北美区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.na0\\\"\\r\\n          },\\r\\n          {\\r\\n            \\\"label\\\": \\\"新加坡区域\\\",\\r\\n            \\\"value\\\": \\\"qiniu.region.as0\\\"\\r\\n          }\\r\\n        ],\\r\\n        \\\"placeholder\\\":\\\"请选择存储区域\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"设定网址后缀\\\",\\r\\n        \\\"field\\\":\\\"suffix\\\",\\r\\n        \\\"default\\\":\\\"\\\",\\r\\n        \\\"required\\\":false,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"例如: imageView2/0/q/75|watermark/2/text/6ZuF5bGF5peF5ri45rCR5a6_/font/5a6L5L2T/fontsize/360/fill/I0ZBRkFGQQ==/dissolve/100/gravity/SouthEast/dx/15/dy/15|imageslim\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"指定存储路径\\\",\\r\\n        \\\"field\\\":\\\"path\\\",\\r\\n        \\\"default\\\":\\\"picture-ped-img/\\\",\\r\\n        \\\"required\\\":false,\\r\\n        \\\"hidden\\\": true,\\r\\n        \\\"placeholder\\\":\\\"例如: img/\\\"\\r\\n      },\\r\\n      {\\r\\n        \\\"type\\\":\\\"string\\\",\\r\\n        \\\"label\\\":\\\"访问前缀\\\",\\r\\n        \\\"field\\\":\\\"baseUrl\\\",\\r\\n        \\\"hidden\\\":true,\\r\\n        \\\"default\\\":\\\"${config.domain}\\\",\\r\\n        \\\"required\\\":false,\\r\\n        \\\"placeholder\\\":\\\"请输入baseUrl\\\"\\r\\n      }\\r\\n    ],\\r\\n    uploader: {\\r\\n      // 注意：不要使用箭头函数，否则会改变this的指向\\r\\n      beforeEach: async function (file) {\\r\\n        return await this.axios({\\r\\n          url: \'http://124.222.54.192:3002/api/v1/tool/qiniuSign\',\\r\\n          method: \\\"POST\\\",\\r\\n          headers: {\\r\\n            authorization: localStorage.getItem(\'token\')\\r\\n          },\\r\\n          data: {\\r\\n            accessKey: \'${config.accessKey}\',\\r\\n            secretKey: \'${config.secretKey}\',\\r\\n            bucket: \'${config.bucket_name}\',\\r\\n            expires: 7200\\r\\n          }\\r\\n        })\\r\\n      },\\r\\n      // 注意：不要使用箭头函数，否则会改变this的指向\\r\\n      request: async function (file) {\\r\\n        const res = await this.beforeEach(file)\\r\\n        const formData = new FormData()\\r\\n        formData.append(\'file\', file.file)\\r\\n        formData.append(\'token\', res.data.data.token)\\r\\n        formData.append(\'key\', \'${config.path}\' + file.filename)\\r\\n        formData.append(\'fname\', file.filename)\\r\\n        return {\\r\\n          url: \'https://upload.qiniup.com/\',\\r\\n          method: \'post\',\\r\\n          data: formData\\r\\n        }\\r\\n      },\\r\\n      // 注意：不要使用箭头函数，否则会改变this的指向\\r\\n      response: function (res) {\\r\\n        const tmp = res.data\\r\\n        return {\\r\\n          img_url: tmp.key,\\r\\n          hash: tmp.hash\\r\\n        }\\r\\n      }\\r\\n    }\\r\\n  }\\r\\n})()\", \"config_baseUrl\": \"http://img.itchenliang.club/\"}', '![${filename}](${url})', '2022-11-10 08:10:22', '2023-03-06 10:48:24');
INSERT INTO `habits` VALUES ('cacfe1ba-74b5-4f9d-822d-baad3340359e', '7fbc3a0b-0e67-46ac-a9f4-081ce9b76bc7', '[{\"id\": 1, \"key\": \"快捷上传\", \"label\": \"点击快捷键自动上传粘贴板中的图片\", \"value\": \"Command + K\"}, {\"id\": 2, \"key\": \"帮助中心\", \"label\": \"点击快捷键自动打开帮助中心窗口\", \"value\": \"Command + H\"}, {\"id\": 3, \"key\": \"个人中心\", \"label\": \"点击快捷键自动进入个人中心\", \"value\": \"Command + P + C\"}, {\"id\": 4, \"key\": \"上传网络图片\", \"label\": \"点击快捷键自动上传粘贴板中的网络图片\", \"value\": \"Command + P + C\"}, {\"id\": 5, \"key\": \"快捷退出\", \"label\": \"点击快捷键自动退出登录\", \"value\": \"Command + P + C\"}]', 1, 1, 1, 'custom', 1, '{}', '![${filename}](${url})', '2023-02-23 03:03:57', '2023-02-23 03:04:46');
INSERT INTO `habits` VALUES ('d3bb578f-b008-4a30-ac50-738adc37e70b', '7c0ed7a3-c5a7-4945-b348-9eccc19a6762', '[{\"id\": 1, \"key\": \"快捷上传\", \"label\": \"点击快捷键自动上传粘贴板中的图片\", \"value\": \"Command + K\"}, {\"id\": 2, \"key\": \"帮助中心\", \"label\": \"点击快捷键自动打开帮助中心窗口\", \"value\": \"Command + H\"}, {\"id\": 3, \"key\": \"个人中心\", \"label\": \"点击快捷键自动进入个人中心\", \"value\": \"Command + P + C\"}, {\"id\": 4, \"key\": \"上传网络图片\", \"label\": \"点击快捷键自动上传粘贴板中的网络图片\", \"value\": \"Command + P + C\"}, {\"id\": 5, \"key\": \"快捷退出\", \"label\": \"点击快捷键自动退出登录\", \"value\": \"Command + P + C\"}]', 1, 1, 1, 'url', 1, '{}', '![${filename}](${url})', '2023-03-03 07:16:02', '2023-03-03 07:16:02');
INSERT INTO `habits` VALUES ('f3ff0ecb-17ef-4d26-9f29-b2b28a655bde', '761e30e3-9536-4175-9df3-f9c2308aeea5', '[{\"id\": 1, \"key\": \"快捷上传\", \"label\": \"点击快捷键自动上传粘贴板中的图片\", \"value\": \"Command + K\"}, {\"id\": 2, \"key\": \"帮助中心\", \"label\": \"点击快捷键自动打开帮助中心窗口\", \"value\": \"Command + H\"}, {\"id\": 3, \"key\": \"个人中心\", \"label\": \"点击快捷键自动进入个人中心\", \"value\": \"Command + P + C\"}, {\"id\": 4, \"key\": \"上传网络图片\", \"label\": \"点击快捷键自动上传粘贴板中的网络图片\", \"value\": \"Command + P + C\"}, {\"id\": 5, \"key\": \"快捷退出\", \"label\": \"点击快捷键自动退出登录\", \"value\": \"Command + P + C\"}]', 1, 1, 1, 'url', 1, '{}', '![${filename}](${url})', '2023-03-06 13:41:21', '2023-03-06 13:41:21');

-- ----------------------------
-- Table structure for image
-- ----------------------------
DROP TABLE IF EXISTS `image`;
CREATE TABLE `image`  (
  `id` char(36) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL COMMENT 'uuid',
  `bucket_id` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '存储桶id',
  `bucket_type` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '存储桶类型',
  `img_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '图片名称',
  `img_width` float NOT NULL DEFAULT 0 COMMENT '图片宽度',
  `img_height` float NOT NULL DEFAULT 0 COMMENT '图片高度',
  `mine_type` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '文件类型',
  `img_url` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '图片url',
  `img_size` float NOT NULL COMMENT '图片大小',
  `hash` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT 'hash值：用于后续更新时使用',
  `uid` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '用户id',
  `createdAt` datetime(0) NOT NULL,
  `updatedAt` datetime(0) NOT NULL,
  `album_id` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '相册id',
  `add_time` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '添加进相册时间',
  `sort` int(11) NOT NULL DEFAULT 0 COMMENT '图片在相册中的排序值',
  `tags` json NOT NULL COMMENT '标签',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of image
-- ----------------------------
INSERT INTO `image` VALUES ('b37a2d7f-03bf-44a5-9d36-763f220f0500', '97026000-ae03-4ef0-b74d-a25690c93f56', 'local', '202303071126536.png', 1305, 819, 'image/png', '/upload/202303071126536.png', 78801, '', '6a7a4a31-2e6d-4e8d-ab98-63d90cd2284c', '2023-03-07 03:26:53', '2023-03-07 03:26:53', NULL, NULL, 0, '[]');
INSERT INTO `image` VALUES ('c7f07fc8-b005-4010-ae27-d0250bc01d65', '97026000-ae03-4ef0-b74d-a25690c93f56', 'local', '202303071118234.png', 1192, 843, 'image/png', '/upload/202303071118234.png', 262723, '', '6a7a4a31-2e6d-4e8d-ab98-63d90cd2284c', '2023-03-07 03:18:23', '2023-03-07 03:18:23', NULL, NULL, 0, '[]');

-- ----------------------------
-- Table structure for log
-- ----------------------------
DROP TABLE IF EXISTS `log`;
CREATE TABLE `log`  (
  `id` char(36) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL COMMENT 'uuid',
  `type` int(11) NOT NULL COMMENT '操作类别',
  `operate_id` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '操作id',
  `operate_cont` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '操作记录',
  `content` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '操作内容',
  `uid` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '操作人，用户id',
  `createdAt` datetime(0) NOT NULL,
  `updatedAt` datetime(0) NOT NULL,
  `client_info` json NULL COMMENT '客户端信息',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of log
-- ----------------------------
INSERT INTO `log` VALUES ('7895e8cf-6edb-481d-924c-c0fd6140a44c', 2, 'ID:b37a2d7f-03bf-44a5-9d36-763f220f0500', '202303071126536.png', '上传了图片', '6a7a4a31-2e6d-4e8d-ab98-63d90cd2284c', '2023-03-07 03:26:53', '2023-03-07 03:26:53', '{\"ip\": \"218.88.54.113\", \"city\": \"未知\", \"adcode\": \"未知\", \"province\": \"未知\", \"rectangle\": \"未知\"}');

-- ----------------------------
-- Table structure for login
-- ----------------------------
DROP TABLE IF EXISTS `login`;
CREATE TABLE `login`  (
  `user_id` int(11) NOT NULL,
  `login_date` date NULL DEFAULT NULL
) ENGINE = InnoDB CHARACTER SET = gbk COLLATE = gbk_chinese_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of login
-- ----------------------------

-- ----------------------------
-- Table structure for role
-- ----------------------------
DROP TABLE IF EXISTS `role`;
CREATE TABLE `role`  (
  `id` char(36) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL COMMENT 'uuid',
  `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '角色名称',
  `priority` int(11) NOT NULL DEFAULT 1 COMMENT '角色排序',
  `status` tinyint(1) NOT NULL DEFAULT 1 COMMENT '角色状态',
  `remark` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '角色备注',
  `ctime` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '2023-03-07 11:23:41' COMMENT '创建时间',
  `mtime` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '2023-03-07 11:23:41' COMMENT '修改时间',
  `createdAt` datetime(0) NOT NULL,
  `updatedAt` datetime(0) NOT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE INDEX `name`(`name`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of role
-- ----------------------------

-- ----------------------------
-- Table structure for setting
-- ----------------------------
DROP TABLE IF EXISTS `setting`;
CREATE TABLE `setting`  (
  `id` char(36) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL COMMENT 'uuid',
  `website` json NOT NULL COMMENT '网站信息',
  `contact` json NOT NULL COMMENT '联系我们',
  `system` json NOT NULL COMMENT '系统配置',
  `uplog` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT '更新日志url',
  `createdAt` datetime(0) NOT NULL,
  `updatedAt` datetime(0) NOT NULL,
  `bucket_service` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT '存储桶后台服务配置',
  `plugin` json NOT NULL COMMENT '插件配置',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of setting
-- ----------------------------
INSERT INTO `setting` VALUES ('8082c61c-0393-40cc-bec9-2e6da6752584', '{\"ico\": \"/PCi9afANyIBE4jz5P55EMKUSXrBcnzQJ/ico.ico\", \"desc\": \"轻量图片资源管理系统、图床系统，具有云储存、多桶管理、操作简便、图片预览、易管理、易部署等特点。\", \"keys\": [\"aa\"], \"logo\": \"/e4TyxC3fN5Mxq2P8PxFHcCbllUPoLzhE/logo.png\", \"name\": \"轻快图片管理系统\", \"title\": \"【LightFastPicture】轻量级快捷图片管理系统\", \"author\": \"aa\", \"domain\": \"aa\", \"baseUrl\": \"http://lc-DZNcsGI3.cn-n1.lcfile.com\", \"version\": \"1.0.0\", \"subtitle\": \"aa\", \"ico_preview\": \"http://lc-DZNcsGI3.cn-n1.lcfile.com/PCi9afANyIBE4jz5P55EMKUSXrBcnzQJ/ico.ico\", \"logo_preview\": \"http://lc-DZNcsGI3.cn-n1.lcfile.com/e4TyxC3fN5Mxq2P8PxFHcCbllUPoLzhE/logo.png\", \"reward_alipay\": \"/FnXBNkKfhnOYoLppJGSWQY6dUh1rnMHA/reward_alipay.jpg\", \"reward_weixin\": \"/PAMB9Ah4luFLiVvwp6oVh6pelyPudsNK/reward_weixin.jpg\", \"reward_alipay_preview\": \"http://lc-DZNcsGI3.cn-n1.lcfile.com/FnXBNkKfhnOYoLppJGSWQY6dUh1rnMHA/reward_alipay.jpg\", \"reward_weixin_preview\": \"http://lc-DZNcsGI3.cn-n1.lcfile.com/PAMB9Ah4luFLiVvwp6oVh6pelyPudsNK/reward_weixin.jpg\"}', '{\"qq\": \"aa\", \"about\": \"使用koa2 + mysql + vue3.x + typescript + vite开发的一套轻量级企业团队图片资源管理系统、图床系统。\\n**功能简介**\\n- 支持第三方云储存，本地、阿里云OSS、腾讯云COS、七牛云KODO、又拍云USS、华为云OBS等等\\n- 支持多桶储存，可同时添加多个对象存储桶管理，适合团队多桶协作\\n- 多图上传、拖拽上传、粘贴上传、上传预览、全屏预览、一键复制图片外链\\n- 多用户管理、分组管理；不同分组用户控制不同的存储桶\\n- 完整的权限控制功能，不同用户组可分配不同的操作权限，控制其上传删除及查看\\n- 完整的可视化日志功能，记录用户所有操作，方便事件溯源\\n- 全局配置用户初始剩余储存空间、设置指定用户剩余储存空间\\n- 支持接口上传、接口删除\\n- 原创Geek扁平化页面风格，高性能 / 精致 / 优雅 / 简洁而不简单；\\n```js\\nfunction demo () {\\n  console.log(123)\\n}\\n```\\n\\n参考:\\n- [lsky-搭建一个属于自己的图床](https://www.solaacg.com/archives/1.html)\\n- [Chevereto图床搭建 | 利用云服务器搭建免费图床完整教程](https://blog.csdn.net/JunyouYH/article/details/116092326)\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\", \"email\": \"\", \"gitee\": \"aa\", \"github\": \"aa\", \"weixin\": \"aa\", \"qq_group\": \"aa\"}', '{\"accept\": [\"jpeg\", \"jpg\", \"webp\", \"ico\", \"gif\", \"png\"], \"map_key\": \"\", \"maxsize\": 10, \"icon_url\": \"//at.alicdn.com/t/c/font_3716643_vtle4nlspsr.css\", \"map_type\": \"baidu\", \"maxcount\": 5, \"icon_font\": \"picturebed\", \"mail_pass\": \"\", \"mail_user\": \"\", \"icon_prefix\": \"bed-\", \"storage_size\": 1024, \"storage_count\": 0, \"copyright_time\": \"2022-10-19\", \"copyright_company\": \"北京世纪安图数码科技发展有限公司\", \"copyright_miiturl\": \"https://beian.miit.gov.cn/\", \"copyright_miitbeian\": \"蜀ICP备19023554号-2\"}', '## 2023-02-17\n**Todo**\n1. 数据迁移/数据备份：考虑到有的朋友原先使用的是其他图床系统，需要将数据迁移到本系统中；或者需要将本系统中的图片迁移到其他图床系统中。\n    1. 存储桶支持一键导出所有图片(即将该存储桶中的图片一键批量下载到zip包中)\n    2. 存储桶支持一键导入所有图片(即将zip包中的图片一键批量上传到存储桶中)\n 2. 新增存储桶插件\n     1. bilibili存储桶\n     2. csdn存储桶\n \n## 2023-03-01\n1. `U`ip定位服务由高德地图切换至百度地图(原因：高德地图对于连接的手机热点网络时定位数据返回空，而百度地图不会)\n2. `A`管理端日志管理新增`定位`按钮，便于管理员修复以前使用高德地图定位服务失败的数据\n\n## 2023-02-27\n1. `P`优化删除图片时提示(只删除记录并不删除实际图片)\n\n## 2023-02-23\n1. `A`完善存储桶的配置说明文档\n2. `A`存储桶创建过程添加文档说明(方便用户查看配置手册)\n3. `A`密码统一使用md5加密\n4. `U`修复登录注册忘记密码页按钮可重复点击多次调用多次接口问题\n\n## 2023-02-22\n1. `U`修复从相册中去覆盖上传图片，图片上传后地址栏出现undefined问题\n2. `A`操作日志新增`访问来源`和`访问ip`字段，同时首页上传记录添加`访问来源`\n3. `U`修复邮件发送失败问题\n4. `A`新增邮箱验证码登录方式\n5. `P`优化用户体验(登录注册相关的填写邮箱地址不再需要填写邮箱后缀，提升用户体验)\n\n## 2023-01-05\n1. `P`优化图库的覆盖上传按钮只有当鼠标移入时才显示\n2. `A`新增存储桶批量导出图片到压缩包，方便用户数据迁移。\n3. `A`登录和注册填写邮箱时给个输入建议。\n\n## 2022-12-08\n1. `P`优化存储桶配置表单select添加filter属性\n2. `U`gitee和github图床看是否能够通过自动获取的方式，将分支罗列出来。\n3. `A`存储桶插件更新添加个历史版本记录功能，并且可以使用monaco-editor进行差异对比。\n4. `U`将上传进度保存到pinia中，避免还在上传中切换菜单，导致上传被中断，并且提供上传进度中心，可以进行管理，类似于[uniapp的前端网页托管功能](https://unicloud.dcloud.net.cn/pages/web-host/web-host?pageid=2)或者[七牛云的任务中心功能]()，如下图所示功能：\n\n![202212090929558.png](https://raw.githubusercontent.com/ischenliang/imgs/main/hehe/202212090929558.png)\n![202212090929558.png](https://raw.githubusercontent.com/ischenliang/imgs/main/hehe/202212090929558.png)\n\n\n## 2022-11-25\n1. `P`优化相册图片搜索交互(可按回车直接搜索，可以清除搜索内容)\n2. `P`调整相册标签选择窗口标签列表上下间距\n3. `P`相册下进入首页上传图片需要记住页码和筛选条件（例如在第二页点击\"去上传\"，然后返回相册需停留在第二页）\n4. `P`相册下删除图片标签后如果删除的标签列表中包含当前高亮标签应当将标签设置为“全部”\n\n## 2022-11-24\n1. `A`新增相册下的图片可以重新上传覆盖功能（交互呈现方式参考:[pure-admin](https://yiming_chang.gitee.io/vue-pure-admin/#/list/card)）\n2. `P`优化相册图片编辑标签弹窗的标签列表呈现效果\n\n## 2022-11-23\n1. `A`相册下图片支持筛选功能\n2. `A`图片支持设置标签tags(局限于相册下的图片)\n3. `U`图片卡片调整排版，并设置相应动画\n<img class=\"img-medium\" src=\"https://imgs.itchenliang.club/img/202211231716088.png\" alt=\"202211231716088.png\" />\n\n## 2022-11-22\n1. `A`新增相册下图片可以置顶功能，同时也可以取消置顶\n2. `F`修复正式环境图片不能复制问题\n<img class=\"img-medium\" src=\"https://imgs.itchenliang.club/img/2022112218022310.png\" alt=\"2022112218022310.png\" />\n\n## 2022-11-11\n1. `F`修复相册顶部内容未撑开问题\n\n## 2022-11-10\n1. `U`系统管理下的存储桶源添加状态属性，用于实现存储桶源是否启用\n2. `U`系统管理下的用户管理切换状态时禁止更新`updatedAt`属性，为`sequelize`添加`slient`属性\n3. `U`存储桶管理切换状态时禁止更新`updatedAt`属性，为`sequelize`添加`slient`属性\n4. `U`存储桶管理状态不同时显示不同效果\n<img class=\"img-medium\" src=\"https://imgs.itchenliang.club/img/202211100946109.png\" alt=\"202211100946109.png\" />\n5. `U`图库可以进行名称重命名\n\n## 2022-11-09\n1. `U`相册功能联调后台，同时支持相册直接跳转到上传区，将图片直接上传到相册\n2. `F`修复部署时图库详情打不开问题，导致原因`eval`不能正常使用，修改使用正则实现\n\n## 2022-11-07\n1. `A`新增相册功能，并实现相册界面排版\n\n## 2022-11-02\n1. `U`更新登录页面样式，添加图形验证码以及两种切换登录方式\n\n## 2022-11-01\n1. `A`公共资源管理员权限拦截处理\n2. `A`管理端直接新建用户账号\n3. `A`注册时判断账号是否已存在，并且登录时写入日志内容\n4. `U`字典和存储桶源管理弹窗操作后提示操作成功\n5. `U`删除日志时二次确认是否确定删除\n6. `A`个人中心的使用分析统计界面排版设计\n\n## 2022-10-31\n1. `A`动态路由功能实现以及路由拦截处理\n2. `U`根据动态路由来渲染菜单栏\n3. `A`操作日志功能实现\n4. `U`系统列表右上角的操作按钮大小统一使用`default`尺寸\n5. `F`解决首页上传数量限制问题，采用管理员配置的数量做限制\n6. `U`调整相册页每一项的高度从`250px` -> `210px`\n\n## 2022-10-28\n1. `A`更新日志功能实现\n2. `U`首页今日操作历史记录为空时提示无记录\n3. `A`修改密码功能实现\n4. `U`调整路由配置，包括用户端的操作日志和使用分析以及更新日志\n5. `A`新增`juejin-markdown-themes`依赖\n6. `U`路由前置守卫中将获取系统默认配置抽离到拦截外\n\n## 2022-10-27\n1. `A`个人中心功能实现\n2. `A`新增一系列用户可选头像\n3. `A`首页上的历史记录功能实现(今日)\n\n## 2022-10-21\n1. `U`将登录板块抽离出来调用自己的koa后台\n2. `U`将后台板块都抽离出来使用自己的koa后台，为了避免出现其他问题\n\n## 2022-10-20\n1. `U`更新首页上传时的文件类型和大小限制从systemConfig中提取\n2. `U`调整系统配置时的文件上传大小和存储桶容量限制单位从KB -> MB\n3. `A`首页上传时不符合要求(大小和类型)的文件notify提示\n\n## 2022-10-19\n1. `A`系统设置功能联调\n2. `U`更新优化bytemd富文本组件\n3. `D`去除使用reset.css浏览器默认样式重置库\n4. `A`封装img-upload组件，用于单独上传一张图片', '2022-10-24 03:12:26', '2023-03-06 13:43:32', '[\r\n  {\r\n    \"label\": \"文档中心\",\r\n    \"link\": \"https://gitee.com/itchenliang/quickly-picture-bed/tree/koa-controller/doc\",\r\n    \"target\": \"_blank\"\r\n  },\r\n  {\r\n    \"label\": \"Github\",\r\n    \"link\": \"https://github.com/ischenliang/quickly-picture-bed\",\r\n    \"target\": \"_blank\"\r\n  },\r\n  {\r\n    \"label\": \"Gitee\",\r\n    \"link\": \"https://gitee.com/itchenliang/quickly-picture-bed\",\r\n    \"target\": \"_blank\"\r\n  }\r\n]', '{\"default\": \"(() => {\\r\\n\\treturn {\\r\\n\\t\\t// 用户视图能看见什么样的表单\\r\\n\\t\\tconfig: [\\r\\n\\t\\t\\t{\\r\\n\\t\\t\\t\\t\\\"type\\\":\\\"string\\\",\\r\\n\\t\\t\\t\\t\\\"label\\\":\\\"设定用户名\\\",\\r\\n\\t\\t\\t\\t\\\"field\\\":\\\"username\\\",\\r\\n\\t\\t\\t\\t\\\"default\\\":\\\"\\\",\\r\\n\\t\\t\\t\\t\\\"required\\\":true,\\r\\n\\t\\t\\t\\t\\\"placeholder\\\":\\\"请输入用户名\\\"\\r\\n\\t\\t\\t}\\r\\n\\t\\t],\\r\\n\\t\\t// 上传配置\\r\\n\\t\\tuploader: {\\r\\n\\t\\t\\t// 注意：不要使用箭头函数，否则会改变this的指向\\r\\n\\t\\t\\t// 前置操作：返回请求配置前的操作，例如数据处理、获取token等操作\\r\\n\\t\\t\\tbeforeEach: async function () {\\r\\n\\t\\t\\t\\t\\r\\n\\t\\t\\t},\\r\\n\\t\\t\\t// 注意：不要使用箭头函数，否则会改变this的指向\\r\\n\\t\\t\\t// 需要返回axios的RequestConfig类型的请求配置，参考：https://www.axios-http.cn/docs/req_config\\r\\n\\t\\t\\trequest: async function (file) {\\r\\n\\t\\t\\t\\treturn {\\r\\n\\t\\t\\t\\t\\turl: \\\"\\\",\\r\\n\\t\\t\\t\\t\\tmethod: \\\"\\\",\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t},\\r\\n\\t\\t\\t// 注意：不要使用箭头函数，否则会改变this的指向\\r\\n\\t\\t\\t// 此处res代表axios的response，从res中拿到数据并需返回{ img_url: \\\"\\\", hash: \\\"\\\" }格式\\r\\n\\t\\t\\tresponse: function (res) {\\r\\n\\t\\t\\t\\treturn {\\r\\n\\t\\t\\t\\t\\timg_url: \\\"\\\",\\r\\n\\t\\t\\t\\t\\thash: \\\"\\\"\\r\\n\\t\\t\\t\\t}\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t}\\r\\n})()\"}');

-- ----------------------------
-- Table structure for smscode
-- ----------------------------
DROP TABLE IF EXISTS `smscode`;
CREATE TABLE `smscode`  (
  `id` char(36) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL COMMENT 'uuid',
  `account` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '账号，邮箱或者手机号',
  `type` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '类别，可选email|phone',
  `code` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '验证码内容',
  `expire_at` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '验证码有效期',
  `createdAt` datetime(0) NOT NULL,
  `updatedAt` datetime(0) NOT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of smscode
-- ----------------------------

-- ----------------------------
-- Table structure for user
-- ----------------------------
DROP TABLE IF EXISTS `user`;
CREATE TABLE `user`  (
  `id` char(36) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL COMMENT 'uuid',
  `phone` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '手机号',
  `email` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '邮箱',
  `password` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '密码',
  `avatar` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '星座_白羊座' COMMENT '头像',
  `role` int(11) NOT NULL DEFAULT 1 COMMENT '用户角色',
  `desc` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '个人简介',
  `major` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '用户职业',
  `gender` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '用户性别',
  `address` json NOT NULL COMMENT '用户地址:省、市、区、街道地址',
  `createdAt` datetime(0) NOT NULL,
  `updatedAt` datetime(0) NOT NULL,
  `token` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '登录token',
  `username` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '默认名称' COMMENT '用户昵称',
  `status` tinyint(1) NOT NULL DEFAULT 1 COMMENT '用户状态',
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE INDEX `email`(`email`) USING BTREE,
  UNIQUE INDEX `phone`(`phone`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of user
-- ----------------------------
INSERT INTO `user` VALUES ('6a7a4a31-2e6d-4e8d-ab98-63d90cd2284c', '', 'admin@163.com', '5a8366fc9da3ff99c9b5a21702664735', '星座_水瓶座', 10, '这是我的个人简介......', '程序猿', '男', '[\"51\", \"5101\", \"510105\"]', '2022-10-21 05:29:26', '2023-03-07 02:53:00', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJkYXRhIjoiNmE3YTRhMzEtMmU2ZC00ZThkLWFiOTgtNjNkOTBjZDIyODRjIiwicm9sZSI6MTAsImlhdCI6MTY3ODE1NzU4MCwiZXhwIjoxNjc4MjQzOTgwfQ.T6ki8wx7Va11_TWN_MISNXJ3S35gpgfQxZ6EZFqjcU0', '演示账号', 1);

-- ----------------------------
-- Table structure for verifycode
-- ----------------------------
DROP TABLE IF EXISTS `verifycode`;
CREATE TABLE `verifycode`  (
  `id` char(36) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL COMMENT 'uuid',
  `code` blob NOT NULL COMMENT '验证码内容',
  `anser` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '验证码答案',
  `expire_at` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '验证码有效期',
  `createdAt` datetime(0) NOT NULL,
  `updatedAt` datetime(0) NOT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of verifycode
-- ----------------------------
INSERT INTO `verifycode` VALUES ('5190a01b-8d75-4849-967a-7dd99c06643b', 0x646174613A696D6167652F7376672B786D6C3B6261736536342C50484E325A79423462577875637A30696148523063446F764C336433647935334D793576636D63764D6A41774D43397A646D6369494864705A48526F505349784D4441694947686C6157646F644430694E44416949485A705A58644362336739496A41734D4377784D4441734E444169506A78795A574E30494864705A48526F505349784D44416C4969426F5A576C6E61485139496A45774D43556949475A706247773949694E6C4E4759345A6D55694C7A3438634746306143426B50534A4E4D5441674D544967517A5577494463734D7A41674E4377344D6941794E434967633352796232746C5053496A4E7A67314D6D55354969426D6157787350534A756232356C4969382B50484268644767675A6D6C7362443069497A67354E6D526B5A4349675A44306954544D334C6A4530494449794C6A633154444D334C6A4533494449794C6A633554444D334C6A4534494449794C6A677755544D314C6A6B77494449794C6A633449444D314C6A41334944497A4C6A593554444D314C6A45354944497A4C6A677754444D314C6A41314944497A4C6A593255544D304C6A4935494449304C6A593049444D304C6A4535494449314C6A6B7A54444D304C6A4579494449314C6A673254444D304C6A4978494449314C6A6B3155544D304C6A417A494449334C6A4D3049444D304C6A6731494449344C6A417A54444D304C6A6777494449334C6A6B3454444D304C6A6B31494449344C6A457955544D314C6A6378494449344C6A633049444D334C6A4532494449344C6A593554444D334C6A4931494449344C6A633554444D334C6A4535494449344C6A637955544D344C6A677A494449344C6A593449444D354C6A5133494449344C6A413054444D354C6A4935494449334C6A673254444D354C6A4D7A494449334C6A6735555451774C6A4578494449334C6A4177494451774C6A4130494449314C6A6332544451774C6A4131494449314C6A633354444D354C6A6B79494449314C6A593155544D354C6A6734494449304C6A517849444D354C6A45304944497A4C6A553554444D354C6A45344944497A4C6A597A54444D354C6A45334944497A4C6A597955544D344C6A5134494449794C6A673249444D334C6A4930494449794C6A6732576B307A4E7934784E4341784E69347A4E30777A4E7934784E6941784E6934304D45777A4E7934794D5341784E6934304E56457A4E6934794E6941784E69347A4F43417A4E53347A4E6941784E6934334D55777A4E5334794F4341784E6934324E45777A4E53347A4F5341784E6934334E56457A4E4334314D4341784E7934794F43417A4E4334324E5341784F4334314E45777A4E4334324D7941784F4334314D6B777A4E4334324E7941784F4334314E6C457A4E5334774D7941794D5334784D53417A4E79347A4D4341794D5334784D55777A4E79347A4D6941794D5334784D30777A4E7934784F5341794D5334774D46457A4F4334794D6941794D5334784D43417A4F4334354D4341794D43347A4D30777A4F4334354D5341794D43347A4E45777A4F4334354D4341794D43347A4D31457A4F5334324E6941784F5334324E43417A4F5334324F4341784F4334314F45777A4F5334324E7941784F4334314E30777A4F5334334D4341784F4334324D46457A4F5334324F5341784E79347A4E53417A4F5334794D4341784E6934354E45777A4F5334794E6941784E7934774D45777A4F53347A4D5341784E7934774E56457A4F4334784E4341784E6934304E53417A4E7934794E6941784E6934314D46704E4D7A59754F5463674D7A41754D7A524D4D7A63754D4441674D7A41754D7A644D4D7A51754F5449674D7A41754D7A564D4D7A51754F5463674D7A41754E4442524D7A4D754F4459674D7A41754D7A4D674D7A49754F5459674D6A6B754E7A524D4D7A49754F5449674D6A6B754E7A424D4D7A49754F5449674D6A6B754E7A42524D7A49754D4441674D6A67754F544D674D7A49754D5441674D6A59754F546C4D4D7A49754D6A51674D6A63754D544E4D4D7A49754D5441674D6A59754F546C524D7A49754E446B674D6A49754E444D674D7A51754F5455674D6A45754E7A564D4D7A51754F544D674D6A45754E7A524D4D7A51754F5459674D6A45754E7A5A524D7A4D754E4459674D6A45754D6A41674D7A49754E5455674D5463754E54564D4D7A49754E5455674D5463754E54564D4D7A49754E5449674D5463754E5446524D7A49754D6A55674D5459754E544D674D7A49754D7A45674D5455754F546C4D4D7A49754D6A49674D5455754F54424D4D7A49754D7A51674D5459754D444A524D7A49754E444D674D5451754E4455674D7A51754F544D674D5451754E444E4D4D7A51754F5451674D5451754E444E4D4D7A51754F5455674D5451754E4452524D7A63754F5463674D5451754E5451674D7A67754F5455674D5451754E6A644D4D7A67754E7A6B674D5451754E54464D4D7A67754F4441674D5451754E544A524E4445754E5441674D5451754F5467674E4445754F4445674D5459754D7A524D4E4445754E7A4D674D5459754D6A644D4E4445754E7A49674D5459754D6A5A524E4445754F4449674D5459754E6A6B674E4445754F4449674D5459754F54564D4E4445754F4455674D5459754F54684D4E4445754F5441674D5463754D444E524E4445754F4451674D5463754E4451674E4445754E7A45674D5463754F44564D4E4445754E7A55674D5463754F446C4D4E4445754F4451674D5463754F5464524E4445754D7A4D674D6A41754E7A51674D7A6B754D7A51674D6A45754E7A684D4D7A6B754E444D674D6A45754F44644D4D7A6B754E4445674D6A45754F4456524E4445754E7A67674D6A49754D7A67674E4449754D5445674D6A55754F54644D4E4449754D5449674D6A55754F54684D4E4449754D446B674D6A55754F5456524E4449754D5441674D6A59754D4459674E4449754D5449674D6A59754F54524D4E4449754D5451674D6A59754F545A4D4E4445754F546B674D6A59754F4446524E4449754D544D674D6A67754E7A55674E4445754D4451674D6A6B754E44684D4E4445754D4467674D6A6B754E544A4D4E4441754F5463674D6A6B754E4446524E4441754D5455674D7A41754D5445674D7A63754D4455674D7A41754E444A6154544D344C6A553049444D784C6A6B7A54444D344C6A553449444D784C6A6B34544451774C6A677A49444D794C6A4178544451774C6A677849444D784C6A6B34555451794C6A413549444D794C6A45314944517A4C6A457949444D784C6A5932544451794C6A6B3449444D784C6A55795444517A4C6A417749444D784C6A55305554517A4C6A637949444D774C6A6B354944517A4C6A6333494449354C6A63795444517A4C6A677A494449354C6A63345444517A4C6A6B32494449354C6A6B785554517A4C6A6732494449354C6A41304944517A4C6A5977494449334C6A63795444517A4C6A5978494449334C6A637A5444517A4C6A5533494449334C6A59355554517A4C6A4179494449304C6A5978494451784C6A59774944497A4C6A4D31544451784C6A55334944497A4C6A4D78544451784C6A51334944497A4C6A4134544451784C6A4934494449794C6A6730544451784C6A4931494449794C6A6330544451784C6A4934494449794C6A6333555451794C6A5130494449784C6A67344944517A4C6A4132494445354C6A4133544451794C6A6B33494445344C6A6B34544451794C6A6B35494445354C6A4177555451794C6A6B79494445344C6A5933494451794C6A6B33494445344C6A4577544451794C6A6B79494445344C6A41315444517A4C6A4135494445344C6A4979555451794C6A6B35494445334C6A5978494451794C6A6B30494445334C6A4535544451794C6A6B33494445334C6A49795444517A4C6A4134494445334C6A4D7A555451794C6A6B32494445324C6A4D7A494451794C6A4532494445324C6A4177544451794C6A4530494445314C6A6B34544451794C6A4533494445314C6A6B34544451784C6A6B7A494445314C6A6335544451784C6A6B30494445314C6A6778555451784C6A6331494445314C6A4D77494451774C6A6B30494445304C6A6332544451774C6A6B31494445304C6A6332544451784C6A4130494445304C6A677A544451784C6A4177494445304C6A633555544D354C6A637A494445304C6A4D3549444D324C6A6B33494445304C6A493354444D334C6A4179494445304C6A4D7954444D324C6A6B7A494445304C6A497A55544D314C6A6B79494445304C6A497749444D304C6A6B35494445304C6A493454444D304C6A6B30494445304C6A497A54444D304C6A6B35494445304C6A493455544D304C6A5135494445304C6A4D3149444D7A4C6A5978494445304C6A513154444D7A4C6A5577494445304C6A4D7A54444D7A4C6A5133494445304C6A4D7855544D794C6A4535494445304C6A597749444D794C6A417A494445314C6A637854444D794C6A417A494445314C6A637854444D784C6A6B34494445314C6A593255544D784C6A6B35494445324C6A417A49444D794C6A4179494445324C6A553454444D794C6A4531494445324C6A637854444D794C6A417A494445324C6A553555544D794C6A4579494445324C6A6B3349444D794C6A5578494445344C6A553354444D794C6A5532494445344C6A597954444D794C6A5535494445344C6A593055544D794C6A6B35494449774C6A637749444D304C6A4534494449784C6A597754444D304C6A4979494449784C6A593154444D304C6A5177494449784C6A677954444D304C6A497A494449784C6A593255544D794C6A5577494449794C6A593549444D794C6A4530494449324C6A497854444D794C6A4530494449324C6A497754444D794C6A457A494449324C6A453555544D784C6A6B78494449334C6A597749444D784C6A6B78494449344C6A497954444D784C6A6B35494449344C6A4D7754444D784C6A6B78494449344C6A497955544D784C6A6B30494449354C6A517849444D794C6A633049444D774C6A417A54444D794C6A677A49444D774C6A457A54444D794C6A633149444D774C6A413055544D794C6A633249444D774C6A417A49444D794C6A6B3049444D774C6A453254444D7A4C6A453049444D774C6A4D3154444D7A4C6A417949444D774C6A493055544D7A4C6A677749444D784C6A673349444D344C6A597A49444D794C6A417A576B307A4F43347A4F5341794E4334314D45777A4F43347A4E4341794E4334304E55777A4F4334794F5341794E4334304D46457A4F5334774E5341794E4334304F53417A4F5334324E5341794E4334344D45777A4F5334304E6941794E4334324D55777A4F5334324D5341794E4334334E6C457A4F5334334D7941794E53347A4D43417A4F5334334D4341794E5334324E6B777A4F5334344D7941794E5334334F45777A4F5334334D7941794E5334324F56457A4F5334344F4341794E6934774D69417A4F5334344F4341794E6934794D6B777A4F5334354D4341794E6934794E45777A4F5334344E4341794E6934784F46457A4F5334334F5341794E7934334E43417A4F4334794E4341794F43347A4D45777A4F43347A4E5341794F4334304D55777A4F4334794F5341794F43347A4E56457A4E7934324E4341794F4334304E53417A4E7934784D4341794F43347A4F45777A4E7934794D5341794F4334304F55777A4E7934794E4341794F4334314D56457A4E6934304E6941794F4334314E69417A4E5334324F4341794F4334794E55777A4E5334324D5341794F4334784F45777A4E5334334D4341794F4334794E6C457A4E5334314D5341794E7934344D69417A4E5334314E7941794E7934784E55777A4E5334304E7941794E7934774E6B777A4E5334314D5341794E7934784D46457A4E5334314E5341794E5334354E43417A4E69347A4E6941794E5334784D6B777A4E6934304D5341794E5334784E30777A4E6934304E5341794E5334794D56457A4E7934784E7941794E4334794F53417A4F4334794E6941794E43347A4E31704E4D7A67754E4459674D5463754F54684D4D7A67754E5445674D5467754D444E4D4D7A67754E5467674D5467754D5442524D7A6B754D4467674D5463754F5467674D7A6B754E4451674D5467754D44684D4D7A6B754E446B674D5467754D544E4D4D7A6B754E4463674D5467754E6A564D4D7A6B754E444D674D5467754E6A46524D7A6B754E4449674D546B754E5459674D7A67754F4441674D6A41754D6A524D4D7A67754E7A63674D6A41754D6A4A4D4D7A67754F4455674D6A41754D6A6C524D7A67754D5463674D6A41754F5449674D7A63754D6A51674D6A41754E7A6C4D4D7A63754D5467674D6A41754E7A4E4D4D7A63754D6A45674D6A41754E7A5A524D7A59754E5467674D6A41754F4441674D7A59754D7A41674D6A41754E6A564D4D7A59754D6A51674D6A41754E546C4D4D7A59754D7A41674D6A41754E6A56524D7A59754D6A49674D6A41754E4449674D7A59754D5455674D546B754F545A4D4D7A59754D6A4D674D6A41754D44524D4D7A59754D6A41674D6A41754D4446524D7A59754D4451674D546B754D4467674D7A59754F4463674D5467754E54464D4D7A59754F4441674D5467754E44524D4D7A59754E7A63674D5467754E4446524D7A63754E4451674D5463754F446B674D7A67754E4441674D5463754F544A614969382B50484268644767675A6D6C7362443069497A646D4E57566C4D6949675A443069545455324C6A673349444D774C6A4932544455324C6A673449444D774C6A4934544455314C6A4D7A494449314C6A6378544455314C6A4933494449314C6A5930555455794C6A4D78494445334C6A4577494451344C6A4934494445794C6A6332544451344C6A4D78494445794C6A6335544451344C6A4930494445794C6A6379555451354C6A63774944457A4C6A557A494455784C6A51324944457A4C6A6B31544455784C6A4D314944457A4C6A6730544455784C6A55774944457A4C6A6B35555455304C6A6778494445344C6A4133494455334C6A6331494449324C6A637A544455334C6A6779494449324C6A6777544455334C6A6779494449324C6A6777555455354C6A6B77494449784C6A4D78494459774C6A4D32494449774C6A4979544459774C6A4D7A494449774C6A4535544459774C6A4D78494449774C6A4533555459794C6A417A494445324C6A51324944597A4C6A6B30494445304C6A49785444597A4C6A6733494445304C6A45305444597A4C6A6B79494445304C6A4535555459314C6A5177494445304C6A4179494459334C6A45344944457A4C6A5179544459334C6A41784944457A4C6A4932544459334C6A41344944457A4C6A4D795554597A4C6A6B78494445324C6A4D34494459784C6A6731494449784C6A4935544459794C6A4178494449784C6A5131544459784C6A6733494449784C6A4D78555459774C6A6B774944497A4C6A6334494455344C6A4D3549444D774C6A4930544455344C6A557849444D774C6A4D31544455344C6A513049444D774C6A4934555455344C6A453249444D774C6A4D35494455334C6A633449444D774C6A4D33544455334C6A633049444D774C6A4D30544455334C6A593249444D774C6A4931555455334C6A4D7749444D774C6A4934494455324C6A6B7949444D774C6A4D78576B30324D4334304D53417A4D6934774E4577324D43347A4E79417A4D6934774D4577324D4334794D79417A4D5334344E6C45324D6934794D6941794E5334784F4341324D7934794F4341794D6934304E4577324D79347A4D5341794D6934304E3077324D7934794D6941794D69347A4F4645324E5334794D6941784E7934784D6941324F4334794D6941784D7934344D6B77324F4334304D4341784E4334774D4577324F4334304D5341784E4334774D4645324E7934324E5341784E4334794D5341324E6934794D7941784E4334334D4577324E6934784F5341784E4334324E5577324E6934354F5341784D7934334F4577324E6934354E7941784D7934334E6C45324E79347A4E7941784D79347A4D4341324E7934334F4341784D6934344E6B77324E7934344D7941784D6934354D5577324E7934334F5341784D6934344E3145324E5334344D4341784D7934304E6941324D7934334E6941784D7934344E5577324D7934344E7941784D7934354E6B77324D7934344D4341784D7934354D4645324D4334334E5341784E7934304D7941314F4334784D6941794E5334794D5577314F4334784E5341794E5334794E4577314F4334784D7941794E5334794D6C45314E5334344D4341784F4334314D4341314D7934324D7941784E5334314D3077314D7934314D6941784E5334304D6B77314D7934314F5341784E5334304F5645314D79347A4D6941784E5334304D6941314D6934334D6941784E53347A4D6B77314D6934334E4341784E53347A4D3077314D6934324E4341784E5334794D3145314D6934314E7941784E5334774E6941314D5334304F4341784D7934324E6B77314D5334304E5341784D7934324D3077314D5334314D7941784D7934334D5645304F5334304D5341784D7934784D6941304E7934314F4341784D6934784E6B77304E7934324F4341784D6934794E3077304E7934314D7941784D6934784D5645314D6934774F4341784E6934354F4341314E5334774E5341794E5334324E6B77314E5334774E5341794E5334324E5577314E5334784D7941794E5334334D3145314E5334354E6941794F4334794D6941314E6934334E69417A4D4334324E4577314E6934324D69417A4D4334314D4577314E6934344D43417A4D4334324F4645314E6934354E43417A4D4334324D5341314E7934314D43417A4D4334314E4577314E7934324D53417A4D4334324E4577314E7934314D53417A4D4334314E4645314E7934344E53417A4D5334784D6941314F43347A4D69417A4D6934774D6B77314F43347A4D53417A4D6934774D5577314F4334794E43417A4D5334354E5645314F4334344D53417A4D5334344F5341314F53347A4D43417A4D5334354E5577314F5334794E43417A4D5334344F4577314F53347A4D43417A4D5334354E4645314F5334354D43417A4D6934774E5341324D4334304D53417A4D6934774E566F694C7A3438634746306143426D615778735053496A5A474D7A596D49304969426B50534A4E4E7A51754D5449674D7A41754D7A524D4E7A51754D5467674D7A41754E44424D4E7A51754D5455674D7A41754D7A64524E7A4D754D6A4D674D7A41754E4459674E7A49754D5463674D7A41754D54684D4E7A49754D5467674D7A41754D54684D4E7A49754D446B674D7A41754D446C524E7A45754D6A63674D6A6B754E4467674E7A45754D5459674D6A67754D7A644D4E7A45754D5467674D6A67754D7A684D4E7A45754D7A41674D6A67754E5442524E7A45754D6A6B674D6A67754D7A6B674E7A45754E4449674D6A59754E6A424D4E7A45754D7A41674D6A59754E446C4D4E7A45754D7A41674D6A59754E446C524E7A49754D4467674D6A59754E4451674E7A4D754E4455674D6A59754D546C4D4E7A4D754D7A55674D6A59754D446C4D4E7A4D754D7A67674D6A59754E7A5A4D4E7A4D754D6A55674D6A59754E6A4E524E7A4D754D5441674D6A63754F4455674E7A51754D4459674D6A67754D6A524D4E7A4D754F5467674D6A67754D545A4D4E7A51754D446B674D6A67754D6A64524E7A51754E5451674D6A67754E4445674E7A55754F5459674D6A67754E44464D4E7A59754D4445674D6A67754E445A4D4E7A55754F544D674D6A67754D7A68524E7A63754D446B674D6A67754D7A55674E7A63754D6A45674D6A67754D7A424D4E7A63754D7A45674D6A67754D7A6C4D4E7A63754D6A59674D6A67754D7A56524E7A63754F4467674D6A67754D6A51674E7A67754D7A63674D6A63754F54424D4E7A67754E4441674D6A63754F544E4D4E7A67754E4441674D6A63754F544E524E7A6B754D7A45674D6A63754D6A51674E7A6B754D5467674D6A55754F444A4D4E7A6B754D6A45674D6A55754F44564D4E7A6B754D4467674D6A55754E7A4A524E7A6B754D5451674D6A51754D6A59674E7A63754F5463674D6A4D754D6A424D4E7A63754F5449674D6A4D754D54564D4E7A63754F5445674D6A4D754D5452524E7A59754E6A41674D6A45754F5451674E7A51754F5449674D6A45754F54524D4E7A55754D446B674D6A49754D544A4D4E7A51754F544D674D6A45754F44424D4E7A51754F5449674D6A45754E7A6C524E7A55754D7A4D674D6A45754F5449674E7A55754F544D674D6A45754F44644D4E7A55754F5459674D6A45754F54424D4E7A55754F5459674D6A45754F5442524E7A63754D446B674D6A45754E6A59674E7A67754D4449674D6A41754F444A4D4E7A67754D5463674D6A41754F54684D4E7A67754D5451674D6A41754F5452524E7A6B754D4463674D6A41754D5441674E7A6B754D5463674D5467754F44524D4E7A6B754D4455674D5467754E7A464D4E7A6B754D5467674D5467754F4452524E7A6B754D5449674D5467754E5441674E7A6B754D5449674D5467754D6A5A4D4E7A6B754D544D674D5467754D6A684D4E7A6B754D6A51674D5467754D7A68524E7A6B754D5467674D5463754D6A6B674E7A67754D6A55674D5459754E6A644D4E7A67754D546B674D5459754E6A4A4D4E7A67754D6A51674D5459754E6A64524E7A63754E5449674D5459754D6A49674E7A59754E444D674D5459754D7A424D4E7A59754D6A51674D5459754D54464D4E7A59754D6A51674D5459754D5446524E7A55754E4441674D5459754D4455674E7A51754E5467674D5459754D7A4E4D4E7A51754E546B674D5459754D7A564D4E7A51754E6A67674D5459754E444E524E7A4D754E5463674D5459754E6A63674E7A4D754D7A59674D5463754E44524D4E7A4D754E444D674D5463754E54464D4E7A4D754E544D674D5463754E6A46524E7A4D754D6A59674D5463754F546B674E7A4D754D7A45674D5467754E54424D4E7A4D754E4445674D5467754E6A424D4E7A4D754D6A63674D5467754E445A524E7A49754E7A51674D5467754E4463674E7A45754D7A51674D5463754F54684D4E7A45754D7A41674D5463754F54524D4E7A45754D546B674D5463754F444A524E7A45754D4463674D5459754E7A4D674E7A45754D5441674D5459754D545A4D4E7A45754D5445674D5459754D54644D4E7A45754D4463674D5459754D544E524E7A45754D5455674D5455754D5441674E7A45754F4463674D5451754E6A524D4E7A49754D4451674D5451754F44424D4E7A49754D444D674D5451754E7A6C524E7A49754F4467674D5451754D6A63674E7A4D754F5459674D5451754D6A644D4E7A51754D4449674D5451754D7A4E4D4E7A51754D4451674D5451754D7A56524E7A59754D5451674D5451754D6A67674E7A67754D6A67674D5451754E445A4D4E7A67754D6A49674D5451754D7A6C4D4E7A67754D5467674D5451754D7A56524F4445754E6A45674D5451754E6A51674F4445754E4445674D5463754D546C4D4F4445754E5463674D5463754D7A5A4D4F4445754E5441674D5463754D6A68524F4445754D7A6B674D5467754D6A51674F4445754D4455674D546B754D7A424D4F4445754D544D674D546B754D7A644D4F4445754D5441674D546B754D7A56524F4441754E4449674D6A45754D7A63674E7A67754F4445674D6A45754F546C4D4E7A67754F444D674D6A49754D44424D4E7A67754F5459674D6A49754D5452524F4441754E5467674D6A49754D7A4D674F4441754F546B674D6A51754E6A464D4F4445754D444D674D6A51754E6A564D4F4445754D4463674D6A51754E6A6C524F4445754D7A4D674D6A55754E5463674F4445754D7A67674D6A59754F544E4D4F4445754D7A51674D6A59754F54424D4F4445754D6A41674D6A59754E7A56524F4445754E4441674D6A6B754F4463674E7A67754D6A67674D7A41754D54684D4E7A67754D6A4D674D7A41754D544E4D4E7A67754D7A41674D7A41754D6A46524E7A63754E7A59674D7A41754D6A45674E7A51754D5463674D7A41754D7A6C61545463334C6A633249444D784C6A6B33544463334C6A677749444D794C6A4178544463334C6A677A49444D794C6A417A555463344C6A457949444D784C6A6B30494467774C6A413249444D784C6A6B35544467774C6A417949444D784C6A6B31544467774C6A413049444D784C6A6B33555467784C6A497849444D794C6A4178494467794C6A4D7949444D784C6A5533544467794C6A4D3349444D784C6A5979544467794C6A4D3549444D784C6A59305554677A4C6A457749444D774C6A6B77494467794C6A6B34494449354C6A63795444677A4C6A4578494449354C6A67315444677A4C6A4133494449354C6A67785554677A4C6A4177494449344C6A6B79494467794C6A6777494449334C6A637A544467794C6A6379494449334C6A5931544467794C6A6332494449334C6A5935555467794C6A4931494449304C6A5979494467774C6A6B7A4944497A4C6A5578544467774C6A6B304944497A4C6A5579544467774C6A637A4944497A4C6A4535544467774C6A67344944497A4C6A4D78544467774C6A63354944497A4C6A4979555467794C6A4135494449794C6A4D31494467794C6A5978494445354C6A4D33544467794C6A5577494445354C6A4932544467794C6A5134494445354C6A4930555467794C6A5979494445354C6A4131494467794C6A6377494445344C6A5178544467794C6A5931494445344C6A4D32544467794C6A5579494445344C6A497A555467794C6A5930494445334C6A6334494467794C6A5535494445334C6A4D78544467794C6A5978494445334C6A4D30544467794C6A5530494445334C6A4933555467794C6A5578494445324C6A4977494467784C6A597A494445314C6A6330544467784C6A5932494445314C6A6333544467784C6A5577494445314C6A5932544467784C6A5930494445314C6A6777555467784C6A4D78494445314C6A4177494467774C6A557A494445304C6A5930544467774C6A5530494445304C6A5931544467774C6A5535494445304C6A5935555463354C6A5132494445304C6A4530494463314C6A6B344944457A4C6A6B7A544463324C6A4133494445304C6A417A544463324C6A4577494445304C6A4132555463304C6A67304944457A4C6A67354944637A4C6A63324944457A4C6A67355444637A4C6A63354944457A4C6A6B795444637A4C6A6733494445304C6A4177555463794C6A63334944457A4C6A6B35494463784C6A6330494445304C6A517A544463784C6A6333494445304C6A5132544463784C6A677A494445304C6A5578555463774C6A6B7A494445304C6A6B32494463774C6A6B7A494445324C6A4531544463784C6A4177494445324C6A4979544463774C6A6733494445324C6A4135555463774C6A6B34494445314C6A6B78494463784C6A4532494445344C6A4535544463784C6A4178494445344C6A4130544463784C6A4130494445344C6A4133555463784C6A4931494445344C6A4579494463794C6A4D32494445344C6A557A544463794C6A4D78494445344C6A5135544463794C6A5130494445344C6A5978555463794C6A5177494445344C6A6B7A494463794C6A4D33494445354C6A4933544463794C6A4D77494445354C6A4977544463794C6A4D78494445354C6A4978555463794C6A4D78494445354C6A5530494463794C6A4D7A494445354C6A6B77544463794C6A5132494449774C6A4179544463794C6A5131494449774C6A41795554637A4C6A5930494449774C6A4931494463314C6A4178494449774C6A4D7A544463304C6A6B78494449774C6A497A544463314C6A4178494449774C6A4D7A555463304C6A6735494445344C6A6735494463314C6A5930494445344C6A4D79544463314C6A6331494445344C6A5130544463314C6A6378494445344C6A5177555463324C6A4535494445334C6A6733494463334C6A5532494445334C6A6378544463334C6A5978494445334C6A6332544463334C6A557A494445334C6A5934555463344C6A4D33494445334C6A6331494463344C6A6332494445334C6A6734544463344C6A6330494445334C6A6732544463344C6A6377494445334C6A6779555463344C6A6B77494445344C6A4133494463344C6A6B7A494445344C6A4531544463344C6A6331494445334C6A6B33544463344C6A6732494445344C6A4978544463344C6A6B77494445344C6A5532544463344C6A6B35494445344C6A5931555463344C6A6732494445344C6A5931494463344C6A677A494445344C6A6331544463344C6A6B31494445344C6A6733544463344C6A6B79494445344C6A6730555463344C6A6730494445354C6A6B34494463334C6A6778494449774C6A6334544463334C6A6733494449774C6A6730544463334C6A6731494449774C6A6779555463334C6A4579494449784C6A4D79494463314C6A6331494449784C6A5131544463314C6A6733494449784C6A5534544463314C6A6735494449784C6A5977555463314C6A4932494449784C6A5532494463304C6A5933494449784C6A5532544463304C6A5934494449784C6A5534544463304C6A5933494449784C6A5533555463304C6A6730494449784C6A6B30494463304C6A6B30494449794C6A5177544463304C6A6B32494449794C6A5179544463304C6A6733494449794C6A4D7A555463314C6A6B31494449794C6A497A494463324C6A6B30494449794C6A6379544463324C6A6B7A494449794C6A6379544463334C6A4179494449794C6A6734544463314C6A6B314944497A4C6A4177544463314C6A6B314944497A4C6A4177555463314C6A6B344944497A4C6A4930494463324C6A41324944497A4C6A5931544463314C6A6B344944497A4C6A5533544463314C6A6B334944497A4C6A5533555463334C6A55774944497A4C6A5535494463344C6A5932494449304C6A5577544463344C6A5934494449304C6A5578544463344C6A5531494449304C6A4D34555463344C6A5933494449304C6A5978494463344C6A6733494449314C6A6379544463354C6A4131494449314C6A6B77544463344C6A6B7A494449314C6A6334555463354C6A4130494449334C6A6330494463334C6A4131494449344C6A4179544463334C6A4533494449344C6A4531544463334C6A4533494449344C6A4530555463314C6A5930494449344C6A4978494463314C6A4931494449344C6A4535544463314C6A4930494449344C6A4534544463314C6A4D32494449344C6A4D77555463304C6A6735494449344C6A4132494463304C6A557A494449344C6A4178544463304C6A5930494449344C6A4579544463304C6A5931494449334C6A6779544463304C6A6330494449334C6A557A544463304C6A677A494449334C6A4D7A544463304C6A637A494449334C6A4177544463304C6A6333494449334C6A4130555463304C6A4130494449334C6A41784944637A4C6A5577494449334C6A45305444637A4C6A5932494449334C6A4D775444637A4C6A5932494449334C6A4D775554637A4C6A5577494449334C6A41784944637A4C6A5577494449324C6A67345444637A4C6A5132494449324C6A67305444637A4C6A5133494449324C6A67315554637A4C6A5930494449324C6A67334944637A4C6A5930494449324C6A63785444637A4C6A5533494449324C6A59305444637A4C6A5533494449324C6A59305554637A4C6A557A494449324C6A49354944637A4C6A597A494449314C6A67775444637A4C6A6335494449314C6A6B325444637A4C6A5933494449314C6A677A555463794C6A5177494449314C6A6B35494463784C6A457A494449324C6A4979544463784C6A4134494449324C6A4532544463784C6A4579494449324C6A4977555463784C6A4534494449324C6A5977494463784C6A4577494449334C6A4D32544463784C6A4134494449334C6A4D30544463784C6A4579494449334C6A4D34555463784C6A4577494449344C6A4977494463784C6A4577494449344C6A5978544463784C6A4577494449344C6A5979544463784C6A4177494449344C6A5579555463774C6A6B33494449354C6A677A494463784C6A6B7749444D774C6A4D30544463784C6A6B7749444D774C6A4D30544463794C6A413549444D774C6A557A5554637A4C6A413049444D794C6A417A494463324C6A493149444D784C6A6B77544463324C6A457949444D784C6A6333544463324C6A493449444D784C6A6B30555463324C6A633449444D784C6A6B79494463334C6A677949444D794C6A417957694976506A78775958526F49475A706247773949694D7A597A67335A44456949475139496B30784F5334334D43417A4D4334774D5577784F5334344E53417A4D4334784E5577784F4334314E53417A4D4334784E3077784F43347A4E7941794F5334354F5645784E7934344F53417A4D4334784E6941784E7934794E43417A4D4334794D3077784E7934784D53417A4D4334784D4577784E7934784E69417A4D4334784E5645784E7934304F5341794E5334344F5341784E7934304F5341794D7934784E3077784E7934314D4341794D7934784F4577784E7934324D4341794D7934794F5645784E4334354E5341784F4334344D4341354C6A6332494445794C6A6B7854446B754E6A67674D5449754F444E4D4F5334324E4341784D6934334F5645784D4334354D5341784D7934314D6941784D7934784F4341784E4334774E6B77784D7934794E5341784E4334784D3077784D7934774F5341784D7934354E3145784E6934314E6941784E7934344D4341784F4334324D4341794D53347A4E4577784F4334324D5341794D53347A4E5577784F4334324D6941794D53347A4E6C45794D4334324D4341784E7934314D7941794D7934314E7941784E4334784D6B77794D7934324D6941784E4334784E3077794D7934324F5341784E4334794D3145794E5334794E4341784D7934344E7941794E6934354E4341784D79347A4D3077794E7934774E4341784D7934304D6B77794E6934354E4341784D79347A4D3145794D6934334F4341784E7934304D4341784F5334304E7941794D7934784D5577784F5334304E7941794D7934784D5577784F5334324E4341794D7934794F4645784F5334304E6941794E7934344F5341784F5334324E7941794F5334354F46704E4D6A59754D4445674D5451754F444A4D4D6A63754E7A67674D5449754F444A4D4D6A63754E7A55674D5449754E7A6C524D6A55754E6A4D674D544D754E5463674D6A4D754E5445674D544D754F44684D4D6A4D754E5463674D544D754F544E4D4D6A4D754E5449674D544D754F446C524D6A41754E6A45674D5463754D4455674D5467754E7A41674D6A41754E54464D4D5467754E7A59674D6A41754E54644D4D5467754F4445674D6A41754E6A4A524D5463754D6A51674D5467754D4449674D5455754D4463674D5455754D7A684D4D5455754D6A49674D5455754E544E4D4D5455754D6A59674D5455754E5464524D5451754F446B674D5455754D7A67674D5451754E5459674D5455754D7A4E4D4D5451754E546B674D5455754D7A644D4D5451754E6A55674D5455754E444A524D5451754D6A49674D5451754F5449674D544D754D546B674D544D754E7A684D4D544D754D4459674D544D754E6A564D4D544D754D5455674D544D754E7A56524D5441754F5455674D544D754D7A4D674F4334354E4341784D6934794E3077344C6A6777494445794C6A457A544467754F4451674D5449754D5464524D5451754D5449674D5463754F5463674D5463754D7A55674D6A4D754D7A524D4D5463754D7A63674D6A4D754D7A644D4D5463754D6A4D674D6A4D754D6A4A524D5463754D6A67674D6A63754E6A51674D5459754F4463674D7A41754E44564D4D5459754F4455674D7A41754E44524D4D5459754E7A4D674D7A41754D7A4A524D5463754D7A41674D7A41754D7A67674D5467754D6A6B674D7A41754D7A424D4D5467754D7A55674D7A41754D7A5A4D4D5467754D7A6B674D7A45754D54424D4D5467754D6A4D674D7A41754F5452524D5467754D6A59674D7A45754D6A67674D5467754D6A45674D7A45754E6A524D4D5467754D6A63674D7A45754E7A464D4D5467754D6A41674D7A45754E6A4E524D6A41754E6A55674D7A45754E6A67674D6A45754F4451674D7A45754F44464D4D6A45754F444D674D7A45754F44424D4D6A45754F5449674D7A45754F446C524D6A45754D5445674D6A67754E7A55674D6A45754D444D674D6A51754E7A424D4D6A41754F544D674D6A51754E6A424D4D6A41754F4467674D6A51754E5456524D6A4D754F4459674D5467754F4449674D6A67754D7A41674D544D754F44524D4D6A67754E444D674D544D754F54644D4D6A55754F4463674D5451754E6A68614969382B50484268644767675A4430695454453549444567517A5530494445774C445530494459734F5463674D6A416949484E30636D39725A543069493255344E544D314D7949675A6D6C7362443069626D39755A534976506A78775958526F49475139496B30784F53417A4D6942444E4445674D6A59734E446B674D7A55734F5441674D54456949484E30636D39725A543069497A646D5A5759335A6949675A6D6C7362443069626D39755A534976506A777663335A6E50673D3D, 'Y8V3', '2023-03-07 11:02:54', '2023-03-07 02:52:54', '2023-03-07 02:52:54');
INSERT INTO `verifycode` VALUES ('a0f6a662-d878-42b1-8889-1c7c65c5a390', 0x646174613A696D6167652F7376672B786D6C3B6261736536342C50484E325A79423462577875637A30696148523063446F764C336433647935334D793576636D63764D6A41774D43397A646D6369494864705A48526F505349784D4441694947686C6157646F644430694E44416949485A705A58644362336739496A41734D4377784D4441734E444169506A78795A574E30494864705A48526F505349784D44416C4969426F5A576C6E61485139496A45774D43556949475A706247773949694E6C4E4759345A6D55694C7A3438634746306143426D615778735053496A4E6A597A5A57526D4969426B50534A4E4E7A59754E444D674D6A49754F44564D4E7A59754E4455674D6A49754F44644D4E7A59754E5441674D6A49754F5446524E7A55754D6A49674D6A49754F5441674E7A51754D7A6B674D6A4D754F44464D4E7A51754D6A63674D6A4D754E6A684D4E7A51754D6A4D674D6A4D754E6A56524E7A4D754E4463674D6A51754E6A45674E7A4D754D7A63674D6A55754F54464D4E7A4D754D7A59674D6A55754F54424D4E7A4D754E4441674D6A55754F5452524E7A4D754D6A55674D6A63754D7A63674E7A51754D4467674D6A67754D44564D4E7A51754D5455674D6A67754D544E4D4E7A51754D4455674D6A67754D444A524E7A55754D4449674D6A67754F4455674E7A59754E4459674D6A67754F44424D4E7A59754E4441674D6A67754E7A4E4D4E7A59754D7A51674D6A67754E6A68524E7A63754F446B674D6A67754E5451674E7A67754E544D674D6A63754F54424D4E7A67754E6A6B674D6A67754D44564D4E7A67754E5459674D6A63754F544E524E7A6B754D7A67674D6A63754D4463674E7A6B754D7A45674D6A55754F444E4D4E7A6B754D6A55674D6A55754E7A644D4E7A6B754D6A59674D6A55754E7A68524E7A6B754D6A45674D6A51754E5455674E7A67754E4467674D6A4D754E7A4E4D4E7A67754E4451674D6A4D754E7A424D4E7A67754D7A45674D6A4D754E5464524E7A63754E7A55674D6A49754F5449674E7A59754E5445674D6A49754F544A61545463324C6A5133494445324C6A5578544463324C6A517A494445324C6A5133544463324C6A4D30494445324C6A4D34555463314C6A4D33494445324C6A4935494463304C6A5133494445324C6A5979544463304C6A5979494445324C6A6333544463304C6A5530494445324C6A59355554637A4C6A5535494445334C6A45324944637A4C6A6330494445344C6A517A5444637A4C6A6732494445344C6A55305444637A4C6A637A494445344C6A5179555463304C6A4530494449784C6A4179494463324C6A5179494449784C6A4179544463324C6A5177494449784C6A4178544463324C6A4D34494449774C6A6B35555463334C6A5135494449784C6A4533494463344C6A4532494449774C6A5177544463344C6A4577494449774C6A4D7A544463344C6A4533494449774C6A5177555463344C6A6335494445354C6A5534494463344C6A6779494445344C6A5579544463344C6A6777494445344C6A5577544463344C6A6731494445344C6A5531555463344C6A6730494445334C6A4D77494463344C6A4D30494445324C6A6734544463344C6A4D32494445324C6A6735544463344C6A5134494445334C6A4179555463334C6A4977494445324C6A4D78494463324C6A4D7A494445324C6A4D32576B30334E6934784E53417A4D43347A4D6B77334E6934794F43417A4D4334304E5577334E4334794E43417A4D4334304E3077334E4334774E69417A4D43347A4D4645334D7934774E43417A4D43347A4D5341334D6934784E4341794F5334334D6B77334D6934794E4341794F5334344D6B77334D6934784F4341794F5334334E6C45334D5334794D5341794F4334354E4341334D53347A4D5341794E7934774D4577334D5334304F4341794E7934784E3077334D5334304E6941794E7934784E5645334D5334334E4341794D6934304E7941334E4334794D4341794D5334344D4577334E4334784D6941794D5334334D3077334E4334784D4341794D5334334D5645334D6934324E5341794D5334784F5341334D5334334E5341784E7934314E4577334D5334344D4341784E7934314F5577334D5334334F5341784E7934314F5645334D5334304D5341784E6934304F4341334D5334304E6941784E5334354E4577334D5334314F4341784E6934774E6B77334D5334304E5341784E5334354D3145334D5334324E6941784E4334304F5341334E4334784E7941784E4334304E6B77334E4334784D7941784E4334304D3077334E43347A4D5341784E4334324D5645334E7934784D7941784E4334314D5341334F4334784D6941784E4334324E4577334F4334784E4341784E4334324E3077334F4334784E4341784E4334324E3145344D4334334F4341784E5334774E5341344D5334774F5341784E6934304D6B77344D5334774E7941784E6934304D5577344D5334774D7941784E69347A4E3145344D5334774E5341784E6934334D7941344D5334774E5341784E6934354F4577344D5334784D5341784E7934774E4577344D5334774E7941784E7934774D4645344D5334774E4341784E7934304E4341344D4334354D5341784E7934344E5577344D4334344F4341784E7934344D6B77344D4334354E6941784E7934354D4645344D4334314E6941794D4334334F4341334F4334314E7941794D5334344D5577334F4334314D6941794D5334334E6B77334F4334314E4341794D5334334F5645344D4334354E5341794D69347A4E6941344D5334794F5341794E5334354E5577344D53347A4E5341794E6934774D5577344D5334794E4341794E5334354D4645344D53347A4E5341794E6934784D5341344D53347A4E7941794E6934354F5577344D5334794D5341794E6934344D3077344D53347A4E4341794E6934354E5645344D5334304D7941794F4334344E5341344D43347A4E4341794F5334314F4577344D4334794D7941794F5334304E6B77344D4334794D4341794F5334304D3145334F5334794F53417A4D4334774E5341334E6934784F53417A4D43347A4E6C704E4E7A63754F4445674D7A49754D44424D4E7A63754F4445674D7A49754D44424D4F4441754D5441674D7A49754D44644D4F4441754D4449674D7A45754F546C524F4445754D5459674D7A49754D4449674F4449754D546B674D7A45754E544E4D4F4449754D7A49674D7A45754E6A564D4F4449754D7A49674D7A45754E6A5A524F4449754F5459674D7A45754D444D674F444D754D4449674D6A6B754E7A644D4F4449754F5463674D6A6B754E7A4A4D4F444D754D544D674D6A6B754F4468524F444D754D444D674D6A6B754D4445674F4449754E7A63674D6A63754E6A6C4D4F4449754F5449674D6A63754F44524D4F4449754E7A51674D6A63754E6A5A524F4449754D6A51674D6A51754E6A4D674F4441754F4449674D6A4D754D7A5A4D4F4441754E7A67674D6A4D754D7A4A4D4F4441754E7A59674D6A4D754D54644D4F4441754E544D674D6A49754F446C4D4F4441754E4463674D6A49754E7A5A4D4F4441754D7A59674D6A49754E6A52524F4445754E544D674D6A45754E7A63674F4449754D5455674D5467754F54564D4F4449754D6A41674D546B754D44464D4F4449754D446B674D5467754F5442524F4449754D6A49674D5467754E7A63674F4449754D6A63674D5467754D6A424D4F4449754D5459674D5467754D446C4D4F4449754D6A45674D5467754D5452524F4449754D6A41674D5463754E6A45674F4449754D5455674D5463754D6A424D4F4449754D544D674D5463754D54684D4F4449754D6A41674D5463754D6A56524F4449754D5445674D5459754D6A67674F4445754D7A45674D5455754F54564D4F4445754D7A51674D5455754F54684D4F4445754E4449674D5459754D444E4D4F4445754D5459674D5455754F444E4D4F4445754D6A55674D5455754F544A524F4445754D4445674D5455754D7A59674F4441754D6A45674D5451754F444A4D4F4441754D5459674D5451754E7A644D4F4441754D7A51674D5451754F544E4D4F4441754D5459674D5451754E7A56524E7A67754F4467674D5451754D7A51674E7A59754D5449674D5451754D6A4A4D4E7A59754D6A51674D5451754D7A524D4E7A59754D446B674D5451754D546C524E7A55754D4449674D5451754D5441674E7A51754D446B674D5451754D54684D4E7A51754D446B674D5451754D54684D4E7A51754D5451674D5451754D6A4E524E7A4D754E6A51674D5451754D6A6B674E7A49754E7A59674D5451754E44424D4E7A49754E6A55674D5451754D6A6C4D4E7A49754E7A6B674D5451754E444E524E7A45754E4449674D5451754E6A51674E7A45754D6A63674D5455754E7A564D4E7A45754D7A41674D5455754E7A684D4E7A45754D7A45674D5455754E7A6C524E7A45754D5459674D5459754D4441674E7A45754D5467674D5459754E54524D4E7A45754D6A4D674D5459754E546C4D4E7A45754D7A51674D5459754E6A6C524E7A45754D6A63674D5459754F5445674E7A45754E6A59674D5467754E54464D4E7A45754E6A59674D5467754E54464D4E7A45754E6A6B674D5467754E5456524E7A49754D6A59674D6A41754E7A63674E7A4D754E4455674D6A45754E6A644D4E7A4D754E4463674D6A45754E7A424D4E7A4D754E5463674D6A45754E7A6C4D4E7A4D754E444D674D6A45754E6A56524E7A45754E6A49674D6A49754E6A45674E7A45754D6A59674D6A59754D544E4D4E7A45754D6A67674D6A59754D54564D4E7A45754D7A51674D6A59754D6A46524E7A45754D4451674D6A63754E544D674E7A45754D4451674D6A67754D54564D4E7A45754D5441674D6A67754D6A4A4D4E7A45754D5463674D6A67754D6A68524E7A45754D5441674D6A6B754D7A63674E7A45754F5441674D6A6B754F546C4D4E7A45754F5451674D7A41754D444E4D4E7A45754F546B674D7A41754D4468524E7A45754F5467674D7A41754D4455674E7A49754D5463674D7A41754D54684D4E7A49754D6A4D674D7A41754D6A564D4E7A49754D6A55674D7A41754D6A64524E7A49754F5451674D7A45754F4445674E7A63754E7A63674D7A45754F545A61545463334C6A5133494449304C6A4D34544463334C6A5577494449304C6A5178544463334C6A5532494449304C6A5133555463344C6A4533494449304C6A5177494463344C6A6332494449304C6A6378544463344C6A5933494449304C6A5979544463344C6A5931494449304C6A5977555463354C6A4179494449314C6A4D34494463344C6A6B35494449314C6A6331544463344C6A6B34494449314C6A6330544463344C6A6B30494449314C6A6377555463354C6A4130494449314C6A6B34494463354C6A4130494449324C6A4534544463344C6A6B32494449324C6A4578544463354C6A4131494449324C6A4535555463344C6A6B30494449334C6A5935494463334C6A4D35494449344C6A4932544463334C6A4D33494449344C6A497A544463334C6A5132494449344C6A4D79555463324C6A6735494449344C6A5577494463324C6A4D31494449344C6A5179544463324C6A5178494449344C6A5134544463324C6A4D79494449344C6A4D35555463314C6A5933494449344C6A5533494463304C6A6735494449344C6A4932544463304C6A6735494449344C6A4931544463304C6A6332494449344C6A457A555463304C6A5932494449334C6A6333494463304C6A6378494449334C6A4577544463304C6A6379494449334C6A4577544463304C6A597A494449334C6A4179555463304C6A6334494449314C6A6B34494463314C6A5977494449314C6A4531544463314C6A5535494449314C6A4531544463314C6A5930494449314C6A4535555463324C6A517A494449304C6A4D31494463334C6A5579494449304C6A517A576B30334E7934324D7941784E7934354E6B77334E7934334D6941784F4334774E4577334E7934334D6941784F4334774E5645334F4334794D5341784E7934354D5341334F4334314E7941784F4334774D5577334F4334314D5341784E7934354E5577334F4334324E7941784F4334324E6B77334F4334314D7941784F4334314D6C45334F4334324F5341784F5334324D7941334F4334774E7941794D43347A4D6B77334E7934354E6941794D4334794D4577334F4334774E7941794D43347A4D5645334E79347A4E6941794D4334354D5341334E6934304D7941794D4334334F4577334E69347A4D7941794D4334324F4577334E6934304E5341794D4334344D4645334E5334334E6941794D4334334F4341334E5334304F4341794D4334324D3077334E5334304E6941794D4334324D5577334E5334314D7941794D4334324F5645334E53347A4F4341794D43347A4E7941334E53347A4D4341784F5334354D5577334E5334794F4341784F5334344F5577334E53347A4F5341794D4334774D4645334E5334794E5341784F5334774F5341334E6934774F4341784F4334314D6B77334E5334354E6941784F4334304D4577334E6934774F5341784F4334314D3145334E6934334D5341784E7934354E6941334E7934324E7941784E7934354F566F694C7A3438634746306143426D615778735053496A4E6A5A6B5A6D4D784969426B50534A4E4D7A51754F544D674D7A41754D7A564D4D7A51754F5441674D7A41754D7A4A4D4D7A55754D4459674D7A41754E4468524D7A51754D4445674D7A41754E4451674D7A49754F5459674D7A41754D545A4D4D7A49754F4463674D7A41754D44684D4D7A49754F5445674D7A41754D5446524D7A49754D4467674D6A6B754E446B674D7A45754F5467674D6A67754D7A684D4D7A49754D5441674D6A67754E54424D4D7A45754F5459674D6A67754D7A64524D7A45754F544D674D6A67754D6A4D674D7A49754D4459674D6A59754E44564D4D7A49754D5451674D6A59754E544E4D4D7A49754D4459674D6A59754E4456524D7A49754F4455674D6A59754E4445674D7A51754D6A49674D6A59754D54564D4D7A51754D5459674D6A59754D54424D4D7A51754D5455674D6A59754E7A4E4D4D7A51754D5463674D6A59754E7A56524D7A4D754F4467674D6A63754F444D674D7A51754F444D674D6A67754D6A464D4D7A51754F5445674D6A67754D6A6C4D4D7A51754F4441674D6A67754D5468524D7A55754E4459674D6A67754E544D674D7A59754F4467674D6A67754E544E4D4D7A59754F4451674D6A67754E446C4D4D7A59754F4445674D6A67754E445A524D7A63754F4467674D6A67754D7A51674D7A67754D4445674D6A67754D6A6C4D4D7A67754D4467674D6A67754D7A5A4D4D7A63754F5463674D6A67754D6A56524D7A67754E7A51674D6A67754D7A41674D7A6B754D6A4D674D6A63754F545A4D4D7A6B754D4467674D6A63754F44464D4D7A6B754D446B674D6A63754F444A524E4441754D544D674D6A63754D6A55674E4441754D4441674D6A55754F444E4D4E4441754D4449674D6A55754F44564D4D7A6B754F5467674D6A55754F444A524D7A6B754F446B674D6A51754D6A41674D7A67754E7A45674D6A4D754D54524D4D7A67754E7A59674D6A4D754D546C4D4D7A67754E7A55674D6A4D754D5468524D7A63754E4467674D6A49754D444D674D7A55754F4445674D6A49754D444E4D4D7A55754F4463674D6A49754D54424D4D7A55754F5441674D6A45754F54644D4D7A55754F4451674D6A45754F5446524D7A59754D5463674D6A45754F5459674D7A59754E7A59674D6A45754F54424D4D7A59754E5463674D6A45754E7A464D4D7A59754E7A41674D6A45754F4452524D7A63754F5467674D6A45754E7A55674D7A67754F5445674D6A41754F54464D4D7A67754F4445674D6A41754F44464D4D7A67754F4449674D6A41754F444A524D7A6B754F4459674D6A41754D446B674D7A6B754F5459674D5467754F444E4D4D7A6B754F446B674D5467754E7A564D4D7A6B754F4451674D5467754E7A46524D7A6B754F544D674D5467754E5445674D7A6B754F544D674D5467754D6A684D4D7A6B754F544D674D5467754D6A684D4D7A6B754F4467674D5467754D6A4E524D7A6B754F5463674D5463754D6A67674D7A6B754D4451674D5459754E6A5A4D4D7A67754F5459674D5459754E546C4D4D7A6B754D4463674D5459754E6A6C524D7A67754D6A41674D5459754D5445674D7A63754D5445674D5459754D54684D4D7A63754D5459674D5459754D6A4E4D4D7A63754D4467674D5459754D5452524D7A59754D7A4D674D5459754D5463674D7A55754E5441674D5459754E445A4D4D7A55754E4459674D5459754E44464D4D7A55754E4449674D5459754D7A64524D7A51754D7A67674D5459754E6A63674D7A51754D5463674D5463754E44564D4D7A51754D5467674D5463754E445A4D4D7A51754D6A6B674D5463754E5464524D7A51754D5467674D5467754D5441674D7A51754D6A4D674D5467754E6A4A4D4D7A51754D544D674D5467754E544A4D4D7A51754D546B674D5467754E5468524D7A4D754E544D674D5467754E4459674D7A49754D544D674D5463754F54644D4D7A49754D5449674D5463754F545A4D4D7A49754D5445674D5463754F5456524D7A49754D4441674D5459754F4455674D7A49754D4449674D5459754D6A6C4D4D7A45754F5449674D5459754D54684D4D7A45754F544D674D5459754D546C524D7A45754F5451674D5455754D446B674D7A49754E6A63674D5451754E6A4E4D4D7A49754E6A51674D5451754E6A424D4D7A49754F4449674D5451754E7A68524D7A4D754E6A59674D5451754D6A55674D7A51754E7A51674D5451754D6A564D4D7A51754E7A51674D5451754D6A564D4D7A51754E6A6B674D5451754D6A42524D7A59754F5463674D5451754D7A41674D7A6B754D5445674D5451754E44684D4D7A6B754D4455674D5451754E444E4D4D7A6B754D4441674D5451754D7A64524E4449754E4459674D5451754E6A6B674E4449754D6A59674D5463754D6A524D4E4449754D6A59674D5463754D6A564D4E4449754D7A45674D5463754D7A42524E4449754D6A67674D5467754D7A4D674E4445754F5455674D546B754D7A6C4D4E4445754F4463674D546B754D7A464D4E4445754F5445674D546B754D7A56524E4445754D7A55674D6A45754E5445674D7A6B754E7A55674D6A49754D544E4D4D7A6B754E546B674D6A45754F54644D4D7A6B754E7A45674D6A49754D4468524E4445754E4463674D6A49754E4449674E4445754F4467674D6A51754E6A6C4D4E4445754F544D674D6A51754E7A564D4E4445754F5449674D6A51754E7A52524E4449754D544D674D6A55754E5459674E4449754D5467674D6A59754F544E4D4E4449754D5449674D6A59754F44644D4E4449754D4459674D6A59754F4446524E4449754D6A4D674D6A6B754F5441674D7A6B754D5441674D7A41754D6A464D4D7A6B754D4445674D7A41754D544A4D4D7A6B754D5441674D7A41754D6A42524D7A67754E6A63674D7A41754D7A49674D7A55754D4467674D7A41754E54426154544D344C6A597849444D794C6A417854444D344C6A553549444D794C6A417754444D344C6A557849444D784C6A6B7855544D344C6A673449444D784C6A6B77494451774C6A677949444D784C6A6B31544451774C6A6B3049444D794C6A4133544451774C6A677949444D784C6A6B32555451784C6A6B3349444D784C6A6B334944517A4C6A413449444D784C6A557A5444517A4C6A453249444D784C6A59775444517A4C6A457749444D784C6A55305554517A4C6A6B3149444D774C6A6B314944517A4C6A6779494449354C6A63335444517A4C6A6335494449354C6A637A5444517A4C6A6779494449354C6A63325554517A4C6A6379494449344C6A677A4944517A4C6A5578494449334C6A59315444517A4C6A5579494449334C6A59325444517A4C6A5531494449334C6A59345554517A4C6A4133494449304C6A5931494451784C6A63314944497A4C6A557A544451784C6A59354944497A4C6A5133544451784C6A55334944497A4C6A4979544451784C6A55314944497A4C6A4533544451784C6A59344944497A4C6A4D78555451794C6A6332494449794C6A49794944517A4C6A4934494445354C6A49315444517A4C6A4D32494445354C6A4D7A5444517A4C6A497A494445354C6A49775554517A4C6A5179494445354C6A41324944517A4C6A5577494445344C6A51785444517A4C6A4D30494445344C6A49325444517A4C6A5177494445344C6A4D785554517A4C6A5134494445334C6A67794944517A4C6A517A494445334C6A4D325444517A4C6A5178494445334C6A4D305444517A4C6A4D32494445334C6A49355554517A4C6A4934494445324C6A4534494451794C6A5177494445314C6A6378544451794C6A5130494445314C6A6331544451794C6A5130494445314C6A6777544451794C6A5133494445314C6A677A555451794C6A497A494445314C6A457A494451784C6A5132494445304C6A6333544451784C6A4D34494445304C6A5935544451784C6A4D32494445304C6A5933555451774C6A4934494445304C6A453149444D324C6A63354944457A4C6A6B3154444D324C6A67794944457A4C6A6B3454444D324C6A67774944457A4C6A6B3255544D314C6A63314944457A4C6A6B3549444D304C6A59324944457A4C6A6B3554444D304C6A6377494445304C6A417A54444D304C6A59314944457A4C6A6B3455544D7A4C6A51334944457A4C6A673549444D794C6A5130494445304C6A4D7A54444D794C6A5131494445304C6A4D3054444D794C6A557A494445304C6A517955544D784C6A6332494445304C6A6B3549444D784C6A6332494445324C6A453454444D784C6A5933494445324C6A413554444D784C6A6330494445324C6A453255544D784C6A5935494445314C6A677949444D784C6A6733494445344C6A413554444D784C6A6B30494445344C6A453254444D784C6A6B79494445344C6A453155544D794C6A4178494445344C6A413449444D7A4C6A4579494445344C6A513554444D7A4C6A4532494445344C6A557A54444D7A4C6A4535494445344C6A553255544D7A4C6A4979494445344C6A6B3149444D7A4C6A4535494445354C6A493554444D7A4C6A4579494445354C6A497954444D7A4C6A457A494445354C6A497955544D7A4C6A4135494445354C6A557949444D7A4C6A4578494445354C6A673454444D7A4C6A4530494445354C6A6B7854444D7A4C6A497A494445354C6A6B3555544D304C6A4D35494449774C6A497749444D314C6A6332494449774C6A493454444D314C6A6378494449774C6A497A54444D314C6A6735494449774C6A517855544D314C6A6377494445344C6A6B7749444D324C6A5130494445344C6A4D7A54444D324C6A5530494445344C6A517A54444D324C6A5179494445344C6A4D7755544D334C6A4134494445334C6A6B3249444D344C6A5131494445334C6A677754444D344C6A4D33494445334C6A637A54444D344C6A5178494445334C6A633255544D354C6A4531494445334C6A637949444D354C6A557A494445334C6A673154444D354C6A5977494445334C6A6B7954444D354C6A5579494445334C6A673055544D354C6A5930494445344C6A417849444D354C6A5933494445344C6A413554444D354C6A5932494445344C6A413454444D354C6A5932494445344C6A497854444D354C6A6333494445344C6A597A54444D354C6A5933494445344C6A557A55544D354C6A6332494445344C6A633249444D354C6A6330494445344C6A673254444D354C6A6331494445344C6A673354444D354C6A6379494445344C6A673055544D354C6A5534494445354C6A6B7849444D344C6A5530494449774C6A637854444D344C6A5531494449774C6A637954444D344C6A5977494449774C6A633355544D334C6A6B77494449784C6A4D7849444D324C6A5530494449784C6A513054444D324C6A5931494449784C6A553154444D324C6A5932494449784C6A553355544D324C6A4531494449784C6A593149444D314C6A5531494449784C6A593154444D314C6A5535494449784C6A593454444D314C6A5579494449784C6A597955544D314C6A5533494449784C6A673349444D314C6A5933494449794C6A4D3054444D314C6A6379494449794C6A4D3554444D314C6A5532494449794C6A497A55544D324C6A677A494449794C6A4D7849444D334C6A6778494449794C6A677754444D334C6A677A494449794C6A677954444D334C6A6730494449794C6A6B7754444D324C6A63334944497A4C6A417954444D324C6A5979494449794C6A673355544D324C6A597A4944497A4C6A413549444D324C6A63784944497A4C6A557754444D324C6A63784944497A4C6A557754444D324C6A63784944497A4C6A557855544D344C6A49324944497A4C6A553149444D354C6A5179494449304C6A513254444D354C6A4D30494449304C6A4D3354444D354C6A4D32494449304C6A4D3555544D354C6A557A494449304C6A593349444D354C6A6330494449314C6A633454444D354C6A6378494449314C6A633254444D354C6A6779494449314C6A673355544D354C6A6779494449334C6A637949444D334C6A677A494449344C6A417854444D334C6A6734494449344C6A413254444D334C6A6B79494449344C6A457755544D324C6A5130494449344C6A497949444D324C6A4131494449344C6A453554444D324C6A4132494449344C6A497754444D324C6A4131494449344C6A453555544D314C6A637A494449344C6A457749444D314C6A4D33494449344C6A413154444D314C6A5133494449344C6A453254444D314C6A4D30494449334C6A637954444D314C6A5530494449334C6A557954444D314C6A5978494449334C6A4D7954444D314C6A5532494449334C6A417A54444D314C6A5530494449334C6A417855544D304C6A6B31494449334C6A457949444D304C6A5178494449334C6A493154444D304C6A5132494449334C6A4D7754444D304C6A5179494449334C6A493255544D304C6A4D7A494449334C6A413049444D304C6A4D7A494449324C6A6B7854444D304C6A4D35494449324C6A6B3354444D304C6A4D32494449324C6A6B3055544D304C6A4934494449324C6A637849444D304C6A4934494449324C6A553154444D304C6A4D33494449324C6A593054444D304C6A4D79494449324C6A553555544D304C6A4D77494449324C6A493249444D304C6A5177494449314C6A633354444D304C6A5535494449314C6A6B3254444D304C6A5535494449314C6A6B3155544D7A4C6A4530494449314C6A6B7A49444D784C6A6734494449324C6A453254444D784C6A6735494449324C6A453354444D784C6A6735494449324C6A453455544D784C6A6B32494449324C6A553449444D784C6A6735494449334C6A4D3154444D784C6A6778494449334C6A493354444D784C6A6B33494449334C6A517A55544D784C6A6332494449344C6A413249444D784C6A6332494449344C6A513354444D784C6A6735494449344C6A597754444D784C6A6334494449344C6A513555544D784C6A6B7A494449354C6A6B3449444D794C6A673249444D774C6A557754444D794C6A633549444D774C6A517A54444D794C6A677A49444D774C6A513355544D7A4C6A673349444D794C6A413149444D334C6A413349444D784C6A6B7954444D334C6A417A49444D784C6A673554444D334C6A413249444D784C6A6B7855544D334C6A513249444D784C6A677749444D344C6A557749444D784C6A6B7757694976506A78775958526F49475A706247773949694E6B4F5459794F57556949475139496B30784E7934774F4341794D6934334D4577784E7934774D5341794D6934324D3077784E7934784D4341794D6934334D6C45784E5334794E7941794D6934324D5341784E4334314E7941794D7934304D6B77784E4334324E5341794D7934314D4577784E4334314E4341794D79347A4F5645784D7934354D4341794E4334794E5341784D7934354D4341794E6934774D3077784E4334774D5341794E6934784E4577784D7934354E4341794E6934774E3145784D7934354D4341794F5334304F5341784E7934774D7941794F53347A4E6B77784E6934354E7941794F53347A4D5577784E7934774D5341794F53347A4E4645784F43347A4E7941794F5334304D5341784F5334794F5341794F43347A4E5577784F53347A4E6941794F4334304D6B77784F5334304E6941794F4334314D3145794D43347A4D6941794E7934304D5341794D4334784E7941794E6934774D6B77794D4334774F5341794E5334354E4577794D4334784D5341794E5334354E6C45794D4334774F5341794E4334794D5341784F5334314D4341794D7934314D5577784F5334314F4341794D7934324D4577784F5334304E5341794D7934304E3145784F4334304F4341794D6934324D4341784E6934354F4341794D6934324D46704E4D6A41754E4451674D6A6B754D6A6C4D4D6A41754E5451674D6A6B754D7A6C4D4D6A41754E4467674D6A6B754D7A4A524D546B754E5459674D7A41754F4467674D5459754D7A67674D7A41754F44684D4D5459754E5459674D7A45754D44644D4D5455754E4463674D7A41754F545A4D4D5455754E5455674D7A45754D4452524D544D754F5455674D7A45754D4451674D544D754D6A45674D7A41754D6A644D4D544D754D4467674D7A41754D54564D4D544D754D6A45674D7A41754D6A64524D5449754E5445674D6A6B754E5463674D5449754D7A4D674D6A63754F54564D4D5449754D7A55674D6A63754F54644D4D5449754D5463674D6A63754E7A6C524D5449754D6A55674D6A59754F5459674D5449754D6A41674D6A55754E7A564D4D5449754D6A41674D6A55754E7A564D4D5449754D5467674D6A55754E7A4E524D5449754D5463674D6A55754D4467674D5449754D4463674D6A4D754E7A5A4D4D5445754F5451674D6A4D754E6A4E4D4D5445754F5451674D6A4D754E6A4A524D5445754F4467674D6A41754E7A49674D5455754D7A6B674D6A41754E7A4A4D4D5455754D7A59674D6A41754E7A424D4D5459754E444D674D6A41754E7A464D4D5459754E5451674D6A41754F444A524D5467754E5449674D6A41754F4451674D546B754F5455674D6A45754E7A464D4D546B754F4449674D6A45754E546C4D4D546B754F4463674D6A45754E6A52524D6A41754E444D674D6A45754F546B674D6A41754E7A63674D6A49754E445A4D4D6A41754E7A67674D6A49754E44644D4D6A41754E6A63674D6A49754D7A5A524D6A41754F546B674D6A45754F5459674D6A45754D7A55674D6A41754F44564D4D6A45754D6A4D674D6A41754E7A4E4D4D6A45754D6A49674D6A41754E7A46524D6A49754D4445674D6A41754E5455674D6A4D754E546B674D6A41754D54524D4D6A4D754E6A4D674D6A41754D54684D4D6A4D754E7A67674D6A41754D7A4E524D6A45754F5451674D6A4D754D5449674D6A45754F5451674D6A59754E6A684D4D6A45754F5467674D6A59754E7A4A4D4D6A45754F5445674D6A59754E6A56524D6A45754F444D674D6A6B754D5441674D6A49754E7A59674D7A45754D6A424D4D6A49754E7A6B674D7A45754D6A4A4D4D6A49754F4449674D7A45754D6A56524D6A49754D4467674D7A45754D4467674D6A41754E7A6B674D7A41754F544E4D4D6A41754E7A55674D7A41754F446C4D4D6A41754F4463674D7A45754D4446524D6A41754E5467674D7A41754D6A67674D6A41754D7A63674D6A6B754D6A4A61545449794C6A637749444D794C6A6730544449794C6A633149444D794C6A6735544449304C6A493149444D7A4C6A4934544449304C6A453449444D7A4C6A4978555449304C6A6B3149444D7A4C6A4D32494449314C6A597949444D7A4C6A5933544449314C6A633449444D7A4C6A677A544449314C6A597A49444D7A4C6A59345554497A4C6A4D7749444D774C6A67344944497A4C6A4D77494449324C6A63315444497A4C6A4D77494449324C6A63315444497A4C6A4532494449324C6A59785554497A4C6A49354944497A4C6A5933494449304C6A6330494449784C6A4134544449304C6A637A494449784C6A4133544449304C6A6377494449784C6A4130555449304C6A4930494449784C6A45344944497A4C6A4D30494449784C6A51305444497A4C6A4D7A494449784C6A517A5444497A4C6A4D79494449784C6A51795554497A4C6A5978494449774C6A6B32494449304C6A4977494445354C6A6B7A544449304C6A4135494445354C6A6778544449304C6A4534494445354C6A6B775554497A4C6A6777494449774C6A4130494449784C6A4135494449774C6A5978544449774C6A6B35494449774C6A5578544449774C6A6379494449784C6A6733544449774C6A5978494449784C6A6332555445354C6A5577494449774C6A5933494445324C6A5577494449774C6A5579544445324C6A5579494449774C6A5530544445324C6A5132494449774C6A5133555445314C6A6379494449774C6A5579494445304C6A4977494449774C6A5979544445304C6A4532494449774C6A5534544445304C6A4978494449774C6A597A555445784C6A6332494449774C6A6B79494445784C6A67304944497A4C6A5932544445784C6A59334944497A4C6A5135544445784C6A63334944497A4C6A5534555445784C6A6331494449314C6A6330494445794C6A4530494449344C6A6332544445794C6A4930494449344C6A6732544445794C6A4D77494449354C6A4978544445794C6A4D78494449354C6A4979555445794C6A4D33494449354C6A6333494445794C6A6B7849444D774C6A5579544445794C6A6B7A49444D774C6A5530544445794C6A6B7849444D774C6A5579555445794C6A6B7A49444D774C6A55304944457A4C6A413249444D774C6A59785444457A4C6A453049444D774C6A59355444457A4C6A457849444D774C6A59325554457A4C6A4D7A49444D784C6A41304944457A4C6A553549444D784C6A51795444457A4C6A557849444D784C6A4D305444457A4C6A557749444D784C6A4D30555445304C6A4D3549444D794C6A4D78494445324C6A593549444D794C6A517A544445324C6A633049444D794C6A5135544445324C6A633349444D794C6A5578555445334C6A677749444D794C6A5578494445334C6A6B7749444D794C6A5578544445344C6A417949444D794C6A597A544445354C6A417A49444D794C6A5534544445354C6A413049444D794C6A5535555449784C6A493449444D794C6A5932494449794C6A457749444D784C6A5977544449784C6A6B3349444D784C6A5133544449794C6A457A49444D784C6A5979555449794C6A4D7849444D784C6A6B35494449794C6A637A49444D794C6A6732576B30784F43347A4D4341794E4334794D6B77784F43347A4D7941794E4334794E5577784F4334794D4341794E4334784D3145784F5334784E6941794E4334784F4341784F5334334D6941794E4334304F5577784F5334334F5341794E4334314E6B77784F5334334E7941794E4334314D3145784F5334354D6941794E5334774D6941784F5334354D6941794E6934774D4577784F5334354D7941794E6934774D6B77784F5334354E5341794E6934774D3145794D4334774F4341794E79347A4D6941784F5334794D5341794F4334794F5577784F5334784E5341794F4334794D3077784F5334784D7941794F4334794D5645784F4334794E6941794F5334784F4341784E6934354E7941794F5334774E5577784E7934774F5341794F5334784E6B77784E7934774D7941794F5334784D4645784E6934774D4341794F5334774E6941784E53347A4D4341794F4334334E3077784E53347A4F4341794F4334344E5577784E53347A4E6941794F4334344D3145784E5334794D4341794F4334794D7941784E5334794D4341794E7934304D5577784E5334794F5341794E7934304F5577784E5334794F4341794E7934304F4645784E53347A4F4341794E5334784D5341784E7934784E6941794E4334304E6B77784E7934784D5341794E4334304D5577784E7934774E6941794E43347A4E6C45784E7934324D7941794E4334784D4341784F4334784E7941794E4334784D466F694C7A3438634746306143426B50534A4E4D544D674D6A4567517A5532494467734D7A51674D7A41734F4463674D546B6949484E30636D39725A543069493255355A546B33596949675A6D6C7362443069626D39755A534976506A78775958526F49475139496B30784E5341784E6942444D7A67674D6A51734E4445674D7977344D4341354969427A64484A766132553949694D304E6D49325A47496949475A7062477739496D3576626D55694C7A3438634746306143426B50534A4E4D5459674D7A4D67517A513549444D324C4451324944497A4C446B3249444D354969427A64484A766132553949694D34593251305A574D6949475A7062477739496D3576626D55694C7A3438634746306143426D615778735053496A4E54426B597A637A4969426B50534A4E4E5467754D7A45674D5459754E6A644D4E5467754D7A45674D5459754E6A5A4D4E5467754D7A49674D5459754E6A68524E5455754E444D674D5459754E7A41674E5449754F5449674D5459754D444E4D4E5449754F5463674D5459754D446C4D4E5449754F4449674D5455754F544E524E544D754F4467674D546B754D4459674E5451754D4445674D6A49754D7A524D4E5451754D4467674D6A49754E44464D4E5451754D5451674D6A49754E4464524E5451754D5463674D6A55754E6A49674E544D754D7A51674D6A67754E7A564D4E544D754D7A67674D6A67754E7A6C4D4E544D754E4445674D6A67754F444A524E5455754D5467674D6A67754D6A63674E5463754E5459674D6A67754D545A4D4E5463754E7A49674D6A67754D7A4A4D4E5463754E6A45674D6A67754D6A4A524E6A41754D6A49674D6A67754D4451674E6A45754E4451674D6A59754D7A684D4E6A45754E4445674D6A59754D7A5A4D4E6A45754E446B674D6A59754E444E524E6A49754E546B674D6A55754D5441674E6A49754E7A49674D6A49754D7A464D4E6A49754E7A49674D6A49754D7A4A4D4E6A49754E6A63674D6A49754D6A64524E6A49754E7A4D674D6A45754D446B674E6A49754E4449674D546B754F544E4D4E6A49754D7A59674D546B754F445A4D4E6A49754E4459674D546B754F545A524E6A45754E5451674D5459754E6A6B674E5467754D7A4D674D5459754E6A6C61545455774C6A453349444D784C6A5530544455774C6A4D7949444D784C6A6377544455774C6A493049444D784C6A5978555455794C6A4934494449334C6A6730494455794C6A49344944497A4C6A4D77544455794C6A45344944497A4C6A4977544455794C6A49794944497A4C6A4930555455794C6A457A494445334C6A4D32494451354C6A4978494445794C6A5977544451354C6A4D78494445794C6A6377544451354C6A4931494445794C6A5930555455794C6A6B78494445304C6A5531494455344C6A5579494445304C6A5934544455344C6A5577494445304C6A5932544455344C6A4D34494445304C6A5530555459304C6A5131494445304C6A6379494459304C6A5934494445354C6A5534544459304C6A5933494445354C6A5533544459304C6A597A494445354C6A557A555459304C6A6333494449784C6A5179494459304C6A6330494449794C6A5177544459304C6A6730494449794C6A5577544459304C6A5935494449794C6A4D31555459304C6A6335494449314C6A5934494459304C6A4979494449334C6A4531544459304C6A4133494449334C6A4177544459304C6A4930494449334C6A45335554597A4C6A6335494449334C6A63324944597A4C6A4934494449344C6A4D7A5444597A4C6A4D7A494449344C6A4D345444597A4C6A4D34494449344C6A517A555459794C6A5179494449354C6A517A494459774C6A5930494449354C6A6333544459774C6A5532494449354C6A5935544459774C6A5979494449354C6A6331555455354C6A597A49444D774C6A4179494455334C6A553549444D774C6A4534544455334C6A597849444D774C6A4977544455334C6A513049444D774C6A417A5554557A4C6A493449444D774C6A4D30494455774C6A453249444D784C6A557A576B30324D6934304F43417A4D5334324D5577324D69347A4D79417A4D5334304E6B77324D6934304F43417A4D5334324D5645324E4334784F53417A4D5334794D7941324E53347A4D43417A4D4334794D6B77324E53347A4E53417A4D4334794E3077324E53347A4F43417A4D43347A4D4645324E6934794D6941794F5334784D7941324E6934794D4341794E7934794E3077324E6934784E6941794E7934794D3077324E6934774F4341794E7934784E5645324E6934794D5341794E69347A4E5341324E6934784D4341794D7934354E3077324E6934774E7941794D7934354D3077324E5334334F4341794D4334344D4577324E5334344F4341794D4334354D5645324E5334324E4341784F5334794E4341324E4334354F5341784E7934344D6B77324E5334774D6941784E7934344E5577324E5334774D4341784E7934344D3145324E4334324E7941784E7934794D6941324E4334794D5341784E6934334F4577324E43347A4D6941784E6934344F5577324E4334794E6941784E6934334D3077324E4334784F4341784E6934324E4645324D7934774E5341784E4334324E7941324D4334774E6941784E4334304D5577324D4334784F5341784E4334314E4577324D4334784D7941784E4334304F4645314F4334794E6941784E43347A4E4341314D7934314D4341784D7934344E5577314D7934304D5341784D7934334E6B77314D7934304E4341784D7934334F5645314D53347A4E5341784D7934324D5341304F4334344E5341784D6934794E4577304F4334334D5341784D6934784D5577304F4334344D6941784D6934794D5645314D6934774D5341784E7934784E4341314D6934774D5341794D7934774F4577314D6934774E4341794D7934784D4577314D6934784E5341794D7934794D6C45314D6934774E4341794E7934344E6941304F5334334E79417A4D6934774E5577304F5334344D53417A4D6934774F5577304F5334334D69417A4D6934774D4645314D4334794D79417A4D5334344E6941314D5334784D79417A4D5334314D3077314D5334784F43417A4D5334314E3077314D5334784E69417A4D5334314E5645314D4334354F53417A4D6934784F5341314D4334304D43417A4D7934794D4577314D43347A4E79417A4D7934784E3077314D43347A4D69417A4D7934784D5645314D69347A4E69417A4D69347A4E7941314E4334324D79417A4D6934774D3077314E4334324E69417A4D6934774E6B77314E4334324D43417A4D6934774D4645314E5334354E79417A4D5334334E4341314F4334304E53417A4D5334324E3077314F4334314E69417A4D5334334E3077314F4334304E69417A4D5334324F4645324D5334774F53417A4D5334314F5341324D69347A4D79417A4D5334304E6C704E4E6A49754E4449674D6A49754D6A644D4E6A49754E4459674D6A49754D7A4A4D4E6A49754E5451674D6A49754D7A6C524E6A49754D6A55674D6A63754E7A6B674E5463754E7A41674D6A67754D44564D4E5463754E6A45674D6A63754F54564D4E5463754E6A63674D6A67754D444A524E5459754D7A55674D6A67754D446B674E5451754F5459674D6A67754D6A644D4E5451754F5463674D6A67754D6A6C4D4E5451754F444D674D6A67754D5456524E5455754E4455674D6A55754E6A59674E5455754E4455674D6A4D754D54684D4E5455754E444D674D6A4D754D54644D4E5455754D7A51674D6A4D754D4468524E5455754E444D674D6A41754E6A59674E5451754F5451674D5467754D44564D4E5451754F4441674D5463754F54464D4E5451754F5455674D5467754D445A524E5459754E544D674D5467754D7A55674E546B754E7A41674D5467754D7A564D4E546B754E5467674D5467754D6A4A4D4E546B754E7A45674D5467754D7A56524E6A41754E6A51674D5467754D6A55674E6A45754E7A55674D5467754F54424D4E6A45754E7A59674D5467754F54424D4E6A45754E7A41674D5467754F4456524E6A49754E4467674D6A41754D7A41674E6A49754D7A67674D6A49754D6A52614969382B5043397A646D632B, 'a3D8', '2023-03-07 09:12:07', '2023-03-07 01:02:07', '2023-03-07 01:02:07');
INSERT INTO `verifycode` VALUES ('c7f93abf-c92a-434e-b549-c22bca2437ca', 0x646174613A696D6167652F7376672B786D6C3B6261736536342C50484E325A79423462577875637A30696148523063446F764C336433647935334D793576636D63764D6A41774D43397A646D6369494864705A48526F505349784D4441694947686C6157646F644430694E44416949485A705A58644362336739496A41734D4377784D4441734E444169506A78795A574E30494864705A48526F505349784D44416C4969426F5A576C6E61485139496A45774D43556949475A706247773949694E6C4E4759345A6D55694C7A3438634746306143426D615778735053496A5A574531596D56684969426B50534A4E4D5463754D4463674D6A45754E7A4A4D4D5463754D5445674D6A45754E7A5A4D4D5463754D4455674D6A45754E7A42524D5455754E5455674D6A45754E7A49674D5451754E6A67674D6A49754E7A524D4D5451754E7A63674D6A49754F444E4D4D5451754F4445674D6A49754F4464524D544D754F4455674D6A4D754F4441674D544D754E7A63674D6A55754D7A564D4D544D754F5445674D6A55754E44684D4D544D754F444D674D6A55754E4442524D544D754E7A55674D6A63754D6A45674D5451754D7A49674D6A63754F44564D4D5451754E4445674D6A63754F54524D4D5451754D7A67674D6A63754F5446524D5455754D446B674D6A67754E7A4D674D5459754E6A63674D6A67754E6A4E4D4D5459754E5467674D6A67754E54524D4D5459754E7A41674D6A67754E6A5A524D546B754E7A41674D6A67754D7A41674D546B754F5459674D6A59754D6A5A4D4D6A41754D5449674D6A59754E444A4D4D546B754F546B674D6A59754D7A42524D6A41754D4455674D6A55754E7A4D674D6A41754D4455674D6A55754D546C4D4D6A41754D5445674D6A55754D6A564D4D6A41754D546B674D6A55754D7A4E524D6A41754D4445674D6A4D754F4445674D546B754D6A51674D6A49754E7A644D4D546B754D6A6B674D6A49754F444E4D4D546B754D6A49674D6A49754E7A5A524D5467754E4449674D6A45754E7A49674D5463754D5441674D6A45754E7A5661545449774C6A4D79494449344C6A557A544449774C6A5177494449344C6A5979544449774C6A4D79494449344C6A5530555445354C6A4D3049444D774C6A4178494445324C6A4D3349444D774C6A4532544445324C6A517A49444D774C6A4979544445324C6A557949444D774C6A4D795554457A4C6A593549444D774C6A517A494445794C6A5534494449354C6A5934544445794C6A5534494449354C6A5934544445794C6A5535494449354C6A6377555445784C6A6B77494449354C6A417A494445784C6A6777494449334C6A6732544445784C6A637A494449334C6A6777544445784C6A5934494449334C6A6331555445784C6A5935494449334C6A4130494445784C6A6779494449314C6A6333544445784C6A6732494449314C6A6778544445784C6A6779494449314C6A6333555445794C6A4579494449794C6A6778494445794C6A6B30494449784C6A55335444457A4C6A4179494449784C6A59305444457A4C6A4133494449784C6A6377555445304C6A4978494449774C6A4131494445324C6A6779494449774C6A4133544445324C6A6777494449774C6A4131544445324C6A6333494449774C6A4179555445344C6A5131494449774C6A4179494449774C6A4177494449784C6A5977544445354C6A6B78494449784C6A5578544449774C6A4177494449784C6A5978555445354C6A6B34494445334C6A5531494449784C6A41334944457A4C6A4530544449784C6A41324944457A4C6A457A544449784C6A41354944457A4C6A4532555449794C6A4D35494445794C6A67344944497A4C6A5931494445794C6A4D785444497A4C6A6778494445794C6A51335444497A4C6A6377494445794C6A4D32555449794C6A417A494445324C6A6B30494449784C6A6731494449784C6A5935544449784C6A6335494449784C6A5930544449784C6A6379494449784C6A5533555449784C6A5533494449324C6A51344944497A4C6A417849444D774C6A6B30544449794C6A6B7849444D774C6A6730544449794C6A6B7949444D774C6A6731555449784C6A673349444D774C6A5577494449774C6A637849444D774C6A4930544449774C6A677749444D774C6A4D7A544449774C6A673049444D774C6A4D34555449774C6A5131494449354C6A4D78494449774C6A4D31494449344C6A5532576B30794D6934314E79417A4D6934304E4577794D6934304E79417A4D69347A4E4577794D6934304F53417A4D69347A4E6C45794D7934354E53417A4D6934334F5341794E5334324F43417A4D7934344D6B77794E5334324D53417A4D7934334E5577794E5334324D79417A4D7934334E3145794D7934784F4341794F5334774E4341794D7934774E7941794D7934304D5577794D7934774F5341794D7934304D3077794D7934774E4341794D79347A4E3145794D6934354D7941784E7934334F5341794E5334774D6941784D6934334F4577794E5334774D5341784D6934334E3077794E4334354D7941784D6934324F4645794E4334314D5341784D7934774E4341794D7934314D7941784D7934304F4577794D7934324D5341784D7934314E6B77794D7934324D5341784D7934314E6C45794D7934334D6941784D6934324E6941794E4334784D7941784D5334344E4577794E4334784D7941784D5334344D3077794E4334794E5341784D5334354E5645794D6934314E5341784D6934324D5341794D4334354D4341784D6934354F5577794D4334354D4341784D7934774D4577794D5334774D6941784D7934784D5645794D4334774D5341784E7934774D5341784F5334344D7941794D5334784E4577784F5334344D7941794D5334784E4577784F5334334F4341794D5334784D4645784F4334304E7941784F5334344E4341784E6934334E6941784F5334334E6B77784E6934334F4341784F5334334F4577784E6934324F5341784F5334324F5645784E4334304F4341784F5334334D6941784D7934784F5341794D5334784E4577784D7934784F4341794D5334784E4577784D7934784F4341794D5334784E4645784D6934774D6941794D6934334E4341784D5334334D7941794E5334354D6B77784D5334334E6941794E5334354E4577784D5334334D6941794E5334354D4645784D5334314F4341794E7934344D5341784D5334314F4341794F4334774F5577784D5334314E7941794F4334774E3077784D5334314E4341794F4334774E5645784D5334324D5341794F5334794E5341784D69347A4F5341794F5334354F4577784D69347A4E7941794F5334354E6B77784D6934794F4341794F5334344E3145784D6934314E53417A4D4334784E4341784D6934324F43417A4D4334784F5577784D6934314E69417A4D4334774E3077784D6934354E43417A4D4334314F4577784D7934774D43417A4D4334324E4645784D7934314F53417A4D5334314D4341784E5334324D53417A4D5334324F4577784E5334314E79417A4D5334324E4577784E5334314E79417A4D5334324E4645784E7934774E53417A4D5334334D7941784E7934354F43417A4D5334334F4577784E7934354E53417A4D5334334E4577784F4334774E79417A4D5334344E6C45794D4334334F43417A4D5334344E6941794D5334354E43417A4D4334354E6B77794D6934774D69417A4D5334774E4577794D6934784D43417A4D5334784D5645794D6934794E53417A4D5334324E5341794D6934314E69417A4D6934304D6C704E4D5467754D5463674D6A4D754D6A6C4D4D5467754D6A59674D6A4D754D7A684D4D5467754D6A4D674D6A4D754D7A52524D5467754F5459674D6A4D754D7A67674D546B754E544D674D6A4D754E7A464D4D546B754E4463674D6A4D754E6A5A4D4D546B754E5455674D6A4D754E7A52524D546B754E7A59674D6A51754E4467674D546B754F4445674D6A55754D54684D4D546B754F444D674D6A55754D6A464D4D546B754F4459674D6A55754D6A4E524D6A41754D5463674D6A67754D6A41674D5459754E7A59674D6A67754E44524D4D5459754E6A55674D6A67754D7A4E4D4D5459754E6A59674D6A67754D7A52524D5459754D5455674D6A67754E4455674D5455754E4441674D6A67754D6A644D4D5455754D6A6B674D6A67754D54564D4D5455754D6A59674D6A67754D544A524D5455754D6A4D674D6A63754F444D674D5455754D5467674D6A63754E44644D4D5455754D5455674D6A63754E44564D4D5455754D5449674D6A63754E444A524D5455754D4467674D6A59754F5459674D5455754D5441674D6A59754E54564D4D5455754D6A45674D6A59754E6A5A4D4D5455754D5459674D6A59754E6A42524D5455754E4449674D6A51754D7A51674D5463754D6A45674D6A4D754E6A5A4D4D5463754D4467674D6A4D754E54524D4D5463754D4455674D6A4D754E5446524D5463754E7A55674D6A4D754D7A41674D5467754D6A45674D6A4D754D7A4E614969382B50484268644767675A6D6C7362443069493249355A54557A4D6949675A44306954544D314C6A6777494449784C6A497A54444D314C6A6333494449784C6A453554444D314C6A6335494449784C6A497855544D334C6A4578494449784C6A517A49444D344C6A4D31494449784C6A517A54444D344C6A4534494449784C6A493154444D344C6A4D77494449784C6A4D3355544D354C6A4D35494449784C6A4931494451774C6A597A494449784C6A4531544451774C6A6334494449784C6A4D77544451774C6A5932494449784C6A4534555451774C6A5978494449784C6A5930494451774C6A5978494449794C6A457A544451774C6A6330494449794C6A4932544451774C6A59314944497A4C6A4134544451774C6A59324944497A4C6A413455544D354C6A41324944497A4C6A413549444D314C6A67304944497A4C6A453354444D314C6A67304944497A4C6A453454444D314C6A67354944497A4C6A497A55544D314C6A6B77494449334C6A493349444D314C6A457A49444D774C6A593154444D314C6A413249444D774C6A553454444D314C6A413149444D774C6A553355544D7A4C6A553449444D784C6A413349444D794C6A553349444D784C6A597854444D794C6A597849444D784C6A593154444D794C6A513249444D784C6A557755544D304C6A4530494449324C6A6B3449444D7A4C6A6B32494449794C6A453154444D7A4C6A6B32494449794C6A453154444D7A4C6A6730494449794C6A417955544D7A4C6A6331494445334C6A493349444D784C6A6B31494445794C6A633154444D784C6A6B78494445794C6A637854444D784C6A6B31494445794C6A633155544D304C6A5178494445304C6A513049444D334C6A5930494445304C6A553554444D334C6A5935494445304C6A593054444D334C6A5535494445304C6A5530555451774C6A6B77494445304C6A67784944517A4C6A63794944457A4C6A59795444517A4C6A59314944457A4C6A55315444517A4C6A59314944457A4C6A55315554517A4C6A5530494445304C6A45354944517A4C6A4D34494445304C6A637A5444517A4C6A4930494445304C6A5534544451794C6A6735494445314C6A59325444517A4C6A4132494445314C6A6779555451784C6A4979494445324C6A553349444D354C6A4978494445324C6A593354444D354C6A4133494445324C6A553054444D354C6A4132494445324C6A557A55544D334C6A4579494445324C6A593449444D314C6A4535494445324C6A453554444D314C6A4977494445324C6A497854444D314C6A4D77494445324C6A4D7755544D314C6A5535494445344C6A517A49444D314C6A6379494449784C6A4531576B30304E4334784D5341784D7934784D4577304E4334774D4341784D7934774D4577304E4334774E6941784D7934774E5645304D4334344F4341784E4334304E53417A4E7934314E7941784E4334794E45777A4E7934314E7941784E4334794E45777A4E7934314F5341784E4334794E6C457A4E4334774E6941784E4334784E43417A4D5334314D7941784D6934794D45777A4D5334304D7941784D6934784D45777A4D5334314D4341784D6934784E31457A4D7934314E5341784E6934354F53417A4D7934334E6941794D6934784E55777A4D7934324D6941794D6934774D55777A4D7934334D7941794D6934784D6C457A4D7934354D7941794E7934304F53417A4D6934794D69417A4D6934774F55777A4D6934794D43417A4D6934774E30777A4D6934794E69417A4D6934784D6C457A4D6934314E43417A4D5334324F43417A4D7934304E79417A4D5334794E45777A4D7934314D79417A4D53347A4D45777A4D7934324E43417A4D5334304D56457A4D7934304D43417A4D5334344D53417A4D7934774D53417A4D6934344E55777A4D7934784D69417A4D6934354E6B777A4D6934354E69417A4D6934344D46457A4E4334324E79417A4D6934794D53417A4E6934324D79417A4D5334344E30777A4E6934314E79417A4D5334344D55777A4E6934324D43417A4D5334344E46457A4E7934774D4341794F4334314D69417A4E7934784D7941794E4334324E55777A4E7934784D5341794E4334324D30777A4E7934774E7941794E4334314F46457A4F4334794E7941794E4334314E53417A4F5334314D5341794E4334314E55777A4F5334324F5341794E4334334D6B777A4F5334314E6941794E4334314F5645304D4334334D7941794E4334314E6941304D5334354E7941794E4334324F5577304D5334354E7941794E4334324F4577304D5334354E6941794E4334324E3145304D5334354E7941794E4334784D5341304D5334354E7941794D7934304F5577304D5334344E7941794D79347A4F5577304D5334354D6941794D6934784E5577304D5334354E5341794D6934784F4645304D5334304F4341794D69347A4D5341304D4334354D5341794D69347A4D5577304D4334354D7941794D69347A4D6B77304D4334344E7941794D6934794E6C45304D4334344E5341794D5334324E5341304D4334354D5341794D4334354E6B77304D5334774D4341794D5334774E5577304D4334344E7941794D4334354D6C457A4F5334354E5341794D5334774E69417A4F4334354F5341794D5334774E6B777A4F5334774E6941794D5334784D30777A4F5334774F5341794D5334784E56457A4F4334784E5341794D5334784E79417A4E7934794D6941794D5334784E45777A4E7934794D4341794D5334784D30777A4E7934784F5341784F5334324E30777A4E7934784D7941784F5334324D56457A4E7934774F5341784F4334344E53417A4E7934774D5341784F4334784D6B777A4E7934774D4341784F4334784D55777A4E6934354F4341784F4334774F56457A4E7934324D6941784F4334784D53417A4F4334794F5341784F4334784D55777A4F4334794F5341784F4334784D55777A4F4334304D5341784F4334794D3145304D5334314E6941784F4334784E5341304E4334774D5341784E6934344E6B77304D7934354F5341784E6934344D3077304E4334774E7941784E6934354D5645304E4334304E6941784E5334334D7941304E5334774F4341784D7934354E4577304E4334354F5341784D7934344E5577304E5334774E6941784D7934354D3145304E4334784E5341784E4334304E6941304D7934324D5341784E4334324F5577304D7934304E7941784E4334314E6B77304D7934314D5341784E4334324D4645304D7934334D5341784E4334784D4341304E4334774E4341784D7934774E466F694C7A3438634746306143426B50534A4E4E5341794E5342444E6A41674D546B734E4455674D5449734F4445674D7A456949484E30636D39725A543069493245315A5451324E7949675A6D6C7362443069626D39755A534976506A78775958526F49475A706247773949694D324D6D457A5A544D6949475139496B30314E6934344D69417A4D4334344D3077314E6934334F53417A4D4334344D4577314E6934334E43417A4D4334334E5645314D7934354F4341794D7934784F5341314D4334314D4341784F5334344D5577314D4334304F4341784F5334344D4577314D4334304E5341784F5334334E6C45314D5334314E4341794D4334794F4341314D7934314E5341794D4334334D6B77314D7934314E5341794D4334334D6B77314D7934304F5341794D4334324E6C45314E5334354D6941794D79347A4E4341314E7934324E5341794E7934344E6B77314E7934334D5341794E7934354D6B77314E7934334D7941794E7934354E4645314F5334314E5341794D6934354E7941324D53347A4E4341794D4334354D5577324D5334794E6941794D4334344D3077324D5334794E6941794D4334344D3145324D6934324E5341794D4334344D4341324E43347A4D4341794D43347A4D3077324E4334794D4341794D4334794E4577324E4334784E6941794D4334784F5645324D6934784E4341794D6934784F4341324D4334324E7941794E5334794F4577324D4334324D5341794E5334794D6B77324D4334324D4341794E5334794D5645324D43347A4D6941794E5334324D7941314F4334774D69417A4D4334334F5577314F4334774E79417A4D4334344E4577314F4334774D79417A4D4334344D5645314E7934314F53417A4D4334344D6941314E6934334E69417A4D4334334E31704E4E546B754F5445674D7A49754E444A4D4E6A41754D444D674D7A49754E54564D4E6A41754D444D674D7A49754E5456524E6A49754D7A51674D6A51754D6A51674E6A55754E4451674D6A45754D445A4D4E6A55754D6A67674D6A41754F54424D4E6A51754D6A67674D6A45754D6A564D4E6A51754E4449674D6A45754D7A6C524E6A4D754E7A4D674D6A45754D7A6B674E6A4D754D5459674D6A45754E44644D4E6A4D754D6A67674D6A45754E546C4D4E6A4D754D6A55674D6A45754E545A524E6A4D754E5459674D6A45754D6A63674E6A51754D5449674D6A41754E6A684D4E6A51754D5467674D6A41754E7A524D4E6A51754D4467674D6A41754E6A56524E6A51754E6A41674D6A41754D4449674E6A51754F5445674D546B754E7A4E4D4E6A51754F5441674D546B754E7A4A4D4E6A55754D4463674D546B754F446C524E6A4D754E5451674D6A41754D7A41674E6A45754D6A49674D6A41754E6A4E4D4E6A45754D6A51674D6A41754E6A564D4E6A45754D6A51674D6A41754E6A5A524E546B754D7A63674D6A49754E7A6B674E5463754F5463674D6A59754E54684D4E5463754F544D674D6A59754E54564D4E5463754F5455674D6A59754E545A524E5459754F4455674D6A4D754E7A51674E5455754E6A45674D6A49754D445A4D4E5455754E544D674D6A45754F54644D4E5455754D7A41674D6A49754D54464D4E5455754D5459674D6A45754F5464524E5451754F5445674D6A45754F5441674E5451754E7A55674D6A45754F54424D4E5451754F4445674D6A45754F54564D4E5451754F5449674D6A49754D4464524E5451754E6A55674D6A45754E7A49674E544D754E446B674D6A41754D7A4A4D4E544D754E544D674D6A41754D7A5A4D4E544D754E4467674D6A41754D7A46524E5445754D6A4D674D6A41754D4441674E446B754E7A45674D546B754D6A4A4D4E446B754E7A63674D546B754D6A6C4D4E446B754E6A6B674D546B754D6A46524E544D754F4449674D6A4D754D4455674E5459754E544D674D7A45754D44464D4E5459754E6A41674D7A45754D44684D4E5463754D6A55674D7A45754D445A4D4E5463754D7A45674D7A45754D544A524E5463754E6A41674D7A45754E6A45674E5467754D5459674D7A49754E446C4D4E5467754D5455674D7A49754E44644D4E546B754D4467674D7A49754E44684D4E546B754D4441674D7A49754D7A6C524E546B754E5449674D7A49754E444D674E546B754F5459674D7A49754E4468614969382B50484268644767675A6D6C73624430694932466B5A446B79595349675A443069545463304C6A5977494445324C6A4978544463304C6A5532494445324C6A4533544463304C6A5978494445324C6A4979555463314C6A4130494445344C6A6B31494463314C6A4530494449784C6A4D34544463314C6A4979494449784C6A5132544463314C6A4978494449784C6A5131555463324C6A4130494449784C6A5534494463324C6A6332494449784C6A5534544463324C6A6378494449784C6A557A544463344C6A4979494449784C6A5530544463344C6A4534494449784C6A5577555463344C6A6732494449784C6A5132494463354C6A5131494449774C6A5577544463354C6A5532494449774C6A5977544463354C6A5532494449774C6A5977555463354C6A6B35494445354C6A6330494467774C6A4132494445344C6A6B30544467774C6A4178494445344C6A6734544467774C6A4532494445354C6A417A555467774C6A4934494445324C6A6731494463334C6A5178494445324C6A5578544463334C6A5135494445324C6A5977544463334C6A5179494445324C6A557A555463324C6A5130494445324C6A5932494463304C6A5932494445324C6A4933576B30334E5334794D4341794D79347A4D4577334E5334794E7941794D79347A4E3077334E53347A4E5341794D7934304E5645334E5334784F4341794E7934314E4341334E4334304D43417A4D4334314E4577334E4334304D69417A4D4334314E5577334E4334304D79417A4D4334314E6C45334D7934314E53417A4D4334354E4341334D5334354E79417A4D5334324E3077334D5334354D43417A4D5334324D4577334D5334354D69417A4D5334324D6C45334D7934314E7941794E7934784E4341334D79347A4F5341794D6934794D5577334D79347A4D5341794D6934784D3077334D79347A4D6941794D6934784E4645334D7934774D4341784E7934774D5341334D5334784D5341784D6934324E5577334D5334784D7941784D6934324E6B77334D5334784E5341784D6934324F5645334E4334774E5341784E4334324E5341334F4334794F4341784E4334324E5577334F43347A4E5341784E4334334D6B77334F4334794E4341784E4334324D5645344D69347A4E5341784E4334324D5341344D6934304E5341784E6934354E6B77344D6934304F5341784E7934774D4577344D69347A4F4341784E6934344F5645344D6934304D7941784F4334314E4341344D5334334E5341794D43347A4E5577344D5334344E5341794D4334304E4577344D5334354D4341794D4334304F5645344D5334304F5341794D5334784D5341344D4334344E4341794D5334354E4577344D4334344E5341794D5334354E4577344D4334344E4341794D5334354D3145344D4334784D4341794D7934784F5341334F43347A4E7941794D79347A4E3077334F43347A4F4341794D79347A4E3077334F4334794D6941794D7934794D6C45334E6934334D7941794D7934794E7941334E5334794D4341794D79347A4D46704E4E7A6B754E4455674D6A51754F544A4D4E7A6B754D7A67674D6A51754F44524D4E7A6B754D7A51674D6A51754F4442524F4449754D6A41674D6A55754D4441674F444D754D4455674D6A45754E7A564D4F444D754D5459674D6A45754F44564D4F444D754D5459674D6A45754F4456524F444D754E6A67674D546B754D6A55674F444D754E5467674D5463754F44684D4F444D754E6A6B674D5467754D44424D4F444D754E6A59674D5463754F545A524F444D754E5463674D5459754F5449674F444D754D4459674D5459754D6A564D4F4449754F5451674D5459754D544E4D4F444D754D446B674D5459754D6A6C524F4449754F444D674D5459754D4449674F4449754E446B674D5455754F44644D4F4449754E4451674D5455754F444A4D4F4449754E5459674D5455754F544E524F4449754E4455674D5455754E7A49674F4449754D4451674D5455754D6A424D4F4449754D4451674D5455754D6A424D4F4449754D544D674D5455754D7A42524F4441754F5451674D5451754D6A59674E7A67754D6A59674D5451754D6A5A4D4E7A67754E4441674D5451754E44464D4E7A67754D6A59674D5451754D6A64524E7A4D754E5463674D5451754D6A59674E7A41754E7A45674D5449754D54464D4E7A41754E7A59674D5449754D545A4D4E7A41754E7A63674D5449754D5468524E7A49754F446B674D5459754F5459674E7A4D754D4463674D6A49754D444A4D4E7A4D754D5445674D6A49754D445A4D4E7A4D754D4449674D6A45754F545A524E7A4D754D7A59674D6A63754D7A49674E7A45754E5455674D7A49754D544A4D4E7A45754E5441674D7A49754D44644D4E7A45754E446B674D7A49754D4464524E7A49754D5455674D7A45754E5463674E7A49754F444D674D7A45754D7A464D4E7A49754F5459674D7A45754E44524D4E7A49754E6A6B674D7A49754D6A424D4E7A49754E5467674D7A49754D5442524E7A49754E4467674D7A49754E5445674E7A49754D7A41674D7A49754F54424D4E7A49754D7A55674D7A49754F54564D4E7A49754D7A59674D7A49754F545A524E7A51754D4451674D7A49754D6A6B674E7A59754D4441674D7A45754F544E4D4E7A55754F4463674D7A45754E7A6C4D4E7A55754F4451674D7A45754E7A5A524E7A59754E444D674D6A67754D4451674E7A59754E4467674D6A51754F444E4D4E7A59754E5449674D6A51754F44684D4E7A59754E446B674D6A51754F4456524E7A63754D7A45674D6A51754F4459674E7A63754F5467674D6A51754F445A4D4E7A67754D4459674D6A51754F54524D4E7A67754D4445674D6A51754F446C524E7A67754F5463674D6A51754F5455674E7A6B754E5445674D6A51754F546461545463344C6A6333494445344C6A4530544463344C6A6330494445344C6A4578544463344C6A6330494445344C6A4577555463354C6A4978494445344C6A4930494463354C6A6734494445344C6A4D35544463354C6A6778494445344C6A4D79544463354C6A6378494445344C6A4979555463354C6A6B77494445344C6A5135494463354C6A6B7A494445344C6A6377544463354C6A6732494445344C6A597A544463354C6A6730494445344C6A5978555463354C6A6732494445344C6A6334494463354C6A6778494445344C6A6B33544463354C6A6734494445354C6A4130544463354C6A6730494445354C6A4177555463354C6A6334494445354C6A6730494463354C6A4935494449774C6A517A544463354C6A4931494449774C6A5177544463354C6A4D78494449774C6A5132555463344C6A6B33494449784C6A497A494463344C6A4933494449784C6A4D32544463344C6A4931494449784C6A4D7A544463344C6A4532494449784C6A4930555463334C6A6333494449784C6A4D31494463324C6A5932494449784C6A4D31544463324C6A5932494449784C6A4D30544463324C6A5579494449784C6A4978555463324C6A5577494445354C6A5932494463324C6A4D30494445344C6A4132544463324C6A4D77494445344C6A4179544463334C6A5934494445344C6A4932544463334C6A5532494445344C6A4530555463344C6A4979494445344C6A497A494463344C6A6778494445344C6A453457694976506A78775958526F49475139496B30784D6941794E7942444E6A63674D7A45734E4455674D6A63734F4467674D6A556949484E30636D39725A543069493255324E6D5A6C4E6949675A6D6C7362443069626D39755A534976506A78775958526F49475139496B307849444D3149454D324E69417A4D5377314D5341794E6977354E6941794969427A64484A766132553949694E6859545A685A57456949475A7062477739496D3576626D55694C7A34384C334E325A7A343D, 'dFvP', '2023-03-07 11:02:54', '2023-03-07 02:52:54', '2023-03-07 02:52:54');
INSERT INTO `verifycode` VALUES ('f9343a94-e766-40ea-a4c9-ec648b0cd2c0', 0x646174613A696D6167652F7376672B786D6C3B6261736536342C50484E325A79423462577875637A30696148523063446F764C336433647935334D793576636D63764D6A41774D43397A646D6369494864705A48526F505349784D4441694947686C6157646F644430694E44416949485A705A58644362336739496A41734D4377784D4441734E444169506A78795A574E30494864705A48526F505349784D44416C4969426F5A576C6E61485139496A45774D43556949475A706247773949694E6C4E4759345A6D55694C7A3438634746306143426D615778735053496A4E7A67314D3255344969426B50534A4E4D5455754F5455674D6A4D754D6A4A4D4D5455754E7A6B674D6A4D754D445A4D4D5455754F4463674D6A4D754D5452524D5455754F5451674D6A59754D5445674D5455754E4455674D6A67754F544A4D4D5455754D7A63674D6A67754F44524D4D5455754E4467674D6A67754F5456524D5459754F5467674D6A67754E5451674D546B754D4463674D6A67754E445A4D4D5467754F5467674D6A67754D7A644D4D546B754D4449674D6A67754E4446524D6A41754D4441674D6A67754E6A49674D6A41754E7A4D674D6A63754F544E4D4D6A41754E6A49674D6A63754F444E4D4D6A41754E6A55674D6A63754F445A524D6A45754D7A4D674D6A63754D544D674D6A45754D7A4D674D6A59754D6A4A4D4D6A45754D6A67674D6A59754D54644D4D6A45754D7A6B674D6A59754D6A68524D6A45754D7A49674D6A59754D4445674D6A45754D6A6B674D6A55754F444E4D4D6A45754D7A49674D6A55754F44564D4D6A45754D6A67674D6A55754F4446524D6A45754D5463674D6A4D754F4449674D546B754E6A55674D6A4D754D6A564D4D546B754E7A63674D6A4D754D7A644D4D546B754E7A59674D6A4D754D7A64524D546B754D6A45674D6A4D754D5449674D5467754E7A51674D6A4D754D54644D4D5467754E7A55674D6A4D754D54684D4D5467754E6A55674D6A4D754D4468524D5467754D446B674D6A4D754D546B674D5463754D7A6B674D6A4D754D6A4A4D4D5463754D7A51674D6A4D754D54644D4D5463754D6A6B674D6A4D754D544A524D5459754E5451674D6A4D754D5445674D5455754F4451674D6A4D754D544661545445314C6A4530494445324C6A4532544445304C6A6B32494445314C6A6B34544445304C6A6B32494445314C6A6B34555445314C6A5934494445344C6A4D31494445314C6A6732494449784C6A4D7A544445314C6A6733494449784C6A4D30544445314C6A6335494449784C6A4931555445324C6A637A494449784C6A4935494445344C6A5530494449784C6A4D79544445344C6A6377494449784C6A5134544445344C6A5531494449784C6A4D79555449774C6A5578494449784C6A4D7A494449774C6A6330494445344C6A6B79544449774C6A6730494445354C6A4179544449774C6A6734494445354C6A4132555449784C6A4131494445334C6A6334494449774C6A4577494445334C6A4979544445354C6A6B32494445334C6A4133544449774C6A4179494445334C6A4530555445354C6A517A494445324C6A6778494445324C6A5130494445324C6A4D33544445324C6A4D33494445324C6A4D77544445324C6A5131494445324C6A4D35555445314C6A5934494445324C6A497A494445314C6A4132494445324C6A4134576B30784D6934304F53417A4D5334314D6B77784D6934324E69417A4D5334324F5577784D6934324E53417A4D5334324F4645784E4334794D6941794E7934774E4341784E4334774E4341794D6934774D3077784D7934354F4341794D5334354E3077784E4334784E5341794D6934784E5645784D7934354D5341784E7934784E6941784D5334354D6941784D6934334E6B77784D5334354E6941784D6934344D4577784D5334354D6941784D6934334E6C45784E4334304D5341784E43347A4F5341784F4334324D7941784E4334314E6B77784F4334334E6941784E4334334D4577784F4334334F4341784E4334334D5645794D6934344D7941784E4334334D4341794D7934774E6941784E6934324E3077794D7934774F5341784E6934324F5577794D7934784E4341784E6934334E5645794D7934304D5341784F4334324E6941794D6934304E5341794D4334304E3077794D6934304F4341794D4334314D4577794D69347A4E4341794D43347A4E6C45794D5334344E5341794D53347A4F5341794D4334334E6941794D5334344E6B77794D4334334E7941794D5334344E3077794D4334344D4341794D5334354D4645794D79347A4D5341794D69347A4F5341794D7934304E7941794E6934774E4577794D79347A4F5341794E5334354E6B77794D7934304F5341794E6934774E6C45794D7934314E4341794E6934344D5341794D7934304F5341794E7934334E6B77794D7934304D5341794E7934324F4577794D7934304E4341794E7934334D5645794D79347A4E4341794F4334314E5341794D6934334D5341794F5334784F4577794D6934344D6941794F5334794F5577794D6934334F4341794F5334794E5645794D6934784E7941794F5334354D5341794D5334794E79417A4D4334774D5577794D53347A4D53417A4D4334774E5577794D5334794E5341794F5334354F5645794D4334794D53417A4D4334774D5341784F5334304F53417A4D4334774D5577784F5334314D43417A4D4334774D3077784F5334304F43417A4D4334774D4645784E5334334D53417A4D4334784D5341784D6934324E43417A4D5334324E6C704E4D6A45754D6A63674D7A45754F444A4D4D6A45754D5463674D7A45754E7A4A4D4D6A45754D7A51674D7A45754F5442524D6A45754F5463674D7A45754F544D674D6A4D754D6A51674D7A49754D44464D4D6A4D754D6A4D674D7A49754D44424D4D6A4D754D5451674D7A45754F5446524D6A51754D444D674D7A45754F4463674D6A51754E7A67674D7A45754D6A684D4D6A51754F5451674D7A45754E44524D4D6A51754F4455674D7A45754D7A56524D6A55754D7A6B674D7A41754E7A49674D6A55754D7A45674D6A6B754E6A5A4D4D6A55754E444D674D6A6B754E7A684D4D6A55754E4449674D6A6B754E7A64524D6A55754D7A4D674D6A6B754D446B674D6A51754F4451674D6A59754E7A524D4D6A51754F4441674D6A59754E6A6C4D4D6A51754F4449674D6A59754E7A4A524D6A51754D7A63674D6A51754E5451674D6A4D754D5445674D6A4D754E544E4D4D6A49754F5467674D6A4D754E44464D4D6A49754E7A45674D6A49754F44564D4D6A49754E7A67674D6A49754F544A524D6A4D754F546B674D6A49754D4451674D6A51754D7A67674D546B754E446C4D4D6A51754D7A59674D546B754E445A4D4D6A51754D7A49674D546B754E444A524D6A51754D7A49674D5467754E5451674D6A51754D6A63674D5463754E546C4D4D6A51754E4445674D5463754E7A4E4D4D6A51754D6A59674D5463754E5468524D6A51754E4441674D5459754F4463674D6A4D754E6A55674D5459754D7A424D4D6A4D754E5445674D5459754D545A4D4D6A4D754E446B674D5459754D5452524D6A4D754D6A63674D5459754D4441674D6A4D754D6A41674D5455754F54684D4D6A4D754D6A63674D5459754D44564D4D6A4D754D7A4D674D5459754D5446524D6A4D754D446B674D5455754E6A67674D6A49754E5449674D5455754D54524D4D6A49754E6A4D674D5455754D6A5A4D4D6A49754E4455674D5455754D4464524D6A45754E5449674D5451754E4459674D5467754E6A55674D5451754D7A4E4D4D5467754E6A55674D5451754D7A4E4D4D5467754E5467674D5451754D6A56524D5451754D5467674D5451754D5463674D5445754E4463674D5449754D6A424D4D5445754E4455674D5449754D546C4D4D5445754D7A59674D5449754D5442524D544D754E5463674D5459754F444D674D544D754E7A63674D6A45754F54564D4D544D754F5451674D6A49754D544A4D4D544D754F4445674D6A45754F546C524D5451754D4445674D6A63754D6A67674D5449754D5441674D7A45754F54684D4D5449754D6A63674D7A49754D54564D4D544D754E6A51674D7A45754E44684D4D544D754E5455674D7A45754D7A68524D544D754D7A45674D7A49754D5467674D5449754F5463674D7A49754F54564D4D5449754F5455674D7A49754F544E4D4D544D754D4455674D7A4D754D444E524D5455754F4459674D7A45754E6A59674D546B754D6A63674D7A45754E6A5A4D4D546B754D7A41674D7A45754E6A684D4D546B754D7A67674D7A45754E7A5A524D6A41754D6A45674D7A45754E6A51674D6A45754D546B674D7A45754E7A5261545445354C6A6735494449304C6A637A544445354C6A6333494449304C6A5978544445354C6A6778494449304C6A5932555449774C6A4D32494449304C6A5932494449774C6A6B34494449304C6A6B33544449774C6A6B32494449304C6A6B31544449774C6A6B34494449304C6A6B33555449774C6A6B35494449314C6A4530494449784C6A4135494449314C6A6732544449784C6A4178494449314C6A6333544449784C6A4131494449314C6A6778555449784C6A4D77494449324C6A6732494449774C6A5932494449334C6A5533544449774C6A5977494449334C6A5578544449774C6A5933494449334C6A5534555449774C6A4177494449344C6A4931494445354C6A4130494449344C6A4533544445344C6A6B78494449344C6A4131544445334C6A6B35494449344C6A4978544445334C6A6B30494449344C6A4532555445334C6A5179494449344C6A4534494445324C6A6B7A494449344C6A4932544445324C6A6B30494449344C6A4933544445324C6A6B77494449344C6A497A555445334C6A4979494449334C6A4577494445334C6A4933494449304C6A6331544445334C6A4532494449304C6A5930544445334C6A4932494449304C6A6330555445334C6A6335494449304C6A6334494445344C6A5930494449304C6A6331544445344C6A5532494449304C6A5933544445344C6A597A494449304C6A6330555445354C6A4D7A494449304C6A5532494445354C6A6330494449304C6A5535576B30784F5334784E7941784F4334794D4577784F5334774D7941784F4334774E6B77784F5334304D5341784F4334784F4577784F5334304D7941784F4334794D5645784F5334324D4341784F4334794D6941784F5334334D7941784F4334794E5577784F5334324D7941784F4334784E5577784F5334344D5341784F4334774E3077794D4334784D5341784F4334794E4577794D4334324D7941784F43347A4F5577794D4334304F5341784F4334794E5645794D4334314E4341784F4334304D5341794D4334314E4341784F4334324D5577794D4334314E6941784F4334324D3077794D4334334D5341784F5334784E4577794D4334314F4341784F5334774D5645794D4334314F5341784F5334344F4341794D4334774D4341794D4334314D5577794D4334774E7941794D4334314F4577794D4334774D4341794D4334314D6C45784F5334304D4341794D5334784E4341784F4334314E7941794D5334784E4577784F4334324E7941794D5334794E4577784F4334324D5341794D5334784F4645784E7934354F5341794D5334794E6941784E7934354F5341794D5334794E6B77784E7934354D4341794D5334784E3077784E7934344D4341794D5334774E3145784E7934774E4341794D5334784F4341784E7934794E7941794D5334784F4577784E7934784E7941794D5334774F4577784E7934794D5341794D5334784D6C45784E7934784E5341794D4334774E6941784E6934354E4341784E7934354F5577784E6934354D7941784E7934354E3077784E6934354F4341784F4334774D6C45784E7934354F4341784F4334774E5341784F5334774D6941784F4334774E566F694C7A3438634746306143426B50534A4E4D5459674D6A5567517A553349444D784C444D3049444D784C446B34494445354969427A64484A766132553949694E6B5A6A63325A47596949475A7062477739496D3576626D55694C7A3438634746306143426D615778735053496A4E324E6A4F57557A4969426B50534A4E4E7A63754F4455674D6A4D754E444A4D4E7A63754E6A6B674D6A4D754D6A644D4E7A63754E7A51674D6A4D754D7A46524E7A59754D4455674D6A4D754D6A55674E7A55754D5451674D6A51754D44684D4E7A55754D444D674D6A4D754F54644D4E7A55754D6A41674D6A51754D544E524E7A51754D6A51674D6A51754F5441674E7A51754E4451674D6A59754E6A464D4E7A51754D7A59674D6A59754E544E4D4E7A51754D7A4D674D6A59754E5442524E7A51754E6A4D674D6A67754D6A6B674E7A55754E4459674D6A6B754D54564D4E7A55754D7A67674D6A6B754D44644D4E7A55754E5451674D6A6B754D6A4E524E7A59754D5449674D6A6B754F546B674E7A63754E5463674D6A6B754F54524D4E7A63754E546B674D6A6B754F545A4D4E7A63754E5455674D6A6B754F544A524E7A67754D444D674D7A41754D4449674E7A67754D5459674D7A41754D444A4D4E7A67754D6A49674D7A41754D44644D4E7A67754D6A51674D7A41754D446C524F4441754E4455674D6A6B754E446B674F4441754E5449674D6A59754D7A5A4D4F4441754E6A49674D6A59754E445A4D4F4441754E6A6B674D6A59754E544E524F4441754E6A6B674D6A51754F4463674F4441754D6A49674D6A51754D7A4E4D4F4441754D6A6B674D6A51754E44424D4F4441754D546B674D6A51754D6A6C524E7A6B754E5459674D6A4D754E5445674E7A63754F444D674D6A4D754E444261545467774C6A417749444D784C6A4935544463354C6A6B7A49444D784C6A4979544467774C6A417749444D784C6A4935555463354C6A413349444D784C6A5931494463344C6A417849444D784C6A5977544463344C6A413249444D784C6A5931544463344C6A413249444D784C6A5931555463314C6A513149444D784C6A6333494463304C6A553349444D774C6A4178544463304C6A5134494449354C6A6B7A544463304C6A553149444D774C6A4177555463304C6A4D3249444D7A4C6A55324944637A4C6A513249444D324C6A51315444637A4C6A513249444D324C6A51315444637A4C6A513449444D324C6A5133555463794C6A4D3249444D324C6A6B77494463784C6A493149444D334C6A4D35544463784C6A493349444D334C6A5178544463784C6A4D7849444D334C6A5131555463794C6A673149444D7A4C6A4978494463794C6A5933494449344C6A5134544463794C6A6779494449344C6A597A544463794C6A6731494449344C6A5932555463794C6A55794944497A4C6A6732494463774C6A5532494445354C6A6331544463774C6A5531494445354C6A6331544463774C6A5931494445354C6A6730555463784C6A6B33494449774C6A59314944637A4C6A457A494449774C6A6B325444637A4C6A4132494449774C6A67345444637A4C6A5132494449784C6A6B7A5444637A4C6A5131494449784C6A6B795554637A4C6A5577494449794C6A457A4944637A4C6A5934494449794C6A67345444637A4C6A5930494449794C6A677A5444637A4C6A6332494449794C6A6B31555463304C6A4D35494449784C6A5135494463324C6A6779494449784C6A4D33544463324C6A6733494449784C6A5179544463324C6A6779494449784C6A4D33555463334C6A5130494449784C6A4D33494463344C6A4130494449784C6A4D33544463344C6A4178494449784C6A4D30544463344C6A4D78494449784C6A4D78544463344C6A4D7A494449784C6A4D79555463344C6A5177494449784C6A4D78494463344C6A5579494449784C6A4D30544463344C6A5930494449784C6A5131544463344C6A6334494449784C6A4D35544463344C6A6331494449784C6A4D32555467774C6A4533494449784C6A5532494467774C6A5932494449784C6A6379544467774C6A5932494449784C6A6379544467774C6A6377494449784C6A6332555467784C6A5978494449784C6A6B33494467794C6A4978494449794C6A5979544467794C6A4933494449794C6A5935544467794C6A4D32494449794C6A6333555467794C6A6B324944497A4C6A5978494467794C6A6B30494449304C6A5532544467794C6A6730494449304C6A5132544467794C6A6334494449304C6A5177555467794C6A6331494449324C6A4D78494467794C6A4977494449344C6A4579544467794C6A5177494449344C6A4D78544467794C6A4930494449344C6A4531555467784C6A593149444D774C6A5930494467774C6A413149444D784C6A4D30576B30344D6934344F53417A4D5334334D4577344D6934354D79417A4D5334334D5577344D6934344E79417A4D5334324E5645344D7934334D79417A4D4334304D6941344D7934354D7941794E7934324D3077344D7934344D5341794E7934314D4577344D7934334F5341794E7934304F4645344D7934354D7941794E69347A4D7941344D7934354D7941794E5334304F4577344D7934354F5341794E5334314E4577344D7934354D7941794E5334304E3145344E4334774E4341794E4334314E5341344D7934314D6941794D7934314F5577344D7934304F5341794D7934314E3077344D7934304F5341794D7934314E3145344D7934794E5341794D79347A4D4341344D6934354D5341794D7934774E4577344D6934354D5341794D7934774D3077344D6934334E4341794D6934334F5577344D6934324E4341794D6934324D5577344D6934324D6941794D6934314D5577344D6934324D4341794D6934304F5645344D5334304E6941794D5334784E5341334F4334314D6941794D5334784E5577334F43347A4E6941794D4334354F5577334F4334774D6941794D5334774E3077334F4334784D7941794D5334784F4645334E4334344E5341794D5334774E4341334D7934334E4341794D6934784D3077334D7934334E7941794D6934784E6B77334D7934334F4341794D6934784E3145334D7934324E4341794D5334344D4341334D7934314E4341794D5334304E3077334D7934314F5341794D5334314D6B77334D79347A4E6941794D4334334E4577334D7934304E5341794D4334344E4645334D5334324F5341794D43347A4E4341334D4334784F5341784F53347A4D3077334D4334774F5341784F5334794E4577334D4334784D7941784F5334794F4645334D6934304E4341794D7934324E5341334D6934324E5341794F4334314E6B77334D6934324E5341794F4334314E6B77334D6934314E5341794F4334304E6C45334D6934334F43417A4D7934304D6941334D4334344E53417A4E7934344D5577334D4334334F43417A4E7934334E5577334D6934794E79417A4E79347A4D4577334D6934784E69417A4E7934784F5645334D6934784D43417A4E7934344D4341334D5334324D79417A4F4334344E6B77334D5334324D79417A4F4334344E5577334D5334314F43417A4F4334344D5645334D7934304D79417A4F4334784D4341334E5334774D53417A4E7934344E3077334E4334344E79417A4E7934334D3077334E5334774D43417A4E7934344E6C45334E5334334E79417A4E4334324D4341334E5334344E79417A4D6934774E3077334E5334354D53417A4D6934784D4577334E5334344D69417A4D6934774D5645334E6934334E79417A4D7934774D6941334F5334794D69417A4D7934784E3077334F5334794D53417A4D7934784E6B77334F5334794F53417A4D7934794E4645344D5334344E79417A4D79347A4D6941344D6934344E53417A4D5334324E6B77344D6934344D79417A4D5334324D31704E4E7A67754F546B674D6A51754F44424D4E7A6B754D4449674D6A51754F444E4D4E7A67754F5467674D6A51754E7A6C524E7A6B754E444D674D6A51754E7A55674F4441754D5467674D6A51754F54684D4F4441754D6A49674D6A55754D444E4D4F4441754D6A55674D6A55754D4456524F4441754E5445674D6A55754F4445674F4441754E446B674D6A59754E6A464D4F4441754E4463674D6A59754E546C4D4F4441754E4455674D6A59754E5464524F4441754D7A45674D6A63754D4455674F4441754D5467674D6A63754E446C4D4F4441754D6A59674D6A63754E54644D4F4441754D6A6B674D6A63754E6A42524E7A6B754F4459674D6A6B754E6A49674E7A67754D5459674D6A6B754F444E4D4E7A67754D544D674D6A6B754F44424D4E7A67754D5463674D6A6B754E7A644D4E7A67754D5451674D6A6B754E7A52524E7A67754D4467674D6A6B754E7A4D674E7A67754D4441674D6A6B754E7A564D4E7A63754F5449674D6A6B754E6A684D4E7A63754E6A59674D6A6B754E7A644D4E7A63754E7A49674D6A6B754F444E524E7A59754F4463674D6A6B754E7A67674E7A59754D546B674D6A6B754E44524D4E7A59754D6A4D674D6A6B754E44684D4E7A59754D4445674D6A67754D54424D4E7A55754F444D674D6A63754F544A524E7A55754F5451674D6A59754E5459674E7A59754F4449674D6A55754F445A4D4E7A59754E6A67674D6A55754E7A4A4D4E7A59754E6A4D674D6A55754E6A64524E7A63754D7A49674D6A51754F5451674E7A67754F5455674D6A51754E7A5A614969382B50484268644767675A6D6C7362443069497A4D785A446331595349675A443069545455334C6A51314944497A4C6A5934544455334C6A55314944497A4C6A6335544455334C6A51794944497A4C6A5932555455314C6A4177494449334C6A6B77494455794C6A593449444D774C6A5535544455794C6A633349444D774C6A5934544455794C6A637849444D774C6A597A555455784C6A513149444D774C6A6B78494451354C6A677749444D784C6A5578544451354C6A6B7949444D784C6A597A544451354C6A633549444D784C6A55775554557A4C6A4979494449334C6A6777494455324C6A5130494449794C6A4135544455324C6A4D78494449784C6A6B31544455324C6A4D77494449784C6A6B305554557A4C6A4D31494445334C6A4D35494451354C6A4D774944457A4C6A4131544451354C6A49334944457A4C6A4179544451354C6A4D784944457A4C6A4132555455784C6A49354944457A4C6A6734494455794C6A6730494445304C6A4979544455794C6A5933494445304C6A4132544455794C6A677A494445304C6A4978555455314C6A6730494445334C6A5977494455334C6A5135494449774C6A4935544455334C6A5135494449774C6A4935544455334C6A5535494449774C6A4D35555455354C6A4930494445334C6A4D30494459784C6A6B77494445304C6A4D30544459784C6A6734494445304C6A4D7A544459784C6A6B78494445304C6A4D32555459794C6A6B33494445304C6A4579494459314C6A45304944457A4C6A5978544459314C6A45344944457A4C6A5930544459314C6A45314944457A4C6A5979555459784C6A4134494445344C6A4130494455344C6A637A494449794C6A4133544455344C6A5930494449784C6A6B35544455344C6A5934494449794C6A4179555459794C6A4931494449334C6A6B34494459314C6A497A49444D784C6A4134544459314C6A497A49444D784C6A4134544459314C6A413449444D774C6A6B7A5554597A4C6A4D3149444D774C6A5179494459784C6A6B7A49444D774C6A4932544459784C6A6B7A49444D774C6A4932544459784C6A6B3149444D774C6A4934555459774C6A4535494449344C6A4D35494455334C6A557A4944497A4C6A6332576B30324D5334344E79417A4D4334304F4577324D5334354F43417A4D4334324D4577324D6934774D43417A4D4334324D5645324D6934784D79417A4D4334314E7941324D6934304E43417A4D4334324E5577324D6934304F53417A4D4334324F5577324D6934304D69417A4D4334324D6C45324D7934774E79417A4D5334794E5341324E4334784D43417A4D69347A4D3077324D7934354F53417A4D6934794D6B77324D7934354F53417A4D6934794D5645324E6934304D43417A4D6934344F5341324F4334304E69417A4D7934344D6B77324F43347A4E69417A4D7934334D6B77324F43347A4F53417A4D7934334E5645324D7934324D4341794F53347A4D6941324D4334784D7941794D79347A4E3077324D4334774F4341794D79347A4D6B77324D4334774E4341794D7934794F4645324D6934324D6941784F4334344D4341324E6934324D6941784E4334784E5577324E6934324E5341784E4334784F4577324E6934324F4341784E4334794D6C45324E5334324F4341784E4334324D7941324E4334794D4341784E4334354F5577324E4334774F5341784E4334344F4577324E4334794E5341784E5334774E4645324E4334334D4341784E4334794F4341324E5334344F5341784D7934774E6B77324E5334354D7941784D7934784D4577324E5334354E5341784D7934784D3145324E4334304D6941784D7934344D5341324D5334354D5341784E4334794D4577324D5334344F4341784E4334784E3077324D5334344D5341784E4334774F5645314F5334314D4341784E6934334D4341314E7934334E5341784F5334324D6B77314E7934334F5341784F5334324E6B77314E7934334E7941784F5334324E5645314E7934774E7941784F4334304F4341314E6934794E7941784E7934304E3077314E69347A4E7941784E7934314E3077314E4334334E7941784E5334314D3077314E4334304E6941784E5334304F4577314E4334324D4341784E5334324D5645314E4334304E5341784E5334314E7941314E4334794F5341784E5334314D6B77314E4334794F4341784E5334314D4577314E4334794D6941784E5334304E5645314D7934344F5341784E5334774D5341314D6934344F4341784D7934354E5577314D6934334D6941784D7934334F5577314D6934344E7941784D7934354E4645314D4334794E4341784D79347A4D4341304F4334304F4341784D69347A4E3077304F4334304D6941784D69347A4D5577304F4334304F5341784D69347A4F4645314D7934774D7941784E7934794F4341314E6934784D7941794D6934774E6B77314E6934774E7941794D5334354F5577314E6934784D4341794D6934774D3145314D6934354F5341794E7934314D6941304F5334774F53417A4D5334354F5577304F5334794E53417A4D6934784E5577304F5334784F53417A4D6934774F5645314D4334774D69417A4D5334314E7941314D5334304E69417A4D5334784F5577314D5334304D79417A4D5334784E5577314D4334314F43417A4D6934784E3077314D4334314E43417A4D6934784D6C45314D4334314F53417A4D6934784E7941304F5334324F53417A4D7934774F4577304F5334334D53417A4D7934784D4577304F5334334D43417A4D7934774F5645314D5334334D69417A4D69347A4E4341314D7934344E69417A4D6934774D5577314D7934354F53417A4D6934784E4577314D7934354D53417A4D6934774E6C45314E6934324D5341794F4334354E7941314F43347A4E7941794E5334334E4577314F43347A4E4341794E5334334D6B77314F4334304E4341794E5334344D5645324D4334774F4341794F4334314F5341324D5334354D53417A4D4334314D316F694C7A3438634746306143426D615778735053496A4E575A6C4D54566D4969426B50534A4E4E4445754E7A45674D6A49754E54424D4E4445754F4449674D6A49754E6A464D4D7A63754E7A55674D6A49754E546C4D4D7A63754E7A55674D6A49754E546C524D7A55754E7A4D674D6A49754E546B674D7A4D754E7A51674D6A49754E54524D4D7A4D754E7A45674D6A49754E54424D4D7A4D754E7A41674D6A49754E446C524D7A4D754E7A45674D6A59754F5467674D7A49754D7A49674D7A41754E7A4A4D4D7A49754E5445674D7A41754F544A4D4D7A49754D7A51674D7A41754E7A52524D7A45754D4467674D7A45754D4459674D6A6B754F446B674D7A45754E544E4D4D6A6B754F5467674D7A45754E6A4A4D4D7A41754D4441674D7A45754E6A4E524D7A45754E7A6B674D6A63754E6A59674D7A45754E7A6B674D6A4D754D54524D4D7A45754F4467674D6A4D754D6A4E4D4D7A45754F4459674D6A4D754D6A46524D7A45754F4445674D5463754E4441674D6A6B754D4449674D5449754E6A4A4D4D6A6B754D444D674D5449754E6A4E4D4D6A6B754D5441674D5449754E7A42524D7A41754D5445674D544D754D6A49674D7A45754E7A6B674D544D754E7A5A4D4D7A45754F4451674D544D754F44464D4D7A45754F4449674D544D754F4442524D7A4D754D6A67674D5463754D6A55674D7A4D754E6A55674D6A41754E545A4D4D7A4D754E5467674D6A41754E446C4D4D7A4D754E6A59674D6A41754E5464524D7A55754E6A67674D6A41754E7A45674D7A63754E6A49674D6A41754E6A684D4D7A63754E7A51674D6A41754F44424D4D7A63754E6A51674D6A41754E7A42524D7A6B754E5445674D6A41754E7A59674E4445754E7A59674D6A41754E54684D4E4445754F4451674D6A41754E6A644D4E4445754F4449674D6A41754E6A56524E4449754D446B674D5463754E6A45674E444D754D6A67674D5451754D54564D4E444D754D7A45674D5451754D54644D4E444D754D6A55674D5451754D544A524E4451754E6A55674D544D754F5445674E4459754D5463674D544D754D7A524D4E4459754D5467674D544D754D7A564D4E4459754D4467674D544D754D6A5A524E444D754E6A67674D5463754F4467674E444D754E6A67674D6A4D754D6A684D4E444D754E6A45674D6A4D754D6A464D4E444D754E5459674D6A4D754D545A524E444D754E5467674D6A63754D7A6B674E4455754D5467674D7A45754D44464D4E4455754D5463674D7A45754D44424D4E4455754D6A63674D7A45754D5442524E4451754D6A41674D7A41754E7A41674E4449754F4441674D7A41754E446C4D4E4449754F4455674D7A41754E54524D4E4449754E6A67674D7A41754D7A5A524E4445754E7A4D674D6A63754D5455674E4445754F4445674D6A49754E6A4261545451794C6A553149444D774C6A5931544451794C6A597749444D774C6A6377544451794C6A593249444D774C6A63325554517A4C6A4D3049444D774C6A6731494451304C6A413549444D784C6A417A544451304C6A413249444D774C6A6B355444517A4C6A6B3449444D774C6A6B78555451304C6A4D3249444D784C6A5531494451304C6A677749444D794C6A5532544451304C6A597949444D794C6A4D34544451304C6A677849444D794C6A5533555451334C6A417749444D7A4C6A457A494451344C6A497849444D7A4C6A6331544451344C6A457949444D7A4C6A5932544451344C6A453349444D7A4C6A6378555451314C6A4135494449354C6A5133494451304C6A67344944497A4C6A6732544451314C6A4130494449304C6A4179544451304C6A67354944497A4C6A6733555451304C6A6332494445344C6A5135494451334C6A49304944457A4C6A6733544451334C6A49794944457A4C6A6731544451324C6A5979494445304C6A4935544451324C6A5131494445304C6A4579555451324C6A4933494445304C6A517A494451314C6A6732494445304C6A557A544451314C6A6378494445304C6A4D34544451314C6A677A494445304C6A5577555451324C6A41774944457A4C6A6731494451324C6A5533494445794C6A6335544451324C6A6379494445794C6A6B30544451324C6A557A494445794C6A6331555451304C6A637A4944457A4C6A5132494451794C6A6B314944457A4C6A6335544451794C6A6B304944457A4C6A63345444517A4C6A41324944457A4C6A6B77555451784C6A6734494445334C6A4530494451784C6A5533494449774C6A4D79544451784C6A5535494449774C6A4D30544451784C6A5930494449774C6A4D3455544D354C6A677A494449774C6A517849444D344C6A4534494449774C6A517854444D344C6A4D31494449774C6A553454444D344C6A4D78494449774C6A553055544D324C6A5533494449774C6A517A49444D304C6A6732494449774C6A4D7954444D304C6A6732494449774C6A4D7954444D304C6A6733494449774C6A4D7A55544D304C6A6731494445344C6A493149444D304C6A4578494445314C6A513554444D304C6A4134494445314C6A513254444D7A4C6A6B33494445314C6A4D3155544D7A4C6A557A494445314C6A4D7749444D794C6A5531494445314C6A413054444D794C6A5534494445314C6A413354444D794C6A5578494445314C6A417755544D794C6A4D78494445304C6A493049444D794C6A41774944457A4C6A553054444D794C6A41304944457A4C6A553354444D794C6A41774944457A4C6A553055544D774C6A49304944457A4C6A4579494449344C6A5935494445794C6A4933544449344C6A5977494445794C6A4533544449344C6A5930494445794C6A497955544D784C6A637A494445334C6A493149444D784C6A637A4944497A4C6A497954444D784C6A63784944497A4C6A453554444D784C6A63334944497A4C6A493155544D784C6A6334494449334C6A6B35494449354C6A593249444D794C6A4531544449354C6A593249444D794C6A4531544449354C6A553149444D794C6A417A55544D774C6A417749444D784C6A677949444D774C6A6B7749444D784C6A517A54444D774C6A6B3349444D784C6A513554444D784C6A413249444D784C6A553555544D774C6A677849444D794C6A457A49444D774C6A493249444D7A4C6A453254444D774C6A493249444D7A4C6A453254444D774C6A453349444D7A4C6A413355544D794C6A453549444D794C6A557849444D7A4C6A637849444D794C6A497954444D7A4C6A597749444D794C6A457854444D7A4C6A637A49444D794C6A497A55544D304C6A6778494449344C6A493449444D304C6A6B7A494449304C6A413554444D304C6A6B31494449304C6A457854444D304C6A6B7A494449304C6A413555544D324C6A457A494449304C6A453149444D344C6A4D77494449304C6A457954444D344C6A4D78494449304C6A453054444D344C6A4D79494449304C6A4530555451774C6A4978494449304C6A4133494451784C6A5577494449304C6A457A544451784C6A5131494449304C6A4133544451784C6A5530494449304C6A4532555451784C6A6378494449344C6A4131494451794C6A597849444D774C6A637857694976506A78775958526F49475139496B30784E6941784E4342444E544D674D6977314D7941314C446B774944636949484E30636D39725A543069497A566A4E574E6B595349675A6D6C7362443069626D39755A534976506A78775958526F49475139496B30794944493149454D324E7941784E69777A4E7941794D6977344E7941794D434967633352796232746C5053496A5954686C4E445A6A4969426D6157787350534A756232356C4969382B5043397A646D632B, 'BHXp', '2023-03-07 09:08:30', '2023-03-07 00:58:30', '2023-03-07 00:58:30');

SET FOREIGN_KEY_CHECKS = 1;
